function Zs(e,t){return function(){return e.apply(t,arguments)}}const{toString:Zo}=Object.prototype,{getPrototypeOf:Pn}=Object,{iterator:Cr,toStringTag:ei}=Symbol,Or=(e=>t=>{const r=Zo.call(t);return e[r]||(e[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),ge=e=>(e=e.toLowerCase(),t=>Or(t)===e),Rr=e=>t=>typeof t===e,{isArray:dt}=Array,at=Rr("undefined");function Mt(e){return e!==null&&!at(e)&&e.constructor!==null&&!at(e.constructor)&&ne(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const ti=ge("ArrayBuffer");function ea(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&ti(e.buffer),t}const ta=Rr("string"),ne=Rr("function"),ri=Rr("number"),$t=e=>e!==null&&typeof e=="object",ra=e=>e===!0||e===!1,ar=e=>{if(Or(e)!=="object")return!1;const t=Pn(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(ei in e)&&!(Cr in e)},na=e=>{if(!$t(e)||Mt(e))return!1;try{return Object.keys(e).length===0&&Object.getPrototypeOf(e)===Object.prototype}catch{return!1}},sa=ge("Date"),ia=ge("File"),oa=ge("Blob"),aa=ge("FileList"),la=e=>$t(e)&&ne(e.pipe),ca=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||ne(e.append)&&((t=Or(e))==="formdata"||t==="object"&&ne(e.toString)&&e.toString()==="[object FormData]"))},ua=ge("URLSearchParams"),[da,fa,ha,pa]=["ReadableStream","Request","Response","Headers"].map(ge),ga=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Nt(e,t,{allOwnKeys:r=!1}={}){if(e===null||typeof e>"u")return;let n,s;if(typeof e!="object"&&(e=[e]),dt(e))for(n=0,s=e.length;n<s;n++)t.call(null,e[n],n,e);else{if(Mt(e))return;const i=r?Object.getOwnPropertyNames(e):Object.keys(e),o=i.length;let a;for(n=0;n<o;n++)a=i[n],t.call(null,e[a],a,e)}}function ni(e,t){if(Mt(e))return null;t=t.toLowerCase();const r=Object.keys(e);let n=r.length,s;for(;n-- >0;)if(s=r[n],t===s.toLowerCase())return s;return null}const We=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,si=e=>!at(e)&&e!==We;function on(){const{caseless:e,skipUndefined:t}=si(this)&&this||{},r={},n=(s,i)=>{const o=e&&ni(r,i)||i;ar(r[o])&&ar(s)?r[o]=on(r[o],s):ar(s)?r[o]=on({},s):dt(s)?r[o]=s.slice():(!t||!at(s))&&(r[o]=s)};for(let s=0,i=arguments.length;s<i;s++)arguments[s]&&Nt(arguments[s],n);return r}const ma=(e,t,r,{allOwnKeys:n}={})=>(Nt(t,(s,i)=>{r&&ne(s)?e[i]=Zs(s,r):e[i]=s},{allOwnKeys:n}),e),ba=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),ya=(e,t,r,n)=>{e.prototype=Object.create(t.prototype,n),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),r&&Object.assign(e.prototype,r)},va=(e,t,r,n)=>{let s,i,o;const a={};if(t=t||{},e==null)return t;do{for(s=Object.getOwnPropertyNames(e),i=s.length;i-- >0;)o=s[i],(!n||n(o,e,t))&&!a[o]&&(t[o]=e[o],a[o]=!0);e=r!==!1&&Pn(e)}while(e&&(!r||r(e,t))&&e!==Object.prototype);return t},wa=(e,t,r)=>{e=String(e),(r===void 0||r>e.length)&&(r=e.length),r-=t.length;const n=e.indexOf(t,r);return n!==-1&&n===r},_a=e=>{if(!e)return null;if(dt(e))return e;let t=e.length;if(!ri(t))return null;const r=new Array(t);for(;t-- >0;)r[t]=e[t];return r},xa=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&Pn(Uint8Array)),ka=(e,t)=>{const n=(e&&e[Cr]).call(e);let s;for(;(s=n.next())&&!s.done;){const i=s.value;t.call(e,i[0],i[1])}},Ea=(e,t)=>{let r;const n=[];for(;(r=e.exec(t))!==null;)n.push(r);return n},Sa=ge("HTMLFormElement"),Ta=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(r,n,s){return n.toUpperCase()+s}),ls=(({hasOwnProperty:e})=>(t,r)=>e.call(t,r))(Object.prototype),Aa=ge("RegExp"),ii=(e,t)=>{const r=Object.getOwnPropertyDescriptors(e),n={};Nt(r,(s,i)=>{let o;(o=t(s,i,e))!==!1&&(n[i]=o||s)}),Object.defineProperties(e,n)},Ca=e=>{ii(e,(t,r)=>{if(ne(e)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;const n=e[r];if(ne(n)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},Oa=(e,t)=>{const r={},n=s=>{s.forEach(i=>{r[i]=!0})};return dt(e)?n(e):n(String(e).split(t)),r},Ra=()=>{},Da=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t;function Pa(e){return!!(e&&ne(e.append)&&e[ei]==="FormData"&&e[Cr])}const La=e=>{const t=new Array(10),r=(n,s)=>{if($t(n)){if(t.indexOf(n)>=0)return;if(Mt(n))return n;if(!("toJSON"in n)){t[s]=n;const i=dt(n)?[]:{};return Nt(n,(o,a)=>{const l=r(o,s+1);!at(l)&&(i[a]=l)}),t[s]=void 0,i}}return n};return r(e,0)},Ia=ge("AsyncFunction"),Ma=e=>e&&($t(e)||ne(e))&&ne(e.then)&&ne(e.catch),oi=((e,t)=>e?setImmediate:t?((r,n)=>(We.addEventListener("message",({source:s,data:i})=>{s===We&&i===r&&n.length&&n.shift()()},!1),s=>{n.push(s),We.postMessage(r,"*")}))(`axios@${Math.random()}`,[]):r=>setTimeout(r))(typeof setImmediate=="function",ne(We.postMessage)),$a=typeof queueMicrotask<"u"?queueMicrotask.bind(We):typeof process<"u"&&process.nextTick||oi,Na=e=>e!=null&&ne(e[Cr]),p={isArray:dt,isArrayBuffer:ti,isBuffer:Mt,isFormData:ca,isArrayBufferView:ea,isString:ta,isNumber:ri,isBoolean:ra,isObject:$t,isPlainObject:ar,isEmptyObject:na,isReadableStream:da,isRequest:fa,isResponse:ha,isHeaders:pa,isUndefined:at,isDate:sa,isFile:ia,isBlob:oa,isRegExp:Aa,isFunction:ne,isStream:la,isURLSearchParams:ua,isTypedArray:xa,isFileList:aa,forEach:Nt,merge:on,extend:ma,trim:ga,stripBOM:ba,inherits:ya,toFlatObject:va,kindOf:Or,kindOfTest:ge,endsWith:wa,toArray:_a,forEachEntry:ka,matchAll:Ea,isHTMLForm:Sa,hasOwnProperty:ls,hasOwnProp:ls,reduceDescriptors:ii,freezeMethods:Ca,toObjectSet:Oa,toCamelCase:Ta,noop:Ra,toFiniteNumber:Da,findKey:ni,global:We,isContextDefined:si,isSpecCompliantForm:Pa,toJSONObject:La,isAsyncFn:Ia,isThenable:Ma,setImmediate:oi,asap:$a,isIterable:Na};function S(e,t,r,n,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),r&&(this.config=r),n&&(this.request=n),s&&(this.response=s,this.status=s.status?s.status:null)}p.inherits(S,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:p.toJSONObject(this.config),code:this.code,status:this.status}}});const ai=S.prototype,li={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{li[e]={value:e}});Object.defineProperties(S,li);Object.defineProperty(ai,"isAxiosError",{value:!0});S.from=(e,t,r,n,s,i)=>{const o=Object.create(ai);p.toFlatObject(e,o,function(u){return u!==Error.prototype},c=>c!=="isAxiosError");const a=e&&e.message?e.message:"Error",l=t==null&&e?e.code:t;return S.call(o,a,l,r,n,s),e&&o.cause==null&&Object.defineProperty(o,"cause",{value:e,configurable:!0}),o.name=e&&e.name||"Error",i&&Object.assign(o,i),o};const Fa=null;function an(e){return p.isPlainObject(e)||p.isArray(e)}function ci(e){return p.endsWith(e,"[]")?e.slice(0,-2):e}function cs(e,t,r){return e?e.concat(t).map(function(s,i){return s=ci(s),!r&&i?"["+s+"]":s}).join(r?".":""):t}function ja(e){return p.isArray(e)&&!e.some(an)}const Ua=p.toFlatObject(p,{},null,function(t){return/^is[A-Z]/.test(t)});function Dr(e,t,r){if(!p.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,r=p.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(b,g){return!p.isUndefined(g[b])});const n=r.metaTokens,s=r.visitor||u,i=r.dots,o=r.indexes,l=(r.Blob||typeof Blob<"u"&&Blob)&&p.isSpecCompliantForm(t);if(!p.isFunction(s))throw new TypeError("visitor must be a function");function c(h){if(h===null)return"";if(p.isDate(h))return h.toISOString();if(p.isBoolean(h))return h.toString();if(!l&&p.isBlob(h))throw new S("Blob is not supported. Use a Buffer instead.");return p.isArrayBuffer(h)||p.isTypedArray(h)?l&&typeof Blob=="function"?new Blob([h]):Buffer.from(h):h}function u(h,b,g){let w=h;if(h&&!g&&typeof h=="object"){if(p.endsWith(b,"{}"))b=n?b:b.slice(0,-2),h=JSON.stringify(h);else if(p.isArray(h)&&ja(h)||(p.isFileList(h)||p.endsWith(b,"[]"))&&(w=p.toArray(h)))return b=ci(b),w.forEach(function(k,T){!(p.isUndefined(k)||k===null)&&t.append(o===!0?cs([b],T,i):o===null?b:b+"[]",c(k))}),!1}return an(h)?!0:(t.append(cs(g,b,i),c(h)),!1)}const d=[],f=Object.assign(Ua,{defaultVisitor:u,convertValue:c,isVisitable:an});function m(h,b){if(!p.isUndefined(h)){if(d.indexOf(h)!==-1)throw Error("Circular reference detected in "+b.join("."));d.push(h),p.forEach(h,function(w,v){(!(p.isUndefined(w)||w===null)&&s.call(t,w,p.isString(v)?v.trim():v,b,f))===!0&&m(w,b?b.concat(v):[v])}),d.pop()}}if(!p.isObject(e))throw new TypeError("data must be an object");return m(e),t}function us(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(n){return t[n]})}function Ln(e,t){this._pairs=[],e&&Dr(e,this,t)}const ui=Ln.prototype;ui.append=function(t,r){this._pairs.push([t,r])};ui.toString=function(t){const r=t?function(n){return t.call(this,n,us)}:us;return this._pairs.map(function(s){return r(s[0])+"="+r(s[1])},"").join("&")};function Ha(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function di(e,t,r){if(!t)return e;const n=r&&r.encode||Ha;p.isFunction(r)&&(r={serialize:r});const s=r&&r.serialize;let i;if(s?i=s(t,r):i=p.isURLSearchParams(t)?t.toString():new Ln(t,r).toString(n),i){const o=e.indexOf("#");o!==-1&&(e=e.slice(0,o)),e+=(e.indexOf("?")===-1?"?":"&")+i}return e}class ds{constructor(){this.handlers=[]}use(t,r,n){return this.handlers.push({fulfilled:t,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){p.forEach(this.handlers,function(n){n!==null&&t(n)})}}const fi={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},qa=typeof URLSearchParams<"u"?URLSearchParams:Ln,Ba=typeof FormData<"u"?FormData:null,Wa=typeof Blob<"u"?Blob:null,Xa={isBrowser:!0,classes:{URLSearchParams:qa,FormData:Ba,Blob:Wa},protocols:["http","https","file","blob","url","data"]},In=typeof window<"u"&&typeof document<"u",ln=typeof navigator=="object"&&navigator||void 0,za=In&&(!ln||["ReactNative","NativeScript","NS"].indexOf(ln.product)<0),Ya=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",Ka=In&&window.location.href||"http://localhost",Va=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:In,hasStandardBrowserEnv:za,hasStandardBrowserWebWorkerEnv:Ya,navigator:ln,origin:Ka},Symbol.toStringTag,{value:"Module"})),K={...Va,...Xa};function Ja(e,t){return Dr(e,new K.classes.URLSearchParams,{visitor:function(r,n,s,i){return K.isNode&&p.isBuffer(r)?(this.append(n,r.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)},...t})}function Ga(e){return p.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function Qa(e){const t={},r=Object.keys(e);let n;const s=r.length;let i;for(n=0;n<s;n++)i=r[n],t[i]=e[i];return t}function hi(e){function t(r,n,s,i){let o=r[i++];if(o==="__proto__")return!0;const a=Number.isFinite(+o),l=i>=r.length;return o=!o&&p.isArray(s)?s.length:o,l?(p.hasOwnProp(s,o)?s[o]=[s[o],n]:s[o]=n,!a):((!s[o]||!p.isObject(s[o]))&&(s[o]=[]),t(r,n,s[o],i)&&p.isArray(s[o])&&(s[o]=Qa(s[o])),!a)}if(p.isFormData(e)&&p.isFunction(e.entries)){const r={};return p.forEachEntry(e,(n,s)=>{t(Ga(n),s,r,0)}),r}return null}function Za(e,t,r){if(p.isString(e))try{return(t||JSON.parse)(e),p.trim(e)}catch(n){if(n.name!=="SyntaxError")throw n}return(r||JSON.stringify)(e)}const Ft={transitional:fi,adapter:["xhr","http","fetch"],transformRequest:[function(t,r){const n=r.getContentType()||"",s=n.indexOf("application/json")>-1,i=p.isObject(t);if(i&&p.isHTMLForm(t)&&(t=new FormData(t)),p.isFormData(t))return s?JSON.stringify(hi(t)):t;if(p.isArrayBuffer(t)||p.isBuffer(t)||p.isStream(t)||p.isFile(t)||p.isBlob(t)||p.isReadableStream(t))return t;if(p.isArrayBufferView(t))return t.buffer;if(p.isURLSearchParams(t))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let a;if(i){if(n.indexOf("application/x-www-form-urlencoded")>-1)return Ja(t,this.formSerializer).toString();if((a=p.isFileList(t))||n.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return Dr(a?{"files[]":t}:t,l&&new l,this.formSerializer)}}return i||s?(r.setContentType("application/json",!1),Za(t)):t}],transformResponse:[function(t){const r=this.transitional||Ft.transitional,n=r&&r.forcedJSONParsing,s=this.responseType==="json";if(p.isResponse(t)||p.isReadableStream(t))return t;if(t&&p.isString(t)&&(n&&!this.responseType||s)){const o=!(r&&r.silentJSONParsing)&&s;try{return JSON.parse(t,this.parseReviver)}catch(a){if(o)throw a.name==="SyntaxError"?S.from(a,S.ERR_BAD_RESPONSE,this,null,this.response):a}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:K.classes.FormData,Blob:K.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};p.forEach(["delete","get","head","post","put","patch"],e=>{Ft.headers[e]={}});const el=p.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),tl=e=>{const t={};let r,n,s;return e&&e.split(`
`).forEach(function(o){s=o.indexOf(":"),r=o.substring(0,s).trim().toLowerCase(),n=o.substring(s+1).trim(),!(!r||t[r]&&el[r])&&(r==="set-cookie"?t[r]?t[r].push(n):t[r]=[n]:t[r]=t[r]?t[r]+", "+n:n)}),t},fs=Symbol("internals");function vt(e){return e&&String(e).trim().toLowerCase()}function lr(e){return e===!1||e==null?e:p.isArray(e)?e.map(lr):String(e)}function rl(e){const t=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=r.exec(e);)t[n[1]]=n[2];return t}const nl=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function qr(e,t,r,n,s){if(p.isFunction(n))return n.call(this,t,r);if(s&&(t=r),!!p.isString(t)){if(p.isString(n))return t.indexOf(n)!==-1;if(p.isRegExp(n))return n.test(t)}}function sl(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,r,n)=>r.toUpperCase()+n)}function il(e,t){const r=p.toCamelCase(" "+t);["get","set","has"].forEach(n=>{Object.defineProperty(e,n+r,{value:function(s,i,o){return this[n].call(this,t,s,i,o)},configurable:!0})})}let se=class{constructor(t){t&&this.set(t)}set(t,r,n){const s=this;function i(a,l,c){const u=vt(l);if(!u)throw new Error("header name must be a non-empty string");const d=p.findKey(s,u);(!d||s[d]===void 0||c===!0||c===void 0&&s[d]!==!1)&&(s[d||l]=lr(a))}const o=(a,l)=>p.forEach(a,(c,u)=>i(c,u,l));if(p.isPlainObject(t)||t instanceof this.constructor)o(t,r);else if(p.isString(t)&&(t=t.trim())&&!nl(t))o(tl(t),r);else if(p.isObject(t)&&p.isIterable(t)){let a={},l,c;for(const u of t){if(!p.isArray(u))throw TypeError("Object iterator must return a key-value pair");a[c=u[0]]=(l=a[c])?p.isArray(l)?[...l,u[1]]:[l,u[1]]:u[1]}o(a,r)}else t!=null&&i(r,t,n);return this}get(t,r){if(t=vt(t),t){const n=p.findKey(this,t);if(n){const s=this[n];if(!r)return s;if(r===!0)return rl(s);if(p.isFunction(r))return r.call(this,s,n);if(p.isRegExp(r))return r.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,r){if(t=vt(t),t){const n=p.findKey(this,t);return!!(n&&this[n]!==void 0&&(!r||qr(this,this[n],n,r)))}return!1}delete(t,r){const n=this;let s=!1;function i(o){if(o=vt(o),o){const a=p.findKey(n,o);a&&(!r||qr(n,n[a],a,r))&&(delete n[a],s=!0)}}return p.isArray(t)?t.forEach(i):i(t),s}clear(t){const r=Object.keys(this);let n=r.length,s=!1;for(;n--;){const i=r[n];(!t||qr(this,this[i],i,t,!0))&&(delete this[i],s=!0)}return s}normalize(t){const r=this,n={};return p.forEach(this,(s,i)=>{const o=p.findKey(n,i);if(o){r[o]=lr(s),delete r[i];return}const a=t?sl(i):String(i).trim();a!==i&&delete r[i],r[a]=lr(s),n[a]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const r=Object.create(null);return p.forEach(this,(n,s)=>{n!=null&&n!==!1&&(r[s]=t&&p.isArray(n)?n.join(", "):n)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,r])=>t+": "+r).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...r){const n=new this(t);return r.forEach(s=>n.set(s)),n}static accessor(t){const n=(this[fs]=this[fs]={accessors:{}}).accessors,s=this.prototype;function i(o){const a=vt(o);n[a]||(il(s,o),n[a]=!0)}return p.isArray(t)?t.forEach(i):i(t),this}};se.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);p.reduceDescriptors(se.prototype,({value:e},t)=>{let r=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(n){this[r]=n}}});p.freezeMethods(se);function Br(e,t){const r=this||Ft,n=t||r,s=se.from(n.headers);let i=n.data;return p.forEach(e,function(a){i=a.call(r,i,s.normalize(),t?t.status:void 0)}),s.normalize(),i}function pi(e){return!!(e&&e.__CANCEL__)}function ft(e,t,r){S.call(this,e??"canceled",S.ERR_CANCELED,t,r),this.name="CanceledError"}p.inherits(ft,S,{__CANCEL__:!0});function gi(e,t,r){const n=r.config.validateStatus;!r.status||!n||n(r.status)?e(r):t(new S("Request failed with status code "+r.status,[S.ERR_BAD_REQUEST,S.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}function ol(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function al(e,t){e=e||10;const r=new Array(e),n=new Array(e);let s=0,i=0,o;return t=t!==void 0?t:1e3,function(l){const c=Date.now(),u=n[i];o||(o=c),r[s]=l,n[s]=c;let d=i,f=0;for(;d!==s;)f+=r[d++],d=d%e;if(s=(s+1)%e,s===i&&(i=(i+1)%e),c-o<t)return;const m=u&&c-u;return m?Math.round(f*1e3/m):void 0}}function ll(e,t){let r=0,n=1e3/t,s,i;const o=(c,u=Date.now())=>{r=u,s=null,i&&(clearTimeout(i),i=null),e(...c)};return[(...c)=>{const u=Date.now(),d=u-r;d>=n?o(c,u):(s=c,i||(i=setTimeout(()=>{i=null,o(s)},n-d)))},()=>s&&o(s)]}const br=(e,t,r=3)=>{let n=0;const s=al(50,250);return ll(i=>{const o=i.loaded,a=i.lengthComputable?i.total:void 0,l=o-n,c=s(l),u=o<=a;n=o;const d={loaded:o,total:a,progress:a?o/a:void 0,bytes:l,rate:c||void 0,estimated:c&&a&&u?(a-o)/c:void 0,event:i,lengthComputable:a!=null,[t?"download":"upload"]:!0};e(d)},r)},hs=(e,t)=>{const r=e!=null;return[n=>t[0]({lengthComputable:r,total:e,loaded:n}),t[1]]},ps=e=>(...t)=>p.asap(()=>e(...t)),cl=K.hasStandardBrowserEnv?((e,t)=>r=>(r=new URL(r,K.origin),e.protocol===r.protocol&&e.host===r.host&&(t||e.port===r.port)))(new URL(K.origin),K.navigator&&/(msie|trident)/i.test(K.navigator.userAgent)):()=>!0,ul=K.hasStandardBrowserEnv?{write(e,t,r,n,s,i){const o=[e+"="+encodeURIComponent(t)];p.isNumber(r)&&o.push("expires="+new Date(r).toGMTString()),p.isString(n)&&o.push("path="+n),p.isString(s)&&o.push("domain="+s),i===!0&&o.push("secure"),document.cookie=o.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function dl(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function fl(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function mi(e,t,r){let n=!dl(t);return e&&(n||r==!1)?fl(e,t):t}const gs=e=>e instanceof se?{...e}:e;function Ge(e,t){t=t||{};const r={};function n(c,u,d,f){return p.isPlainObject(c)&&p.isPlainObject(u)?p.merge.call({caseless:f},c,u):p.isPlainObject(u)?p.merge({},u):p.isArray(u)?u.slice():u}function s(c,u,d,f){if(p.isUndefined(u)){if(!p.isUndefined(c))return n(void 0,c,d,f)}else return n(c,u,d,f)}function i(c,u){if(!p.isUndefined(u))return n(void 0,u)}function o(c,u){if(p.isUndefined(u)){if(!p.isUndefined(c))return n(void 0,c)}else return n(void 0,u)}function a(c,u,d){if(d in t)return n(c,u);if(d in e)return n(void 0,c)}const l={url:i,method:i,data:i,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(c,u,d)=>s(gs(c),gs(u),d,!0)};return p.forEach(Object.keys({...e,...t}),function(u){const d=l[u]||s,f=d(e[u],t[u],u);p.isUndefined(f)&&d!==a||(r[u]=f)}),r}const bi=e=>{const t=Ge({},e);let{data:r,withXSRFToken:n,xsrfHeaderName:s,xsrfCookieName:i,headers:o,auth:a}=t;if(t.headers=o=se.from(o),t.url=di(mi(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),a&&o.set("Authorization","Basic "+btoa((a.username||"")+":"+(a.password?unescape(encodeURIComponent(a.password)):""))),p.isFormData(r)){if(K.hasStandardBrowserEnv||K.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if(p.isFunction(r.getHeaders)){const l=r.getHeaders(),c=["content-type","content-length"];Object.entries(l).forEach(([u,d])=>{c.includes(u.toLowerCase())&&o.set(u,d)})}}if(K.hasStandardBrowserEnv&&(n&&p.isFunction(n)&&(n=n(t)),n||n!==!1&&cl(t.url))){const l=s&&i&&ul.read(i);l&&o.set(s,l)}return t},hl=typeof XMLHttpRequest<"u",pl=hl&&function(e){return new Promise(function(r,n){const s=bi(e);let i=s.data;const o=se.from(s.headers).normalize();let{responseType:a,onUploadProgress:l,onDownloadProgress:c}=s,u,d,f,m,h;function b(){m&&m(),h&&h(),s.cancelToken&&s.cancelToken.unsubscribe(u),s.signal&&s.signal.removeEventListener("abort",u)}let g=new XMLHttpRequest;g.open(s.method.toUpperCase(),s.url,!0),g.timeout=s.timeout;function w(){if(!g)return;const k=se.from("getAllResponseHeaders"in g&&g.getAllResponseHeaders()),O={data:!a||a==="text"||a==="json"?g.responseText:g.response,status:g.status,statusText:g.statusText,headers:k,config:e,request:g};gi(function(M){r(M),b()},function(M){n(M),b()},O),g=null}"onloadend"in g?g.onloadend=w:g.onreadystatechange=function(){!g||g.readyState!==4||g.status===0&&!(g.responseURL&&g.responseURL.indexOf("file:")===0)||setTimeout(w)},g.onabort=function(){g&&(n(new S("Request aborted",S.ECONNABORTED,e,g)),g=null)},g.onerror=function(T){const O=T&&T.message?T.message:"Network Error",P=new S(O,S.ERR_NETWORK,e,g);P.event=T||null,n(P),g=null},g.ontimeout=function(){let T=s.timeout?"timeout of "+s.timeout+"ms exceeded":"timeout exceeded";const O=s.transitional||fi;s.timeoutErrorMessage&&(T=s.timeoutErrorMessage),n(new S(T,O.clarifyTimeoutError?S.ETIMEDOUT:S.ECONNABORTED,e,g)),g=null},i===void 0&&o.setContentType(null),"setRequestHeader"in g&&p.forEach(o.toJSON(),function(T,O){g.setRequestHeader(O,T)}),p.isUndefined(s.withCredentials)||(g.withCredentials=!!s.withCredentials),a&&a!=="json"&&(g.responseType=s.responseType),c&&([f,h]=br(c,!0),g.addEventListener("progress",f)),l&&g.upload&&([d,m]=br(l),g.upload.addEventListener("progress",d),g.upload.addEventListener("loadend",m)),(s.cancelToken||s.signal)&&(u=k=>{g&&(n(!k||k.type?new ft(null,e,g):k),g.abort(),g=null)},s.cancelToken&&s.cancelToken.subscribe(u),s.signal&&(s.signal.aborted?u():s.signal.addEventListener("abort",u)));const v=ol(s.url);if(v&&K.protocols.indexOf(v)===-1){n(new S("Unsupported protocol "+v+":",S.ERR_BAD_REQUEST,e));return}g.send(i||null)})},gl=(e,t)=>{const{length:r}=e=e?e.filter(Boolean):[];if(t||r){let n=new AbortController,s;const i=function(c){if(!s){s=!0,a();const u=c instanceof Error?c:this.reason;n.abort(u instanceof S?u:new ft(u instanceof Error?u.message:u))}};let o=t&&setTimeout(()=>{o=null,i(new S(`timeout ${t} of ms exceeded`,S.ETIMEDOUT))},t);const a=()=>{e&&(o&&clearTimeout(o),o=null,e.forEach(c=>{c.unsubscribe?c.unsubscribe(i):c.removeEventListener("abort",i)}),e=null)};e.forEach(c=>c.addEventListener("abort",i));const{signal:l}=n;return l.unsubscribe=()=>p.asap(a),l}},ml=function*(e,t){let r=e.byteLength;if(r<t){yield e;return}let n=0,s;for(;n<r;)s=n+t,yield e.slice(n,s),n=s},bl=async function*(e,t){for await(const r of yl(e))yield*ml(r,t)},yl=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:r,value:n}=await t.read();if(r)break;yield n}}finally{await t.cancel()}},ms=(e,t,r,n)=>{const s=bl(e,t);let i=0,o,a=l=>{o||(o=!0,n&&n(l))};return new ReadableStream({async pull(l){try{const{done:c,value:u}=await s.next();if(c){a(),l.close();return}let d=u.byteLength;if(r){let f=i+=d;r(f)}l.enqueue(new Uint8Array(u))}catch(c){throw a(c),c}},cancel(l){return a(l),s.return()}},{highWaterMark:2})},bs=64*1024,{isFunction:Kt}=p,vl=(({Request:e,Response:t})=>({Request:e,Response:t}))(p.global),{ReadableStream:ys,TextEncoder:vs}=p.global,ws=(e,...t)=>{try{return!!e(...t)}catch{return!1}},wl=e=>{e=p.merge.call({skipUndefined:!0},vl,e);const{fetch:t,Request:r,Response:n}=e,s=t?Kt(t):typeof fetch=="function",i=Kt(r),o=Kt(n);if(!s)return!1;const a=s&&Kt(ys),l=s&&(typeof vs=="function"?(h=>b=>h.encode(b))(new vs):async h=>new Uint8Array(await new r(h).arrayBuffer())),c=i&&a&&ws(()=>{let h=!1;const b=new r(K.origin,{body:new ys,method:"POST",get duplex(){return h=!0,"half"}}).headers.has("Content-Type");return h&&!b}),u=o&&a&&ws(()=>p.isReadableStream(new n("").body)),d={stream:u&&(h=>h.body)};s&&["text","arrayBuffer","blob","formData","stream"].forEach(h=>{!d[h]&&(d[h]=(b,g)=>{let w=b&&b[h];if(w)return w.call(b);throw new S(`Response type '${h}' is not supported`,S.ERR_NOT_SUPPORT,g)})});const f=async h=>{if(h==null)return 0;if(p.isBlob(h))return h.size;if(p.isSpecCompliantForm(h))return(await new r(K.origin,{method:"POST",body:h}).arrayBuffer()).byteLength;if(p.isArrayBufferView(h)||p.isArrayBuffer(h))return h.byteLength;if(p.isURLSearchParams(h)&&(h=h+""),p.isString(h))return(await l(h)).byteLength},m=async(h,b)=>{const g=p.toFiniteNumber(h.getContentLength());return g??f(b)};return async h=>{let{url:b,method:g,data:w,signal:v,cancelToken:k,timeout:T,onDownloadProgress:O,onUploadProgress:P,responseType:M,headers:ce,withCredentials:U="same-origin",fetchOptions:be}=bi(h),ue=t||fetch;M=M?(M+"").toLowerCase():"text";let ye=gl([v,k&&k.toAbortSignal()],T),V=null;const J=ye&&ye.unsubscribe&&(()=>{ye.unsubscribe()});let Oe;try{if(P&&c&&g!=="get"&&g!=="head"&&(Oe=await m(ce,w))!==0){let de=new r(b,{method:"POST",body:w,duplex:"half"}),Re;if(p.isFormData(w)&&(Re=de.headers.get("content-type"))&&ce.setContentType(Re),de.body){const[Hr,Yt]=hs(Oe,br(ps(P)));w=ms(de.body,bs,Hr,Yt)}}p.isString(U)||(U=U?"include":"omit");const X=i&&"credentials"in r.prototype,je={...be,signal:ye,method:g.toUpperCase(),headers:ce.normalize().toJSON(),body:w,duplex:"half",credentials:X?U:void 0};V=i&&new r(b,je);let Z=await(i?ue(V,be):ue(b,je));const zt=u&&(M==="stream"||M==="response");if(u&&(O||zt&&J)){const de={};["status","statusText","headers"].forEach(as=>{de[as]=Z[as]});const Re=p.toFiniteNumber(Z.headers.get("content-length")),[Hr,Yt]=O&&hs(Re,br(ps(O),!0))||[];Z=new n(ms(Z.body,bs,Hr,()=>{Yt&&Yt(),J&&J()}),de)}M=M||"text";let os=await d[p.findKey(d,M)||"text"](Z,h);return!zt&&J&&J(),await new Promise((de,Re)=>{gi(de,Re,{data:os,headers:se.from(Z.headers),status:Z.status,statusText:Z.statusText,config:h,request:V})})}catch(X){throw J&&J(),X&&X.name==="TypeError"&&/Load failed|fetch/i.test(X.message)?Object.assign(new S("Network Error",S.ERR_NETWORK,h,V),{cause:X.cause||X}):S.from(X,X&&X.code,h,V)}}},_l=new Map,yi=e=>{let t=e?e.env:{};const{fetch:r,Request:n,Response:s}=t,i=[n,s,r];let o=i.length,a=o,l,c,u=_l;for(;a--;)l=i[a],c=u.get(l),c===void 0&&u.set(l,c=a?new Map:wl(t)),u=c;return c};yi();const cn={http:Fa,xhr:pl,fetch:{get:yi}};p.forEach(cn,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const _s=e=>`- ${e}`,xl=e=>p.isFunction(e)||e===null||e===!1,vi={getAdapter:(e,t)=>{e=p.isArray(e)?e:[e];const{length:r}=e;let n,s;const i={};for(let o=0;o<r;o++){n=e[o];let a;if(s=n,!xl(n)&&(s=cn[(a=String(n)).toLowerCase()],s===void 0))throw new S(`Unknown adapter '${a}'`);if(s&&(p.isFunction(s)||(s=s.get(t))))break;i[a||"#"+o]=s}if(!s){const o=Object.entries(i).map(([l,c])=>`adapter ${l} `+(c===!1?"is not supported by the environment":"is not available in the build"));let a=r?o.length>1?`since :
`+o.map(_s).join(`
`):" "+_s(o[0]):"as no adapter specified";throw new S("There is no suitable adapter to dispatch the request "+a,"ERR_NOT_SUPPORT")}return s},adapters:cn};function Wr(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new ft(null,e)}function xs(e){return Wr(e),e.headers=se.from(e.headers),e.data=Br.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),vi.getAdapter(e.adapter||Ft.adapter,e)(e).then(function(n){return Wr(e),n.data=Br.call(e,e.transformResponse,n),n.headers=se.from(n.headers),n},function(n){return pi(n)||(Wr(e),n&&n.response&&(n.response.data=Br.call(e,e.transformResponse,n.response),n.response.headers=se.from(n.response.headers))),Promise.reject(n)})}const wi="1.12.2",Pr={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{Pr[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}});const ks={};Pr.transitional=function(t,r,n){function s(i,o){return"[Axios v"+wi+"] Transitional option '"+i+"'"+o+(n?". "+n:"")}return(i,o,a)=>{if(t===!1)throw new S(s(o," has been removed"+(r?" in "+r:"")),S.ERR_DEPRECATED);return r&&!ks[o]&&(ks[o]=!0,console.warn(s(o," has been deprecated since v"+r+" and will be removed in the near future"))),t?t(i,o,a):!0}};Pr.spelling=function(t){return(r,n)=>(console.warn(`${n} is likely a misspelling of ${t}`),!0)};function kl(e,t,r){if(typeof e!="object")throw new S("options must be an object",S.ERR_BAD_OPTION_VALUE);const n=Object.keys(e);let s=n.length;for(;s-- >0;){const i=n[s],o=t[i];if(o){const a=e[i],l=a===void 0||o(a,i,e);if(l!==!0)throw new S("option "+i+" must be "+l,S.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new S("Unknown option "+i,S.ERR_BAD_OPTION)}}const cr={assertOptions:kl,validators:Pr},ve=cr.validators;let ze=class{constructor(t){this.defaults=t||{},this.interceptors={request:new ds,response:new ds}}async request(t,r){try{return await this._request(t,r)}catch(n){if(n instanceof Error){let s={};Error.captureStackTrace?Error.captureStackTrace(s):s=new Error;const i=s.stack?s.stack.replace(/^.+\n/,""):"";try{n.stack?i&&!String(n.stack).endsWith(i.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+i):n.stack=i}catch{}}throw n}}_request(t,r){typeof t=="string"?(r=r||{},r.url=t):r=t||{},r=Ge(this.defaults,r);const{transitional:n,paramsSerializer:s,headers:i}=r;n!==void 0&&cr.assertOptions(n,{silentJSONParsing:ve.transitional(ve.boolean),forcedJSONParsing:ve.transitional(ve.boolean),clarifyTimeoutError:ve.transitional(ve.boolean)},!1),s!=null&&(p.isFunction(s)?r.paramsSerializer={serialize:s}:cr.assertOptions(s,{encode:ve.function,serialize:ve.function},!0)),r.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?r.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:r.allowAbsoluteUrls=!0),cr.assertOptions(r,{baseUrl:ve.spelling("baseURL"),withXsrfToken:ve.spelling("withXSRFToken")},!0),r.method=(r.method||this.defaults.method||"get").toLowerCase();let o=i&&p.merge(i.common,i[r.method]);i&&p.forEach(["delete","get","head","post","put","patch","common"],h=>{delete i[h]}),r.headers=se.concat(o,i);const a=[];let l=!0;this.interceptors.request.forEach(function(b){typeof b.runWhen=="function"&&b.runWhen(r)===!1||(l=l&&b.synchronous,a.unshift(b.fulfilled,b.rejected))});const c=[];this.interceptors.response.forEach(function(b){c.push(b.fulfilled,b.rejected)});let u,d=0,f;if(!l){const h=[xs.bind(this),void 0];for(h.unshift(...a),h.push(...c),f=h.length,u=Promise.resolve(r);d<f;)u=u.then(h[d++],h[d++]);return u}f=a.length;let m=r;for(;d<f;){const h=a[d++],b=a[d++];try{m=h(m)}catch(g){b.call(this,g);break}}try{u=xs.call(this,m)}catch(h){return Promise.reject(h)}for(d=0,f=c.length;d<f;)u=u.then(c[d++],c[d++]);return u}getUri(t){t=Ge(this.defaults,t);const r=mi(t.baseURL,t.url,t.allowAbsoluteUrls);return di(r,t.params,t.paramsSerializer)}};p.forEach(["delete","get","head","options"],function(t){ze.prototype[t]=function(r,n){return this.request(Ge(n||{},{method:t,url:r,data:(n||{}).data}))}});p.forEach(["post","put","patch"],function(t){function r(n){return function(i,o,a){return this.request(Ge(a||{},{method:t,headers:n?{"Content-Type":"multipart/form-data"}:{},url:i,data:o}))}}ze.prototype[t]=r(),ze.prototype[t+"Form"]=r(!0)});let El=class _i{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(function(i){r=i});const n=this;this.promise.then(s=>{if(!n._listeners)return;let i=n._listeners.length;for(;i-- >0;)n._listeners[i](s);n._listeners=null}),this.promise.then=s=>{let i;const o=new Promise(a=>{n.subscribe(a),i=a}).then(s);return o.cancel=function(){n.unsubscribe(i)},o},t(function(i,o,a){n.reason||(n.reason=new ft(i,o,a),r(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const r=this._listeners.indexOf(t);r!==-1&&this._listeners.splice(r,1)}toAbortSignal(){const t=new AbortController,r=n=>{t.abort(n)};return this.subscribe(r),t.signal.unsubscribe=()=>this.unsubscribe(r),t.signal}static source(){let t;return{token:new _i(function(s){t=s}),cancel:t}}};function Sl(e){return function(r){return e.apply(null,r)}}function Tl(e){return p.isObject(e)&&e.isAxiosError===!0}const un={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(un).forEach(([e,t])=>{un[t]=e});function xi(e){const t=new ze(e),r=Zs(ze.prototype.request,t);return p.extend(r,ze.prototype,t,{allOwnKeys:!0}),p.extend(r,t,null,{allOwnKeys:!0}),r.create=function(s){return xi(Ge(e,s))},r}const R=xi(Ft);R.Axios=ze;R.CanceledError=ft;R.CancelToken=El;R.isCancel=pi;R.VERSION=wi;R.toFormData=Dr;R.AxiosError=S;R.Cancel=R.CanceledError;R.all=function(t){return Promise.all(t)};R.spread=Sl;R.isAxiosError=Tl;R.mergeConfig=Ge;R.AxiosHeaders=se;R.formToJSON=e=>hi(p.isHTMLForm(e)?new FormData(e):e);R.getAdapter=vi.getAdapter;R.HttpStatusCode=un;R.default=R;const{Axios:Wd,AxiosError:Xd,CanceledError:zd,isCancel:Yd,CancelToken:Kd,VERSION:Vd,all:Jd,Cancel:Gd,isAxiosError:Qd,spread:Zd,toFormData:ef,AxiosHeaders:tf,HttpStatusCode:rf,formToJSON:nf,getAdapter:sf,mergeConfig:of}=R;window.axios=R;window.axios.defaults.headers.common["X-Requested-With"]="XMLHttpRequest";const Es=document.head.querySelector('meta[name="csrf-token"]');Es&&(window.axios.defaults.headers.common["X-CSRF-TOKEN"]=Es.content);window.api={get(e,t={}){return R.get(e,t).then(r=>r.data)},post(e,t={},r={}){return R.post(e,t,r).then(n=>n.data)},put(e,t={},r={}){return R.put(e,t,r).then(n=>n.data)},patch(e,t={},r={}){return R.patch(e,t,r).then(n=>n.data)},delete(e,t={}){return R.delete(e,t).then(r=>r.data)}};window.assignRoomsPanel=function(t,r,n=[],s,i){return{propertyId:t,rooms:r,search:"",selectedIds:Array.from(new Set(n)),newRoomName:"",isSaving:!1,isCreating:!1,get filtered(){if(!this.search)return this.rooms;const o=this.search.toLowerCase();return this.rooms.filter(a=>(a?.name||"").toLowerCase().includes(o))},isSelected(o){return this.selectedIds.includes(o)},toggle(o){this.isSelected(o)?this.selectedIds=this.selectedIds.filter(a=>a!==o):this.selectedIds.push(o)},selectAll(){this.selectedIds=this.filtered.map(o=>o.id)},clearSelection(){this.selectedIds=[]},async createRoom(){if(this.newRoomName.trim()){this.isCreating=!0;try{window.api?.post?.(s,{name:this.newRoomName.trim()});const o=Date.now();this.rooms.push({id:o,name:this.newRoomName.trim(),is_default:!1}),this.selectedIds.push(o),this.newRoomName=""}finally{this.isCreating=!1}}},async save(){this.isSaving=!0;try{const o=await window.api.post(i,{room_ids:this.selectedIds});this.$dispatch("toast",{type:"success",message:o.message||"Rooms attached successfully!"}),this.$dispatch("close-preview-panel",`assign-rooms-${this.propertyId}`),window.location.reload()}catch(o){let a="Failed to attach rooms. Please try again.";if(o?.response?.data){const l=o.response.data;if(a=l.message||l.error||a,l.errors){const c=Object.values(l.errors)[0];a=Array.isArray(c)?c[0]:c}}else o?.message&&(a=o.message);this.$dispatch("toast",{type:"error",message:a})}finally{this.isSaving=!1}}}};window.roomsPreview=function(t=[]){return{rooms:t,search:"",selectedIds:[],get filtered(){if(!this.search)return this.rooms;const r=this.search.toLowerCase();return this.rooms.filter(n=>(n?.name||"").toLowerCase().includes(r))},isSelected(r){return this.selectedIds.includes(r)},toggle(r){this.isSelected(r)?this.selectedIds=this.selectedIds.filter(n=>n!==r):this.selectedIds.push(r)},selectAll(){this.selectedIds=this.filtered.map(r=>r.id)},clearSelection(){this.selectedIds=[]}}};window.duplicatePropertyPanel=function({initialName:t="",rooms:r=[],tasks:n=[],selectedRoomIds:s=[],selectedTaskIds:i=[]}={}){return{newName:t,rooms:r,tasks:n,roomSearch:"",taskSearch:"",selectedRoomIds:Array.from(new Set(s)),selectedTaskIds:Array.from(new Set(i)),get filteredRooms(){if(!this.roomSearch)return this.rooms;const o=this.roomSearch.toLowerCase();return this.rooms.filter(a=>(a?.name||"").toLowerCase().includes(o))},get filteredTasks(){if(!this.taskSearch)return this.tasks;const o=this.taskSearch.toLowerCase();return this.tasks.filter(a=>(a?.name||"").toLowerCase().includes(o))},isRoomSelected(o){return this.selectedRoomIds.includes(o)},isTaskSelected(o){return this.selectedTaskIds.includes(o)},toggleRoom(o){this.isRoomSelected(o)?this.selectedRoomIds=this.selectedRoomIds.filter(a=>a!==o):this.selectedRoomIds.push(o)},toggleTask(o){this.isTaskSelected(o)?this.selectedTaskIds=this.selectedTaskIds.filter(a=>a!==o):this.selectedTaskIds.push(o)},selectAllRooms(){this.selectedRoomIds=this.filteredRooms.map(o=>o.id)},clearRooms(){this.selectedRoomIds=[]},selectAllTasks(){this.selectedTaskIds=this.filteredTasks.map(o=>o.id)},clearTasks(){this.selectedTaskIds=[]}}};var dn=!1,fn=!1,Ye=[],hn=-1;function Al(e){Cl(e)}function Cl(e){Ye.includes(e)||Ye.push(e),Rl()}function Ol(e){let t=Ye.indexOf(e);t!==-1&&t>hn&&Ye.splice(t,1)}function Rl(){!fn&&!dn&&(dn=!0,queueMicrotask(Dl))}function Dl(){dn=!1,fn=!0;for(let e=0;e<Ye.length;e++)Ye[e](),hn=e;Ye.length=0,hn=-1,fn=!1}var ht,Ze,pt,ki,pn=!0;function Pl(e){pn=!1,e(),pn=!0}function Ll(e){ht=e.reactive,pt=e.release,Ze=t=>e.effect(t,{scheduler:r=>{pn?Al(r):r()}}),ki=e.raw}function Ss(e){Ze=e}function Il(e){let t=()=>{};return[n=>{let s=Ze(n);return e._x_effects||(e._x_effects=new Set,e._x_runEffects=()=>{e._x_effects.forEach(i=>i())}),e._x_effects.add(s),t=()=>{s!==void 0&&(e._x_effects.delete(s),pt(s))},s},()=>{t()}]}function Ei(e,t){let r=!0,n,s=Ze(()=>{let i=e();JSON.stringify(i),r?n=i:queueMicrotask(()=>{t(i,n),n=i}),r=!1});return()=>pt(s)}var Si=[],Ti=[],Ai=[];function Ml(e){Ai.push(e)}function Mn(e,t){typeof t=="function"?(e._x_cleanups||(e._x_cleanups=[]),e._x_cleanups.push(t)):(t=e,Ti.push(t))}function Ci(e){Si.push(e)}function Oi(e,t,r){e._x_attributeCleanups||(e._x_attributeCleanups={}),e._x_attributeCleanups[t]||(e._x_attributeCleanups[t]=[]),e._x_attributeCleanups[t].push(r)}function Ri(e,t){e._x_attributeCleanups&&Object.entries(e._x_attributeCleanups).forEach(([r,n])=>{(t===void 0||t.includes(r))&&(n.forEach(s=>s()),delete e._x_attributeCleanups[r])})}function $l(e){for(e._x_effects?.forEach(Ol);e._x_cleanups?.length;)e._x_cleanups.pop()()}var $n=new MutationObserver(Un),Nn=!1;function Fn(){$n.observe(document,{subtree:!0,childList:!0,attributes:!0,attributeOldValue:!0}),Nn=!0}function Di(){Nl(),$n.disconnect(),Nn=!1}var wt=[];function Nl(){let e=$n.takeRecords();wt.push(()=>e.length>0&&Un(e));let t=wt.length;queueMicrotask(()=>{if(wt.length===t)for(;wt.length>0;)wt.shift()()})}function F(e){if(!Nn)return e();Di();let t=e();return Fn(),t}var jn=!1,yr=[];function Fl(){jn=!0}function jl(){jn=!1,Un(yr),yr=[]}function Un(e){if(jn){yr=yr.concat(e);return}let t=[],r=new Set,n=new Map,s=new Map;for(let i=0;i<e.length;i++)if(!e[i].target._x_ignoreMutationObserver&&(e[i].type==="childList"&&(e[i].removedNodes.forEach(o=>{o.nodeType===1&&o._x_marker&&r.add(o)}),e[i].addedNodes.forEach(o=>{if(o.nodeType===1){if(r.has(o)){r.delete(o);return}o._x_marker||t.push(o)}})),e[i].type==="attributes")){let o=e[i].target,a=e[i].attributeName,l=e[i].oldValue,c=()=>{n.has(o)||n.set(o,[]),n.get(o).push({name:a,value:o.getAttribute(a)})},u=()=>{s.has(o)||s.set(o,[]),s.get(o).push(a)};o.hasAttribute(a)&&l===null?c():o.hasAttribute(a)?(u(),c()):u()}s.forEach((i,o)=>{Ri(o,i)}),n.forEach((i,o)=>{Si.forEach(a=>a(o,i))});for(let i of r)t.some(o=>o.contains(i))||Ti.forEach(o=>o(i));for(let i of t)i.isConnected&&Ai.forEach(o=>o(i));t=null,r=null,n=null,s=null}function Pi(e){return Ut(lt(e))}function jt(e,t,r){return e._x_dataStack=[t,...lt(r||e)],()=>{e._x_dataStack=e._x_dataStack.filter(n=>n!==t)}}function lt(e){return e._x_dataStack?e._x_dataStack:typeof ShadowRoot=="function"&&e instanceof ShadowRoot?lt(e.host):e.parentNode?lt(e.parentNode):[]}function Ut(e){return new Proxy({objects:e},Ul)}var Ul={ownKeys({objects:e}){return Array.from(new Set(e.flatMap(t=>Object.keys(t))))},has({objects:e},t){return t==Symbol.unscopables?!1:e.some(r=>Object.prototype.hasOwnProperty.call(r,t)||Reflect.has(r,t))},get({objects:e},t,r){return t=="toJSON"?Hl:Reflect.get(e.find(n=>Reflect.has(n,t))||{},t,r)},set({objects:e},t,r,n){const s=e.find(o=>Object.prototype.hasOwnProperty.call(o,t))||e[e.length-1],i=Object.getOwnPropertyDescriptor(s,t);return i?.set&&i?.get?i.set.call(n,r)||!0:Reflect.set(s,t,r)}};function Hl(){return Reflect.ownKeys(this).reduce((t,r)=>(t[r]=Reflect.get(this,r),t),{})}function Li(e){let t=n=>typeof n=="object"&&!Array.isArray(n)&&n!==null,r=(n,s="")=>{Object.entries(Object.getOwnPropertyDescriptors(n)).forEach(([i,{value:o,enumerable:a}])=>{if(a===!1||o===void 0||typeof o=="object"&&o!==null&&o.__v_skip)return;let l=s===""?i:`${s}.${i}`;typeof o=="object"&&o!==null&&o._x_interceptor?n[i]=o.initialize(e,l,i):t(o)&&o!==n&&!(o instanceof Element)&&r(o,l)})};return r(e)}function Ii(e,t=()=>{}){let r={initialValue:void 0,_x_interceptor:!0,initialize(n,s,i){return e(this.initialValue,()=>ql(n,s),o=>gn(n,s,o),s,i)}};return t(r),n=>{if(typeof n=="object"&&n!==null&&n._x_interceptor){let s=r.initialize.bind(r);r.initialize=(i,o,a)=>{let l=n.initialize(i,o,a);return r.initialValue=l,s(i,o,a)}}else r.initialValue=n;return r}}function ql(e,t){return t.split(".").reduce((r,n)=>r[n],e)}function gn(e,t,r){if(typeof t=="string"&&(t=t.split(".")),t.length===1)e[t[0]]=r;else{if(t.length===0)throw error;return e[t[0]]||(e[t[0]]={}),gn(e[t[0]],t.slice(1),r)}}var Mi={};function me(e,t){Mi[e]=t}function mn(e,t){let r=Bl(t);return Object.entries(Mi).forEach(([n,s])=>{Object.defineProperty(e,`$${n}`,{get(){return s(t,r)},enumerable:!1})}),e}function Bl(e){let[t,r]=Hi(e),n={interceptor:Ii,...t};return Mn(e,r),n}function Wl(e,t,r,...n){try{return r(...n)}catch(s){It(s,e,t)}}function It(e,t,r=void 0){e=Object.assign(e??{message:"No error message given."},{el:t,expression:r}),console.warn(`Alpine Expression Error: ${e.message}

${r?'Expression: "'+r+`"

`:""}`,t),setTimeout(()=>{throw e},0)}var ur=!0;function $i(e){let t=ur;ur=!1;let r=e();return ur=t,r}function Ke(e,t,r={}){let n;return Q(e,t)(s=>n=s,r),n}function Q(...e){return Ni(...e)}var Ni=Fi;function Xl(e){Ni=e}function Fi(e,t){let r={};mn(r,e);let n=[r,...lt(e)],s=typeof t=="function"?zl(n,t):Kl(n,t,e);return Wl.bind(null,e,t,s)}function zl(e,t){return(r=()=>{},{scope:n={},params:s=[],context:i}={})=>{let o=t.apply(Ut([n,...e]),s);vr(r,o)}}var Xr={};function Yl(e,t){if(Xr[e])return Xr[e];let r=Object.getPrototypeOf(async function(){}).constructor,n=/^[\n\s]*if.*\(.*\)/.test(e.trim())||/^(let|const)\s/.test(e.trim())?`(async()=>{ ${e} })()`:e,i=(()=>{try{let o=new r(["__self","scope"],`with (scope) { __self.result = ${n} }; __self.finished = true; return __self.result;`);return Object.defineProperty(o,"name",{value:`[Alpine] ${e}`}),o}catch(o){return It(o,t,e),Promise.resolve()}})();return Xr[e]=i,i}function Kl(e,t,r){let n=Yl(t,r);return(s=()=>{},{scope:i={},params:o=[],context:a}={})=>{n.result=void 0,n.finished=!1;let l=Ut([i,...e]);if(typeof n=="function"){let c=n.call(a,n,l).catch(u=>It(u,r,t));n.finished?(vr(s,n.result,l,o,r),n.result=void 0):c.then(u=>{vr(s,u,l,o,r)}).catch(u=>It(u,r,t)).finally(()=>n.result=void 0)}}}function vr(e,t,r,n,s){if(ur&&typeof t=="function"){let i=t.apply(r,n);i instanceof Promise?i.then(o=>vr(e,o,r,n)).catch(o=>It(o,s,t)):e(i)}else typeof t=="object"&&t instanceof Promise?t.then(i=>e(i)):e(t)}var Hn="x-";function gt(e=""){return Hn+e}function Vl(e){Hn=e}var wr={};function W(e,t){return wr[e]=t,{before(r){if(!wr[r]){console.warn(String.raw`Cannot find directive \`${r}\`. \`${e}\` will use the default order of execution`);return}const n=Xe.indexOf(r);Xe.splice(n>=0?n:Xe.indexOf("DEFAULT"),0,e)}}}function Jl(e){return Object.keys(wr).includes(e)}function qn(e,t,r){if(t=Array.from(t),e._x_virtualDirectives){let i=Object.entries(e._x_virtualDirectives).map(([a,l])=>({name:a,value:l})),o=ji(i);i=i.map(a=>o.find(l=>l.name===a.name)?{name:`x-bind:${a.name}`,value:`"${a.value}"`}:a),t=t.concat(i)}let n={};return t.map(Wi((i,o)=>n[i]=o)).filter(zi).map(Zl(n,r)).sort(ec).map(i=>Ql(e,i))}function ji(e){return Array.from(e).map(Wi()).filter(t=>!zi(t))}var bn=!1,kt=new Map,Ui=Symbol();function Gl(e){bn=!0;let t=Symbol();Ui=t,kt.set(t,[]);let r=()=>{for(;kt.get(t).length;)kt.get(t).shift()();kt.delete(t)},n=()=>{bn=!1,r()};e(r),n()}function Hi(e){let t=[],r=a=>t.push(a),[n,s]=Il(e);return t.push(s),[{Alpine:Ht,effect:n,cleanup:r,evaluateLater:Q.bind(Q,e),evaluate:Ke.bind(Ke,e)},()=>t.forEach(a=>a())]}function Ql(e,t){let r=()=>{},n=wr[t.type]||r,[s,i]=Hi(e);Oi(e,t.original,i);let o=()=>{e._x_ignore||e._x_ignoreSelf||(n.inline&&n.inline(e,t,s),n=n.bind(n,e,t,s),bn?kt.get(Ui).push(n):n())};return o.runCleanups=i,o}var qi=(e,t)=>({name:r,value:n})=>(r.startsWith(e)&&(r=r.replace(e,t)),{name:r,value:n}),Bi=e=>e;function Wi(e=()=>{}){return({name:t,value:r})=>{let{name:n,value:s}=Xi.reduce((i,o)=>o(i),{name:t,value:r});return n!==t&&e(n,t),{name:n,value:s}}}var Xi=[];function Bn(e){Xi.push(e)}function zi({name:e}){return Yi().test(e)}var Yi=()=>new RegExp(`^${Hn}([^:^.]+)\\b`);function Zl(e,t){return({name:r,value:n})=>{let s=r.match(Yi()),i=r.match(/:([a-zA-Z0-9\-_:]+)/),o=r.match(/\.[^.\]]+(?=[^\]]*$)/g)||[],a=t||e[r]||r;return{type:s?s[1]:null,value:i?i[1]:null,modifiers:o.map(l=>l.replace(".","")),expression:n,original:a}}}var yn="DEFAULT",Xe=["ignore","ref","data","id","anchor","bind","init","for","model","modelable","transition","show","if",yn,"teleport"];function ec(e,t){let r=Xe.indexOf(e.type)===-1?yn:e.type,n=Xe.indexOf(t.type)===-1?yn:t.type;return Xe.indexOf(r)-Xe.indexOf(n)}function At(e,t,r={}){e.dispatchEvent(new CustomEvent(t,{detail:r,bubbles:!0,composed:!0,cancelable:!0}))}function Qe(e,t){if(typeof ShadowRoot=="function"&&e instanceof ShadowRoot){Array.from(e.children).forEach(s=>Qe(s,t));return}let r=!1;if(t(e,()=>r=!0),r)return;let n=e.firstElementChild;for(;n;)Qe(n,t),n=n.nextElementSibling}function le(e,...t){console.warn(`Alpine Warning: ${e}`,...t)}var Ts=!1;function tc(){Ts&&le("Alpine has already been initialized on this page. Calling Alpine.start() more than once can cause problems."),Ts=!0,document.body||le("Unable to initialize. Trying to load Alpine before `<body>` is available. Did you forget to add `defer` in Alpine's `<script>` tag?"),At(document,"alpine:init"),At(document,"alpine:initializing"),Fn(),Ml(t=>Se(t,Qe)),Mn(t=>bt(t)),Ci((t,r)=>{qn(t,r).forEach(n=>n())});let e=t=>!Lr(t.parentElement,!0);Array.from(document.querySelectorAll(Ji().join(","))).filter(e).forEach(t=>{Se(t)}),At(document,"alpine:initialized"),setTimeout(()=>{ic()})}var Wn=[],Ki=[];function Vi(){return Wn.map(e=>e())}function Ji(){return Wn.concat(Ki).map(e=>e())}function Gi(e){Wn.push(e)}function Qi(e){Ki.push(e)}function Lr(e,t=!1){return mt(e,r=>{if((t?Ji():Vi()).some(s=>r.matches(s)))return!0})}function mt(e,t){if(e){if(t(e))return e;if(e._x_teleportBack&&(e=e._x_teleportBack),!!e.parentElement)return mt(e.parentElement,t)}}function rc(e){return Vi().some(t=>e.matches(t))}var Zi=[];function nc(e){Zi.push(e)}var sc=1;function Se(e,t=Qe,r=()=>{}){mt(e,n=>n._x_ignore)||Gl(()=>{t(e,(n,s)=>{n._x_marker||(r(n,s),Zi.forEach(i=>i(n,s)),qn(n,n.attributes).forEach(i=>i()),n._x_ignore||(n._x_marker=sc++),n._x_ignore&&s())})})}function bt(e,t=Qe){t(e,r=>{$l(r),Ri(r),delete r._x_marker})}function ic(){[["ui","dialog",["[x-dialog], [x-popover]"]],["anchor","anchor",["[x-anchor]"]],["sort","sort",["[x-sort]"]]].forEach(([t,r,n])=>{Jl(r)||n.some(s=>{if(document.querySelector(s))return le(`found "${s}", but missing ${t} plugin`),!0})})}var vn=[],Xn=!1;function zn(e=()=>{}){return queueMicrotask(()=>{Xn||setTimeout(()=>{wn()})}),new Promise(t=>{vn.push(()=>{e(),t()})})}function wn(){for(Xn=!1;vn.length;)vn.shift()()}function oc(){Xn=!0}function Yn(e,t){return Array.isArray(t)?As(e,t.join(" ")):typeof t=="object"&&t!==null?ac(e,t):typeof t=="function"?Yn(e,t()):As(e,t)}function As(e,t){let r=s=>s.split(" ").filter(i=>!e.classList.contains(i)).filter(Boolean),n=s=>(e.classList.add(...s),()=>{e.classList.remove(...s)});return t=t===!0?t="":t||"",n(r(t))}function ac(e,t){let r=a=>a.split(" ").filter(Boolean),n=Object.entries(t).flatMap(([a,l])=>l?r(a):!1).filter(Boolean),s=Object.entries(t).flatMap(([a,l])=>l?!1:r(a)).filter(Boolean),i=[],o=[];return s.forEach(a=>{e.classList.contains(a)&&(e.classList.remove(a),o.push(a))}),n.forEach(a=>{e.classList.contains(a)||(e.classList.add(a),i.push(a))}),()=>{o.forEach(a=>e.classList.add(a)),i.forEach(a=>e.classList.remove(a))}}function Ir(e,t){return typeof t=="object"&&t!==null?lc(e,t):cc(e,t)}function lc(e,t){let r={};return Object.entries(t).forEach(([n,s])=>{r[n]=e.style[n],n.startsWith("--")||(n=uc(n)),e.style.setProperty(n,s)}),setTimeout(()=>{e.style.length===0&&e.removeAttribute("style")}),()=>{Ir(e,r)}}function cc(e,t){let r=e.getAttribute("style",t);return e.setAttribute("style",t),()=>{e.setAttribute("style",r||"")}}function uc(e){return e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function _n(e,t=()=>{}){let r=!1;return function(){r?t.apply(this,arguments):(r=!0,e.apply(this,arguments))}}W("transition",(e,{value:t,modifiers:r,expression:n},{evaluate:s})=>{typeof n=="function"&&(n=s(n)),n!==!1&&(!n||typeof n=="boolean"?fc(e,r,t):dc(e,n,t))});function dc(e,t,r){eo(e,Yn,""),{enter:s=>{e._x_transition.enter.during=s},"enter-start":s=>{e._x_transition.enter.start=s},"enter-end":s=>{e._x_transition.enter.end=s},leave:s=>{e._x_transition.leave.during=s},"leave-start":s=>{e._x_transition.leave.start=s},"leave-end":s=>{e._x_transition.leave.end=s}}[r](t)}function fc(e,t,r){eo(e,Ir);let n=!t.includes("in")&&!t.includes("out")&&!r,s=n||t.includes("in")||["enter"].includes(r),i=n||t.includes("out")||["leave"].includes(r);t.includes("in")&&!n&&(t=t.filter((w,v)=>v<t.indexOf("out"))),t.includes("out")&&!n&&(t=t.filter((w,v)=>v>t.indexOf("out")));let o=!t.includes("opacity")&&!t.includes("scale"),a=o||t.includes("opacity"),l=o||t.includes("scale"),c=a?0:1,u=l?_t(t,"scale",95)/100:1,d=_t(t,"delay",0)/1e3,f=_t(t,"origin","center"),m="opacity, transform",h=_t(t,"duration",150)/1e3,b=_t(t,"duration",75)/1e3,g="cubic-bezier(0.4, 0.0, 0.2, 1)";s&&(e._x_transition.enter.during={transformOrigin:f,transitionDelay:`${d}s`,transitionProperty:m,transitionDuration:`${h}s`,transitionTimingFunction:g},e._x_transition.enter.start={opacity:c,transform:`scale(${u})`},e._x_transition.enter.end={opacity:1,transform:"scale(1)"}),i&&(e._x_transition.leave.during={transformOrigin:f,transitionDelay:`${d}s`,transitionProperty:m,transitionDuration:`${b}s`,transitionTimingFunction:g},e._x_transition.leave.start={opacity:1,transform:"scale(1)"},e._x_transition.leave.end={opacity:c,transform:`scale(${u})`})}function eo(e,t,r={}){e._x_transition||(e._x_transition={enter:{during:r,start:r,end:r},leave:{during:r,start:r,end:r},in(n=()=>{},s=()=>{}){xn(e,t,{during:this.enter.during,start:this.enter.start,end:this.enter.end},n,s)},out(n=()=>{},s=()=>{}){xn(e,t,{during:this.leave.during,start:this.leave.start,end:this.leave.end},n,s)}})}window.Element.prototype._x_toggleAndCascadeWithTransitions=function(e,t,r,n){const s=document.visibilityState==="visible"?requestAnimationFrame:setTimeout;let i=()=>s(r);if(t){e._x_transition&&(e._x_transition.enter||e._x_transition.leave)?e._x_transition.enter&&(Object.entries(e._x_transition.enter.during).length||Object.entries(e._x_transition.enter.start).length||Object.entries(e._x_transition.enter.end).length)?e._x_transition.in(r):i():e._x_transition?e._x_transition.in(r):i();return}e._x_hidePromise=e._x_transition?new Promise((o,a)=>{e._x_transition.out(()=>{},()=>o(n)),e._x_transitioning&&e._x_transitioning.beforeCancel(()=>a({isFromCancelledTransition:!0}))}):Promise.resolve(n),queueMicrotask(()=>{let o=to(e);o?(o._x_hideChildren||(o._x_hideChildren=[]),o._x_hideChildren.push(e)):s(()=>{let a=l=>{let c=Promise.all([l._x_hidePromise,...(l._x_hideChildren||[]).map(a)]).then(([u])=>u?.());return delete l._x_hidePromise,delete l._x_hideChildren,c};a(e).catch(l=>{if(!l.isFromCancelledTransition)throw l})})})};function to(e){let t=e.parentNode;if(t)return t._x_hidePromise?t:to(t)}function xn(e,t,{during:r,start:n,end:s}={},i=()=>{},o=()=>{}){if(e._x_transitioning&&e._x_transitioning.cancel(),Object.keys(r).length===0&&Object.keys(n).length===0&&Object.keys(s).length===0){i(),o();return}let a,l,c;hc(e,{start(){a=t(e,n)},during(){l=t(e,r)},before:i,end(){a(),c=t(e,s)},after:o,cleanup(){l(),c()}})}function hc(e,t){let r,n,s,i=_n(()=>{F(()=>{r=!0,n||t.before(),s||(t.end(),wn()),t.after(),e.isConnected&&t.cleanup(),delete e._x_transitioning})});e._x_transitioning={beforeCancels:[],beforeCancel(o){this.beforeCancels.push(o)},cancel:_n(function(){for(;this.beforeCancels.length;)this.beforeCancels.shift()();i()}),finish:i},F(()=>{t.start(),t.during()}),oc(),requestAnimationFrame(()=>{if(r)return;let o=Number(getComputedStyle(e).transitionDuration.replace(/,.*/,"").replace("s",""))*1e3,a=Number(getComputedStyle(e).transitionDelay.replace(/,.*/,"").replace("s",""))*1e3;o===0&&(o=Number(getComputedStyle(e).animationDuration.replace("s",""))*1e3),F(()=>{t.before()}),n=!0,requestAnimationFrame(()=>{r||(F(()=>{t.end()}),wn(),setTimeout(e._x_transitioning.finish,o+a),s=!0)})})}function _t(e,t,r){if(e.indexOf(t)===-1)return r;const n=e[e.indexOf(t)+1];if(!n||t==="scale"&&isNaN(n))return r;if(t==="duration"||t==="delay"){let s=n.match(/([0-9]+)ms/);if(s)return s[1]}return t==="origin"&&["top","right","left","center","bottom"].includes(e[e.indexOf(t)+2])?[n,e[e.indexOf(t)+2]].join(" "):n}var $e=!1;function Fe(e,t=()=>{}){return(...r)=>$e?t(...r):e(...r)}function pc(e){return(...t)=>$e&&e(...t)}var ro=[];function Mr(e){ro.push(e)}function gc(e,t){ro.forEach(r=>r(e,t)),$e=!0,no(()=>{Se(t,(r,n)=>{n(r,()=>{})})}),$e=!1}var kn=!1;function mc(e,t){t._x_dataStack||(t._x_dataStack=e._x_dataStack),$e=!0,kn=!0,no(()=>{bc(t)}),$e=!1,kn=!1}function bc(e){let t=!1;Se(e,(n,s)=>{Qe(n,(i,o)=>{if(t&&rc(i))return o();t=!0,s(i,o)})})}function no(e){let t=Ze;Ss((r,n)=>{let s=t(r);return pt(s),()=>{}}),e(),Ss(t)}function so(e,t,r,n=[]){switch(e._x_bindings||(e._x_bindings=ht({})),e._x_bindings[t]=r,t=n.includes("camel")?Sc(t):t,t){case"value":yc(e,r);break;case"style":wc(e,r);break;case"class":vc(e,r);break;case"selected":case"checked":_c(e,t,r);break;default:io(e,t,r);break}}function yc(e,t){if(lo(e))e.attributes.value===void 0&&(e.value=t),window.fromModel&&(typeof t=="boolean"?e.checked=dr(e.value)===t:e.checked=Cs(e.value,t));else if(Kn(e))Number.isInteger(t)?e.value=t:!Array.isArray(t)&&typeof t!="boolean"&&![null,void 0].includes(t)?e.value=String(t):Array.isArray(t)?e.checked=t.some(r=>Cs(r,e.value)):e.checked=!!t;else if(e.tagName==="SELECT")Ec(e,t);else{if(e.value===t)return;e.value=t===void 0?"":t}}function vc(e,t){e._x_undoAddedClasses&&e._x_undoAddedClasses(),e._x_undoAddedClasses=Yn(e,t)}function wc(e,t){e._x_undoAddedStyles&&e._x_undoAddedStyles(),e._x_undoAddedStyles=Ir(e,t)}function _c(e,t,r){io(e,t,r),kc(e,t,r)}function io(e,t,r){[null,void 0,!1].includes(r)&&Ac(t)?e.removeAttribute(t):(oo(t)&&(r=t),xc(e,t,r))}function xc(e,t,r){e.getAttribute(t)!=r&&e.setAttribute(t,r)}function kc(e,t,r){e[t]!==r&&(e[t]=r)}function Ec(e,t){const r=[].concat(t).map(n=>n+"");Array.from(e.options).forEach(n=>{n.selected=r.includes(n.value)})}function Sc(e){return e.toLowerCase().replace(/-(\w)/g,(t,r)=>r.toUpperCase())}function Cs(e,t){return e==t}function dr(e){return[1,"1","true","on","yes",!0].includes(e)?!0:[0,"0","false","off","no",!1].includes(e)?!1:e?!!e:null}var Tc=new Set(["allowfullscreen","async","autofocus","autoplay","checked","controls","default","defer","disabled","formnovalidate","inert","ismap","itemscope","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","selected","shadowrootclonable","shadowrootdelegatesfocus","shadowrootserializable"]);function oo(e){return Tc.has(e)}function Ac(e){return!["aria-pressed","aria-checked","aria-expanded","aria-selected"].includes(e)}function Cc(e,t,r){return e._x_bindings&&e._x_bindings[t]!==void 0?e._x_bindings[t]:ao(e,t,r)}function Oc(e,t,r,n=!0){if(e._x_bindings&&e._x_bindings[t]!==void 0)return e._x_bindings[t];if(e._x_inlineBindings&&e._x_inlineBindings[t]!==void 0){let s=e._x_inlineBindings[t];return s.extract=n,$i(()=>Ke(e,s.expression))}return ao(e,t,r)}function ao(e,t,r){let n=e.getAttribute(t);return n===null?typeof r=="function"?r():r:n===""?!0:oo(t)?!![t,"true"].includes(n):n}function Kn(e){return e.type==="checkbox"||e.localName==="ui-checkbox"||e.localName==="ui-switch"}function lo(e){return e.type==="radio"||e.localName==="ui-radio"}function co(e,t){let r;return function(){const n=this,s=arguments,i=function(){r=null,e.apply(n,s)};clearTimeout(r),r=setTimeout(i,t)}}function uo(e,t){let r;return function(){let n=this,s=arguments;r||(e.apply(n,s),r=!0,setTimeout(()=>r=!1,t))}}function fo({get:e,set:t},{get:r,set:n}){let s=!0,i,o=Ze(()=>{let a=e(),l=r();if(s)n(zr(a)),s=!1;else{let c=JSON.stringify(a),u=JSON.stringify(l);c!==i?n(zr(a)):c!==u&&t(zr(l))}i=JSON.stringify(e()),JSON.stringify(r())});return()=>{pt(o)}}function zr(e){return typeof e=="object"?JSON.parse(JSON.stringify(e)):e}function Rc(e){(Array.isArray(e)?e:[e]).forEach(r=>r(Ht))}var qe={},Os=!1;function Dc(e,t){if(Os||(qe=ht(qe),Os=!0),t===void 0)return qe[e];qe[e]=t,Li(qe[e]),typeof t=="object"&&t!==null&&t.hasOwnProperty("init")&&typeof t.init=="function"&&qe[e].init()}function Pc(){return qe}var ho={};function Lc(e,t){let r=typeof t!="function"?()=>t:t;return e instanceof Element?po(e,r()):(ho[e]=r,()=>{})}function Ic(e){return Object.entries(ho).forEach(([t,r])=>{Object.defineProperty(e,t,{get(){return(...n)=>r(...n)}})}),e}function po(e,t,r){let n=[];for(;n.length;)n.pop()();let s=Object.entries(t).map(([o,a])=>({name:o,value:a})),i=ji(s);return s=s.map(o=>i.find(a=>a.name===o.name)?{name:`x-bind:${o.name}`,value:`"${o.value}"`}:o),qn(e,s,r).map(o=>{n.push(o.runCleanups),o()}),()=>{for(;n.length;)n.pop()()}}var go={};function Mc(e,t){go[e]=t}function $c(e,t){return Object.entries(go).forEach(([r,n])=>{Object.defineProperty(e,r,{get(){return(...s)=>n.bind(t)(...s)},enumerable:!1})}),e}var Nc={get reactive(){return ht},get release(){return pt},get effect(){return Ze},get raw(){return ki},version:"3.15.0",flushAndStopDeferringMutations:jl,dontAutoEvaluateFunctions:$i,disableEffectScheduling:Pl,startObservingMutations:Fn,stopObservingMutations:Di,setReactivityEngine:Ll,onAttributeRemoved:Oi,onAttributesAdded:Ci,closestDataStack:lt,skipDuringClone:Fe,onlyDuringClone:pc,addRootSelector:Gi,addInitSelector:Qi,interceptClone:Mr,addScopeToNode:jt,deferMutations:Fl,mapAttributes:Bn,evaluateLater:Q,interceptInit:nc,setEvaluator:Xl,mergeProxies:Ut,extractProp:Oc,findClosest:mt,onElRemoved:Mn,closestRoot:Lr,destroyTree:bt,interceptor:Ii,transition:xn,setStyles:Ir,mutateDom:F,directive:W,entangle:fo,throttle:uo,debounce:co,evaluate:Ke,initTree:Se,nextTick:zn,prefixed:gt,prefix:Vl,plugin:Rc,magic:me,store:Dc,start:tc,clone:mc,cloneNode:gc,bound:Cc,$data:Pi,watch:Ei,walk:Qe,data:Mc,bind:Lc},Ht=Nc;function Fc(e,t){const r=Object.create(null),n=e.split(",");for(let s=0;s<n.length;s++)r[n[s]]=!0;return s=>!!r[s]}var jc=Object.freeze({}),Uc=Object.prototype.hasOwnProperty,$r=(e,t)=>Uc.call(e,t),Ve=Array.isArray,Ct=e=>mo(e)==="[object Map]",Hc=e=>typeof e=="string",Vn=e=>typeof e=="symbol",Nr=e=>e!==null&&typeof e=="object",qc=Object.prototype.toString,mo=e=>qc.call(e),bo=e=>mo(e).slice(8,-1),Jn=e=>Hc(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,Bc=e=>{const t=Object.create(null);return r=>t[r]||(t[r]=e(r))},Wc=Bc(e=>e.charAt(0).toUpperCase()+e.slice(1)),yo=(e,t)=>e!==t&&(e===e||t===t),En=new WeakMap,xt=[],we,Je=Symbol("iterate"),Sn=Symbol("Map key iterate");function Xc(e){return e&&e._isEffect===!0}function zc(e,t=jc){Xc(e)&&(e=e.raw);const r=Vc(e,t);return t.lazy||r(),r}function Yc(e){e.active&&(vo(e),e.options.onStop&&e.options.onStop(),e.active=!1)}var Kc=0;function Vc(e,t){const r=function(){if(!r.active)return e();if(!xt.includes(r)){vo(r);try{return Gc(),xt.push(r),we=r,e()}finally{xt.pop(),wo(),we=xt[xt.length-1]}}};return r.id=Kc++,r.allowRecurse=!!t.allowRecurse,r._isEffect=!0,r.active=!0,r.raw=e,r.deps=[],r.options=t,r}function vo(e){const{deps:t}=e;if(t.length){for(let r=0;r<t.length;r++)t[r].delete(e);t.length=0}}var ct=!0,Gn=[];function Jc(){Gn.push(ct),ct=!1}function Gc(){Gn.push(ct),ct=!0}function wo(){const e=Gn.pop();ct=e===void 0?!0:e}function pe(e,t,r){if(!ct||we===void 0)return;let n=En.get(e);n||En.set(e,n=new Map);let s=n.get(r);s||n.set(r,s=new Set),s.has(we)||(s.add(we),we.deps.push(s),we.options.onTrack&&we.options.onTrack({effect:we,target:e,type:t,key:r}))}function Ne(e,t,r,n,s,i){const o=En.get(e);if(!o)return;const a=new Set,l=u=>{u&&u.forEach(d=>{(d!==we||d.allowRecurse)&&a.add(d)})};if(t==="clear")o.forEach(l);else if(r==="length"&&Ve(e))o.forEach((u,d)=>{(d==="length"||d>=n)&&l(u)});else switch(r!==void 0&&l(o.get(r)),t){case"add":Ve(e)?Jn(r)&&l(o.get("length")):(l(o.get(Je)),Ct(e)&&l(o.get(Sn)));break;case"delete":Ve(e)||(l(o.get(Je)),Ct(e)&&l(o.get(Sn)));break;case"set":Ct(e)&&l(o.get(Je));break}const c=u=>{u.options.onTrigger&&u.options.onTrigger({effect:u,target:e,key:r,type:t,newValue:n,oldValue:s,oldTarget:i}),u.options.scheduler?u.options.scheduler(u):u()};a.forEach(c)}var Qc=Fc("__proto__,__v_isRef,__isVue"),_o=new Set(Object.getOwnPropertyNames(Symbol).map(e=>Symbol[e]).filter(Vn)),Zc=xo(),eu=xo(!0),Rs=tu();function tu(){const e={};return["includes","indexOf","lastIndexOf"].forEach(t=>{e[t]=function(...r){const n=D(this);for(let i=0,o=this.length;i<o;i++)pe(n,"get",i+"");const s=n[t](...r);return s===-1||s===!1?n[t](...r.map(D)):s}}),["push","pop","shift","unshift","splice"].forEach(t=>{e[t]=function(...r){Jc();const n=D(this)[t].apply(this,r);return wo(),n}}),e}function xo(e=!1,t=!1){return function(n,s,i){if(s==="__v_isReactive")return!e;if(s==="__v_isReadonly")return e;if(s==="__v_raw"&&i===(e?t?gu:To:t?pu:So).get(n))return n;const o=Ve(n);if(!e&&o&&$r(Rs,s))return Reflect.get(Rs,s,i);const a=Reflect.get(n,s,i);return(Vn(s)?_o.has(s):Qc(s))||(e||pe(n,"get",s),t)?a:Tn(a)?!o||!Jn(s)?a.value:a:Nr(a)?e?Ao(a):ts(a):a}}var ru=nu();function nu(e=!1){return function(r,n,s,i){let o=r[n];if(!e&&(s=D(s),o=D(o),!Ve(r)&&Tn(o)&&!Tn(s)))return o.value=s,!0;const a=Ve(r)&&Jn(n)?Number(n)<r.length:$r(r,n),l=Reflect.set(r,n,s,i);return r===D(i)&&(a?yo(s,o)&&Ne(r,"set",n,s,o):Ne(r,"add",n,s)),l}}function su(e,t){const r=$r(e,t),n=e[t],s=Reflect.deleteProperty(e,t);return s&&r&&Ne(e,"delete",t,void 0,n),s}function iu(e,t){const r=Reflect.has(e,t);return(!Vn(t)||!_o.has(t))&&pe(e,"has",t),r}function ou(e){return pe(e,"iterate",Ve(e)?"length":Je),Reflect.ownKeys(e)}var au={get:Zc,set:ru,deleteProperty:su,has:iu,ownKeys:ou},lu={get:eu,set(e,t){return console.warn(`Set operation on key "${String(t)}" failed: target is readonly.`,e),!0},deleteProperty(e,t){return console.warn(`Delete operation on key "${String(t)}" failed: target is readonly.`,e),!0}},Qn=e=>Nr(e)?ts(e):e,Zn=e=>Nr(e)?Ao(e):e,es=e=>e,Fr=e=>Reflect.getPrototypeOf(e);function Vt(e,t,r=!1,n=!1){e=e.__v_raw;const s=D(e),i=D(t);t!==i&&!r&&pe(s,"get",t),!r&&pe(s,"get",i);const{has:o}=Fr(s),a=n?es:r?Zn:Qn;if(o.call(s,t))return a(e.get(t));if(o.call(s,i))return a(e.get(i));e!==s&&e.get(t)}function Jt(e,t=!1){const r=this.__v_raw,n=D(r),s=D(e);return e!==s&&!t&&pe(n,"has",e),!t&&pe(n,"has",s),e===s?r.has(e):r.has(e)||r.has(s)}function Gt(e,t=!1){return e=e.__v_raw,!t&&pe(D(e),"iterate",Je),Reflect.get(e,"size",e)}function Ds(e){e=D(e);const t=D(this);return Fr(t).has.call(t,e)||(t.add(e),Ne(t,"add",e,e)),this}function Ps(e,t){t=D(t);const r=D(this),{has:n,get:s}=Fr(r);let i=n.call(r,e);i?Eo(r,n,e):(e=D(e),i=n.call(r,e));const o=s.call(r,e);return r.set(e,t),i?yo(t,o)&&Ne(r,"set",e,t,o):Ne(r,"add",e,t),this}function Ls(e){const t=D(this),{has:r,get:n}=Fr(t);let s=r.call(t,e);s?Eo(t,r,e):(e=D(e),s=r.call(t,e));const i=n?n.call(t,e):void 0,o=t.delete(e);return s&&Ne(t,"delete",e,void 0,i),o}function Is(){const e=D(this),t=e.size!==0,r=Ct(e)?new Map(e):new Set(e),n=e.clear();return t&&Ne(e,"clear",void 0,void 0,r),n}function Qt(e,t){return function(n,s){const i=this,o=i.__v_raw,a=D(o),l=t?es:e?Zn:Qn;return!e&&pe(a,"iterate",Je),o.forEach((c,u)=>n.call(s,l(c),l(u),i))}}function Zt(e,t,r){return function(...n){const s=this.__v_raw,i=D(s),o=Ct(i),a=e==="entries"||e===Symbol.iterator&&o,l=e==="keys"&&o,c=s[e](...n),u=r?es:t?Zn:Qn;return!t&&pe(i,"iterate",l?Sn:Je),{next(){const{value:d,done:f}=c.next();return f?{value:d,done:f}:{value:a?[u(d[0]),u(d[1])]:u(d),done:f}},[Symbol.iterator](){return this}}}}function De(e){return function(...t){{const r=t[0]?`on key "${t[0]}" `:"";console.warn(`${Wc(e)} operation ${r}failed: target is readonly.`,D(this))}return e==="delete"?!1:this}}function cu(){const e={get(i){return Vt(this,i)},get size(){return Gt(this)},has:Jt,add:Ds,set:Ps,delete:Ls,clear:Is,forEach:Qt(!1,!1)},t={get(i){return Vt(this,i,!1,!0)},get size(){return Gt(this)},has:Jt,add:Ds,set:Ps,delete:Ls,clear:Is,forEach:Qt(!1,!0)},r={get(i){return Vt(this,i,!0)},get size(){return Gt(this,!0)},has(i){return Jt.call(this,i,!0)},add:De("add"),set:De("set"),delete:De("delete"),clear:De("clear"),forEach:Qt(!0,!1)},n={get(i){return Vt(this,i,!0,!0)},get size(){return Gt(this,!0)},has(i){return Jt.call(this,i,!0)},add:De("add"),set:De("set"),delete:De("delete"),clear:De("clear"),forEach:Qt(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(i=>{e[i]=Zt(i,!1,!1),r[i]=Zt(i,!0,!1),t[i]=Zt(i,!1,!0),n[i]=Zt(i,!0,!0)}),[e,r,t,n]}var[uu,du]=cu();function ko(e,t){const r=e?du:uu;return(n,s,i)=>s==="__v_isReactive"?!e:s==="__v_isReadonly"?e:s==="__v_raw"?n:Reflect.get($r(r,s)&&s in n?r:n,s,i)}var fu={get:ko(!1)},hu={get:ko(!0)};function Eo(e,t,r){const n=D(r);if(n!==r&&t.call(e,n)){const s=bo(e);console.warn(`Reactive ${s} contains both the raw and reactive versions of the same object${s==="Map"?" as keys":""}, which can lead to inconsistencies. Avoid differentiating between the raw and reactive versions of an object and only use the reactive version if possible.`)}}var So=new WeakMap,pu=new WeakMap,To=new WeakMap,gu=new WeakMap;function mu(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function bu(e){return e.__v_skip||!Object.isExtensible(e)?0:mu(bo(e))}function ts(e){return e&&e.__v_isReadonly?e:Co(e,!1,au,fu,So)}function Ao(e){return Co(e,!0,lu,hu,To)}function Co(e,t,r,n,s){if(!Nr(e))return console.warn(`value cannot be made reactive: ${String(e)}`),e;if(e.__v_raw&&!(t&&e.__v_isReactive))return e;const i=s.get(e);if(i)return i;const o=bu(e);if(o===0)return e;const a=new Proxy(e,o===2?n:r);return s.set(e,a),a}function D(e){return e&&D(e.__v_raw)||e}function Tn(e){return!!(e&&e.__v_isRef===!0)}me("nextTick",()=>zn);me("dispatch",e=>At.bind(At,e));me("watch",(e,{evaluateLater:t,cleanup:r})=>(n,s)=>{let i=t(n),a=Ei(()=>{let l;return i(c=>l=c),l},s);r(a)});me("store",Pc);me("data",e=>Pi(e));me("root",e=>Lr(e));me("refs",e=>(e._x_refs_proxy||(e._x_refs_proxy=Ut(yu(e))),e._x_refs_proxy));function yu(e){let t=[];return mt(e,r=>{r._x_refs&&t.push(r._x_refs)}),t}var Yr={};function Oo(e){return Yr[e]||(Yr[e]=0),++Yr[e]}function vu(e,t){return mt(e,r=>{if(r._x_ids&&r._x_ids[t])return!0})}function wu(e,t){e._x_ids||(e._x_ids={}),e._x_ids[t]||(e._x_ids[t]=Oo(t))}me("id",(e,{cleanup:t})=>(r,n=null)=>{let s=`${r}${n?`-${n}`:""}`;return _u(e,s,t,()=>{let i=vu(e,r),o=i?i._x_ids[r]:Oo(r);return n?`${r}-${o}-${n}`:`${r}-${o}`})});Mr((e,t)=>{e._x_id&&(t._x_id=e._x_id)});function _u(e,t,r,n){if(e._x_id||(e._x_id={}),e._x_id[t])return e._x_id[t];let s=n();return e._x_id[t]=s,r(()=>{delete e._x_id[t]}),s}me("el",e=>e);Ro("Focus","focus","focus");Ro("Persist","persist","persist");function Ro(e,t,r){me(t,n=>le(`You can't use [$${t}] without first installing the "${e}" plugin here: https://alpinejs.dev/plugins/${r}`,n))}W("modelable",(e,{expression:t},{effect:r,evaluateLater:n,cleanup:s})=>{let i=n(t),o=()=>{let u;return i(d=>u=d),u},a=n(`${t} = __placeholder`),l=u=>a(()=>{},{scope:{__placeholder:u}}),c=o();l(c),queueMicrotask(()=>{if(!e._x_model)return;e._x_removeModelListeners.default();let u=e._x_model.get,d=e._x_model.set,f=fo({get(){return u()},set(m){d(m)}},{get(){return o()},set(m){l(m)}});s(f)})});W("teleport",(e,{modifiers:t,expression:r},{cleanup:n})=>{e.tagName.toLowerCase()!=="template"&&le("x-teleport can only be used on a <template> tag",e);let s=Ms(r),i=e.content.cloneNode(!0).firstElementChild;e._x_teleport=i,i._x_teleportBack=e,e.setAttribute("data-teleport-template",!0),i.setAttribute("data-teleport-target",!0),e._x_forwardEvents&&e._x_forwardEvents.forEach(a=>{i.addEventListener(a,l=>{l.stopPropagation(),e.dispatchEvent(new l.constructor(l.type,l))})}),jt(i,{},e);let o=(a,l,c)=>{c.includes("prepend")?l.parentNode.insertBefore(a,l):c.includes("append")?l.parentNode.insertBefore(a,l.nextSibling):l.appendChild(a)};F(()=>{o(i,s,t),Fe(()=>{Se(i)})()}),e._x_teleportPutBack=()=>{let a=Ms(r);F(()=>{o(e._x_teleport,a,t)})},n(()=>F(()=>{i.remove(),bt(i)}))});var xu=document.createElement("div");function Ms(e){let t=Fe(()=>document.querySelector(e),()=>xu)();return t||le(`Cannot find x-teleport element for selector: "${e}"`),t}var Do=()=>{};Do.inline=(e,{modifiers:t},{cleanup:r})=>{t.includes("self")?e._x_ignoreSelf=!0:e._x_ignore=!0,r(()=>{t.includes("self")?delete e._x_ignoreSelf:delete e._x_ignore})};W("ignore",Do);W("effect",Fe((e,{expression:t},{effect:r})=>{r(Q(e,t))}));function An(e,t,r,n){let s=e,i=l=>n(l),o={},a=(l,c)=>u=>c(l,u);if(r.includes("dot")&&(t=ku(t)),r.includes("camel")&&(t=Eu(t)),r.includes("passive")&&(o.passive=!0),r.includes("capture")&&(o.capture=!0),r.includes("window")&&(s=window),r.includes("document")&&(s=document),r.includes("debounce")){let l=r[r.indexOf("debounce")+1]||"invalid-wait",c=_r(l.split("ms")[0])?Number(l.split("ms")[0]):250;i=co(i,c)}if(r.includes("throttle")){let l=r[r.indexOf("throttle")+1]||"invalid-wait",c=_r(l.split("ms")[0])?Number(l.split("ms")[0]):250;i=uo(i,c)}return r.includes("prevent")&&(i=a(i,(l,c)=>{c.preventDefault(),l(c)})),r.includes("stop")&&(i=a(i,(l,c)=>{c.stopPropagation(),l(c)})),r.includes("once")&&(i=a(i,(l,c)=>{l(c),s.removeEventListener(t,i,o)})),(r.includes("away")||r.includes("outside"))&&(s=document,i=a(i,(l,c)=>{e.contains(c.target)||c.target.isConnected!==!1&&(e.offsetWidth<1&&e.offsetHeight<1||e._x_isShown!==!1&&l(c))})),r.includes("self")&&(i=a(i,(l,c)=>{c.target===e&&l(c)})),(Tu(t)||Po(t))&&(i=a(i,(l,c)=>{Au(c,r)||l(c)})),s.addEventListener(t,i,o),()=>{s.removeEventListener(t,i,o)}}function ku(e){return e.replace(/-/g,".")}function Eu(e){return e.toLowerCase().replace(/-(\w)/g,(t,r)=>r.toUpperCase())}function _r(e){return!Array.isArray(e)&&!isNaN(e)}function Su(e){return[" ","_"].includes(e)?e:e.replace(/([a-z])([A-Z])/g,"$1-$2").replace(/[_\s]/,"-").toLowerCase()}function Tu(e){return["keydown","keyup"].includes(e)}function Po(e){return["contextmenu","click","mouse"].some(t=>e.includes(t))}function Au(e,t){let r=t.filter(i=>!["window","document","prevent","stop","once","capture","self","away","outside","passive","preserve-scroll"].includes(i));if(r.includes("debounce")){let i=r.indexOf("debounce");r.splice(i,_r((r[i+1]||"invalid-wait").split("ms")[0])?2:1)}if(r.includes("throttle")){let i=r.indexOf("throttle");r.splice(i,_r((r[i+1]||"invalid-wait").split("ms")[0])?2:1)}if(r.length===0||r.length===1&&$s(e.key).includes(r[0]))return!1;const s=["ctrl","shift","alt","meta","cmd","super"].filter(i=>r.includes(i));return r=r.filter(i=>!s.includes(i)),!(s.length>0&&s.filter(o=>((o==="cmd"||o==="super")&&(o="meta"),e[`${o}Key`])).length===s.length&&(Po(e.type)||$s(e.key).includes(r[0])))}function $s(e){if(!e)return[];e=Su(e);let t={ctrl:"control",slash:"/",space:" ",spacebar:" ",cmd:"meta",esc:"escape",up:"arrow-up",down:"arrow-down",left:"arrow-left",right:"arrow-right",period:".",comma:",",equal:"=",minus:"-",underscore:"_"};return t[e]=e,Object.keys(t).map(r=>{if(t[r]===e)return r}).filter(r=>r)}W("model",(e,{modifiers:t,expression:r},{effect:n,cleanup:s})=>{let i=e;t.includes("parent")&&(i=e.parentNode);let o=Q(i,r),a;typeof r=="string"?a=Q(i,`${r} = __placeholder`):typeof r=="function"&&typeof r()=="string"?a=Q(i,`${r()} = __placeholder`):a=()=>{};let l=()=>{let f;return o(m=>f=m),Ns(f)?f.get():f},c=f=>{let m;o(h=>m=h),Ns(m)?m.set(f):a(()=>{},{scope:{__placeholder:f}})};typeof r=="string"&&e.type==="radio"&&F(()=>{e.hasAttribute("name")||e.setAttribute("name",r)});let u=e.tagName.toLowerCase()==="select"||["checkbox","radio"].includes(e.type)||t.includes("lazy")?"change":"input",d=$e?()=>{}:An(e,u,t,f=>{c(Kr(e,t,f,l()))});if(t.includes("fill")&&([void 0,null,""].includes(l())||Kn(e)&&Array.isArray(l())||e.tagName.toLowerCase()==="select"&&e.multiple)&&c(Kr(e,t,{target:e},l())),e._x_removeModelListeners||(e._x_removeModelListeners={}),e._x_removeModelListeners.default=d,s(()=>e._x_removeModelListeners.default()),e.form){let f=An(e.form,"reset",[],m=>{zn(()=>e._x_model&&e._x_model.set(Kr(e,t,{target:e},l())))});s(()=>f())}e._x_model={get(){return l()},set(f){c(f)}},e._x_forceModelUpdate=f=>{f===void 0&&typeof r=="string"&&r.match(/\./)&&(f=""),window.fromModel=!0,F(()=>so(e,"value",f)),delete window.fromModel},n(()=>{let f=l();t.includes("unintrusive")&&document.activeElement.isSameNode(e)||e._x_forceModelUpdate(f)})});function Kr(e,t,r,n){return F(()=>{if(r instanceof CustomEvent&&r.detail!==void 0)return r.detail!==null&&r.detail!==void 0?r.detail:r.target.value;if(Kn(e))if(Array.isArray(n)){let s=null;return t.includes("number")?s=Vr(r.target.value):t.includes("boolean")?s=dr(r.target.value):s=r.target.value,r.target.checked?n.includes(s)?n:n.concat([s]):n.filter(i=>!Cu(i,s))}else return r.target.checked;else{if(e.tagName.toLowerCase()==="select"&&e.multiple)return t.includes("number")?Array.from(r.target.selectedOptions).map(s=>{let i=s.value||s.text;return Vr(i)}):t.includes("boolean")?Array.from(r.target.selectedOptions).map(s=>{let i=s.value||s.text;return dr(i)}):Array.from(r.target.selectedOptions).map(s=>s.value||s.text);{let s;return lo(e)?r.target.checked?s=r.target.value:s=n:s=r.target.value,t.includes("number")?Vr(s):t.includes("boolean")?dr(s):t.includes("trim")?s.trim():s}}})}function Vr(e){let t=e?parseFloat(e):null;return Ou(t)?t:e}function Cu(e,t){return e==t}function Ou(e){return!Array.isArray(e)&&!isNaN(e)}function Ns(e){return e!==null&&typeof e=="object"&&typeof e.get=="function"&&typeof e.set=="function"}W("cloak",e=>queueMicrotask(()=>F(()=>e.removeAttribute(gt("cloak")))));Qi(()=>`[${gt("init")}]`);W("init",Fe((e,{expression:t},{evaluate:r})=>typeof t=="string"?!!t.trim()&&r(t,{},!1):r(t,{},!1)));W("text",(e,{expression:t},{effect:r,evaluateLater:n})=>{let s=n(t);r(()=>{s(i=>{F(()=>{e.textContent=i})})})});W("html",(e,{expression:t},{effect:r,evaluateLater:n})=>{let s=n(t);r(()=>{s(i=>{F(()=>{e.innerHTML=i,e._x_ignoreSelf=!0,Se(e),delete e._x_ignoreSelf})})})});Bn(qi(":",Bi(gt("bind:"))));var Lo=(e,{value:t,modifiers:r,expression:n,original:s},{effect:i,cleanup:o})=>{if(!t){let l={};Ic(l),Q(e,n)(u=>{po(e,u,s)},{scope:l});return}if(t==="key")return Ru(e,n);if(e._x_inlineBindings&&e._x_inlineBindings[t]&&e._x_inlineBindings[t].extract)return;let a=Q(e,n);i(()=>a(l=>{l===void 0&&typeof n=="string"&&n.match(/\./)&&(l=""),F(()=>so(e,t,l,r))})),o(()=>{e._x_undoAddedClasses&&e._x_undoAddedClasses(),e._x_undoAddedStyles&&e._x_undoAddedStyles()})};Lo.inline=(e,{value:t,modifiers:r,expression:n})=>{t&&(e._x_inlineBindings||(e._x_inlineBindings={}),e._x_inlineBindings[t]={expression:n,extract:!1})};W("bind",Lo);function Ru(e,t){e._x_keyExpression=t}Gi(()=>`[${gt("data")}]`);W("data",(e,{expression:t},{cleanup:r})=>{if(Du(e))return;t=t===""?"{}":t;let n={};mn(n,e);let s={};$c(s,n);let i=Ke(e,t,{scope:s});(i===void 0||i===!0)&&(i={}),mn(i,e);let o=ht(i);Li(o);let a=jt(e,o);o.init&&Ke(e,o.init),r(()=>{o.destroy&&Ke(e,o.destroy),a()})});Mr((e,t)=>{e._x_dataStack&&(t._x_dataStack=e._x_dataStack,t.setAttribute("data-has-alpine-state",!0))});function Du(e){return $e?kn?!0:e.hasAttribute("data-has-alpine-state"):!1}W("show",(e,{modifiers:t,expression:r},{effect:n})=>{let s=Q(e,r);e._x_doHide||(e._x_doHide=()=>{F(()=>{e.style.setProperty("display","none",t.includes("important")?"important":void 0)})}),e._x_doShow||(e._x_doShow=()=>{F(()=>{e.style.length===1&&e.style.display==="none"?e.removeAttribute("style"):e.style.removeProperty("display")})});let i=()=>{e._x_doHide(),e._x_isShown=!1},o=()=>{e._x_doShow(),e._x_isShown=!0},a=()=>setTimeout(o),l=_n(d=>d?o():i(),d=>{typeof e._x_toggleAndCascadeWithTransitions=="function"?e._x_toggleAndCascadeWithTransitions(e,d,o,i):d?a():i()}),c,u=!0;n(()=>s(d=>{!u&&d===c||(t.includes("immediate")&&(d?a():i()),l(d),c=d,u=!1)}))});W("for",(e,{expression:t},{effect:r,cleanup:n})=>{let s=Lu(t),i=Q(e,s.items),o=Q(e,e._x_keyExpression||"index");e._x_prevKeys=[],e._x_lookup={},r(()=>Pu(e,s,i,o)),n(()=>{Object.values(e._x_lookup).forEach(a=>F(()=>{bt(a),a.remove()})),delete e._x_prevKeys,delete e._x_lookup})});function Pu(e,t,r,n){let s=o=>typeof o=="object"&&!Array.isArray(o),i=e;r(o=>{Iu(o)&&o>=0&&(o=Array.from(Array(o).keys(),g=>g+1)),o===void 0&&(o=[]);let a=e._x_lookup,l=e._x_prevKeys,c=[],u=[];if(s(o))o=Object.entries(o).map(([g,w])=>{let v=Fs(t,w,g,o);n(k=>{u.includes(k)&&le("Duplicate key on x-for",e),u.push(k)},{scope:{index:g,...v}}),c.push(v)});else for(let g=0;g<o.length;g++){let w=Fs(t,o[g],g,o);n(v=>{u.includes(v)&&le("Duplicate key on x-for",e),u.push(v)},{scope:{index:g,...w}}),c.push(w)}let d=[],f=[],m=[],h=[];for(let g=0;g<l.length;g++){let w=l[g];u.indexOf(w)===-1&&m.push(w)}l=l.filter(g=>!m.includes(g));let b="template";for(let g=0;g<u.length;g++){let w=u[g],v=l.indexOf(w);if(v===-1)l.splice(g,0,w),d.push([b,g]);else if(v!==g){let k=l.splice(g,1)[0],T=l.splice(v-1,1)[0];l.splice(g,0,T),l.splice(v,0,k),f.push([k,T])}else h.push(w);b=w}for(let g=0;g<m.length;g++){let w=m[g];w in a&&(F(()=>{bt(a[w]),a[w].remove()}),delete a[w])}for(let g=0;g<f.length;g++){let[w,v]=f[g],k=a[w],T=a[v],O=document.createElement("div");F(()=>{T||le('x-for ":key" is undefined or invalid',i,v,a),T.after(O),k.after(T),T._x_currentIfEl&&T.after(T._x_currentIfEl),O.before(k),k._x_currentIfEl&&k.after(k._x_currentIfEl),O.remove()}),T._x_refreshXForScope(c[u.indexOf(v)])}for(let g=0;g<d.length;g++){let[w,v]=d[g],k=w==="template"?i:a[w];k._x_currentIfEl&&(k=k._x_currentIfEl);let T=c[v],O=u[v],P=document.importNode(i.content,!0).firstElementChild,M=ht(T);jt(P,M,i),P._x_refreshXForScope=ce=>{Object.entries(ce).forEach(([U,be])=>{M[U]=be})},F(()=>{k.after(P),Fe(()=>Se(P))()}),typeof O=="object"&&le("x-for key cannot be an object, it must be a string or an integer",i),a[O]=P}for(let g=0;g<h.length;g++)a[h[g]]._x_refreshXForScope(c[u.indexOf(h[g])]);i._x_prevKeys=u})}function Lu(e){let t=/,([^,\}\]]*)(?:,([^,\}\]]*))?$/,r=/^\s*\(|\)\s*$/g,n=/([\s\S]*?)\s+(?:in|of)\s+([\s\S]*)/,s=e.match(n);if(!s)return;let i={};i.items=s[2].trim();let o=s[1].replace(r,"").trim(),a=o.match(t);return a?(i.item=o.replace(t,"").trim(),i.index=a[1].trim(),a[2]&&(i.collection=a[2].trim())):i.item=o,i}function Fs(e,t,r,n){let s={};return/^\[.*\]$/.test(e.item)&&Array.isArray(t)?e.item.replace("[","").replace("]","").split(",").map(o=>o.trim()).forEach((o,a)=>{s[o]=t[a]}):/^\{.*\}$/.test(e.item)&&!Array.isArray(t)&&typeof t=="object"?e.item.replace("{","").replace("}","").split(",").map(o=>o.trim()).forEach(o=>{s[o]=t[o]}):s[e.item]=t,e.index&&(s[e.index]=r),e.collection&&(s[e.collection]=n),s}function Iu(e){return!Array.isArray(e)&&!isNaN(e)}function Io(){}Io.inline=(e,{expression:t},{cleanup:r})=>{let n=Lr(e);n._x_refs||(n._x_refs={}),n._x_refs[t]=e,r(()=>delete n._x_refs[t])};W("ref",Io);W("if",(e,{expression:t},{effect:r,cleanup:n})=>{e.tagName.toLowerCase()!=="template"&&le("x-if can only be used on a <template> tag",e);let s=Q(e,t),i=()=>{if(e._x_currentIfEl)return e._x_currentIfEl;let a=e.content.cloneNode(!0).firstElementChild;return jt(a,{},e),F(()=>{e.after(a),Fe(()=>Se(a))()}),e._x_currentIfEl=a,e._x_undoIf=()=>{F(()=>{bt(a),a.remove()}),delete e._x_currentIfEl},a},o=()=>{e._x_undoIf&&(e._x_undoIf(),delete e._x_undoIf)};r(()=>s(a=>{a?i():o()})),n(()=>e._x_undoIf&&e._x_undoIf())});W("id",(e,{expression:t},{evaluate:r})=>{r(t).forEach(s=>wu(e,s))});Mr((e,t)=>{e._x_ids&&(t._x_ids=e._x_ids)});Bn(qi("@",Bi(gt("on:"))));W("on",Fe((e,{value:t,modifiers:r,expression:n},{cleanup:s})=>{let i=n?Q(e,n):()=>{};e.tagName.toLowerCase()==="template"&&(e._x_forwardEvents||(e._x_forwardEvents=[]),e._x_forwardEvents.includes(t)||e._x_forwardEvents.push(t));let o=An(e,t,r,a=>{i(()=>{},{scope:{$event:a},params:[a]})});s(()=>o())}));jr("Collapse","collapse","collapse");jr("Intersect","intersect","intersect");jr("Focus","trap","focus");jr("Mask","mask","mask");function jr(e,t,r){W(t,n=>le(`You can't use [x-${t}] without first installing the "${e}" plugin here: https://alpinejs.dev/plugins/${r}`,n))}Ht.setEvaluator(Fi);Ht.setReactivityEngine({reactive:ts,effect:zc,release:Yc,raw:D});var Mu=Ht,I=Mu;function $u(e){e.directive("collapse",t),t.inline=(r,{modifiers:n})=>{n.includes("min")&&(r._x_doShow=()=>{},r._x_doHide=()=>{})};function t(r,{modifiers:n}){let s=js(n,"duration",250)/1e3,i=js(n,"min",0),o=!n.includes("min");r._x_isShown||(r.style.height=`${i}px`),!r._x_isShown&&o&&(r.hidden=!0),r._x_isShown||(r.style.overflow="hidden");let a=(c,u)=>{let d=e.setStyles(c,u);return u.height?()=>{}:d},l={transitionProperty:"height",transitionDuration:`${s}s`,transitionTimingFunction:"cubic-bezier(0.4, 0.0, 0.2, 1)"};r._x_transition={in(c=()=>{},u=()=>{}){o&&(r.hidden=!1),o&&(r.style.display=null);let d=r.getBoundingClientRect().height;r.style.height="auto";let f=r.getBoundingClientRect().height;d===f&&(d=i),e.transition(r,e.setStyles,{during:l,start:{height:d+"px"},end:{height:f+"px"}},()=>r._x_isShown=!0,()=>{Math.abs(r.getBoundingClientRect().height-f)<1&&(r.style.overflow=null)})},out(c=()=>{},u=()=>{}){let d=r.getBoundingClientRect().height;e.transition(r,a,{during:l,start:{height:d+"px"},end:{height:i+"px"}},()=>r.style.overflow="hidden",()=>{r._x_isShown=!1,r.style.height==`${i}px`&&o&&(r.style.display="none",r.hidden=!0)})}}}}function js(e,t,r){if(e.indexOf(t)===-1)return r;const n=e[e.indexOf(t)+1];if(!n)return r;if(t==="duration"){let s=n.match(/([0-9]+)ms/);if(s)return s[1]}if(t==="min"){let s=n.match(/([0-9]+)px/);if(s)return s[1]}return n}var Nu=$u;/*!
 * perfect-scrollbar v1.5.6
 * Copyright 2024 Hyunje Jun, MDBootstrap and Contributors
 * Licensed under MIT
 */function _e(e){return getComputedStyle(e)}function te(e,t){for(var r in t){var n=t[r];typeof n=="number"&&(n=n+"px"),e.style[r]=n}return e}function er(e){var t=document.createElement("div");return t.className=e,t}var Us=typeof Element<"u"&&(Element.prototype.matches||Element.prototype.webkitMatchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector);function Ie(e,t){if(!Us)throw new Error("No element matching method supported");return Us.call(e,t)}function st(e){e.remove?e.remove():e.parentNode&&e.parentNode.removeChild(e)}function Hs(e,t){return Array.prototype.filter.call(e.children,function(r){return Ie(r,t)})}var q={main:"ps",rtl:"ps__rtl",element:{thumb:function(e){return"ps__thumb-"+e},rail:function(e){return"ps__rail-"+e},consuming:"ps__child--consume"},state:{focus:"ps--focus",clicking:"ps--clicking",active:function(e){return"ps--active-"+e},scrolling:function(e){return"ps--scrolling-"+e}}},Mo={x:null,y:null};function $o(e,t){var r=e.element.classList,n=q.state.scrolling(t);r.contains(n)?clearTimeout(Mo[t]):r.add(n)}function No(e,t){Mo[t]=setTimeout(function(){return e.isAlive&&e.element.classList.remove(q.state.scrolling(t))},e.settings.scrollingThreshold)}function Fu(e,t){$o(e,t),No(e,t)}var qt=function(t){this.element=t,this.handlers={}},Fo={isEmpty:{configurable:!0}};qt.prototype.bind=function(t,r){typeof this.handlers[t]>"u"&&(this.handlers[t]=[]),this.handlers[t].push(r),this.element.addEventListener(t,r,!1)};qt.prototype.unbind=function(t,r){var n=this;this.handlers[t]=this.handlers[t].filter(function(s){return r&&s!==r?!0:(n.element.removeEventListener(t,s,!1),!1)})};qt.prototype.unbindAll=function(){for(var t in this.handlers)this.unbind(t)};Fo.isEmpty.get=function(){var e=this;return Object.keys(this.handlers).every(function(t){return e.handlers[t].length===0})};Object.defineProperties(qt.prototype,Fo);var yt=function(){this.eventElements=[]};yt.prototype.eventElement=function(t){var r=this.eventElements.filter(function(n){return n.element===t})[0];return r||(r=new qt(t),this.eventElements.push(r)),r};yt.prototype.bind=function(t,r,n){this.eventElement(t).bind(r,n)};yt.prototype.unbind=function(t,r,n){var s=this.eventElement(t);s.unbind(r,n),s.isEmpty&&this.eventElements.splice(this.eventElements.indexOf(s),1)};yt.prototype.unbindAll=function(){this.eventElements.forEach(function(t){return t.unbindAll()}),this.eventElements=[]};yt.prototype.once=function(t,r,n){var s=this.eventElement(t),i=function(o){s.unbind(r,i),n(o)};s.bind(r,i)};function tr(e){if(typeof window.CustomEvent=="function")return new CustomEvent(e);var t=document.createEvent("CustomEvent");return t.initCustomEvent(e,!1,!1,void 0),t}function xr(e,t,r,n,s){n===void 0&&(n=!0),s===void 0&&(s=!1);var i;if(t==="top")i=["contentHeight","containerHeight","scrollTop","y","up","down"];else if(t==="left")i=["contentWidth","containerWidth","scrollLeft","x","left","right"];else throw new Error("A proper axis should be provided");ju(e,r,i,n,s)}function ju(e,t,r,n,s){var i=r[0],o=r[1],a=r[2],l=r[3],c=r[4],u=r[5];n===void 0&&(n=!0),s===void 0&&(s=!1);var d=e.element;e.reach[l]=null,d[a]<1&&(e.reach[l]="start"),d[a]>e[i]-e[o]-1&&(e.reach[l]="end"),t&&(d.dispatchEvent(tr("ps-scroll-"+l)),t<0?d.dispatchEvent(tr("ps-scroll-"+c)):t>0&&d.dispatchEvent(tr("ps-scroll-"+u)),n&&Fu(e,l)),e.reach[l]&&(t||s)&&d.dispatchEvent(tr("ps-"+l+"-reach-"+e.reach[l]))}function N(e){return parseInt(e,10)||0}function Uu(e){return Ie(e,"input,[contenteditable]")||Ie(e,"select,[contenteditable]")||Ie(e,"textarea,[contenteditable]")||Ie(e,"button,[contenteditable]")}function Hu(e){var t=_e(e);return N(t.width)+N(t.paddingLeft)+N(t.paddingRight)+N(t.borderLeftWidth)+N(t.borderRightWidth)}var rt={isWebKit:typeof document<"u"&&"WebkitAppearance"in document.documentElement.style,supportsTouch:typeof window<"u"&&("ontouchstart"in window||"maxTouchPoints"in window.navigator&&window.navigator.maxTouchPoints>0||window.DocumentTouch&&document instanceof window.DocumentTouch),supportsIePointer:typeof navigator<"u"&&navigator.msMaxTouchPoints,isChrome:typeof navigator<"u"&&/Chrome/i.test(navigator&&navigator.userAgent)};function Te(e){var t=e.element,r=Math.floor(t.scrollTop),n=t.getBoundingClientRect();e.containerWidth=Math.floor(n.width),e.containerHeight=Math.floor(n.height),e.contentWidth=t.scrollWidth,e.contentHeight=t.scrollHeight,t.contains(e.scrollbarXRail)||(Hs(t,q.element.rail("x")).forEach(function(s){return st(s)}),t.appendChild(e.scrollbarXRail)),t.contains(e.scrollbarYRail)||(Hs(t,q.element.rail("y")).forEach(function(s){return st(s)}),t.appendChild(e.scrollbarYRail)),!e.settings.suppressScrollX&&e.containerWidth+e.settings.scrollXMarginOffset<e.contentWidth?(e.scrollbarXActive=!0,e.railXWidth=e.containerWidth-e.railXMarginWidth,e.railXRatio=e.containerWidth/e.railXWidth,e.scrollbarXWidth=qs(e,N(e.railXWidth*e.containerWidth/e.contentWidth)),e.scrollbarXLeft=N((e.negativeScrollAdjustment+t.scrollLeft)*(e.railXWidth-e.scrollbarXWidth)/(e.contentWidth-e.containerWidth))):e.scrollbarXActive=!1,!e.settings.suppressScrollY&&e.containerHeight+e.settings.scrollYMarginOffset<e.contentHeight?(e.scrollbarYActive=!0,e.railYHeight=e.containerHeight-e.railYMarginHeight,e.railYRatio=e.containerHeight/e.railYHeight,e.scrollbarYHeight=qs(e,N(e.railYHeight*e.containerHeight/e.contentHeight)),e.scrollbarYTop=N(r*(e.railYHeight-e.scrollbarYHeight)/(e.contentHeight-e.containerHeight))):e.scrollbarYActive=!1,e.scrollbarXLeft>=e.railXWidth-e.scrollbarXWidth&&(e.scrollbarXLeft=e.railXWidth-e.scrollbarXWidth),e.scrollbarYTop>=e.railYHeight-e.scrollbarYHeight&&(e.scrollbarYTop=e.railYHeight-e.scrollbarYHeight),qu(t,e),e.scrollbarXActive?t.classList.add(q.state.active("x")):(t.classList.remove(q.state.active("x")),e.scrollbarXWidth=0,e.scrollbarXLeft=0,t.scrollLeft=e.isRtl===!0?e.contentWidth:0),e.scrollbarYActive?t.classList.add(q.state.active("y")):(t.classList.remove(q.state.active("y")),e.scrollbarYHeight=0,e.scrollbarYTop=0,t.scrollTop=0)}function qs(e,t){return e.settings.minScrollbarLength&&(t=Math.max(t,e.settings.minScrollbarLength)),e.settings.maxScrollbarLength&&(t=Math.min(t,e.settings.maxScrollbarLength)),t}function qu(e,t){var r={width:t.railXWidth},n=Math.floor(e.scrollTop);t.isRtl?r.left=t.negativeScrollAdjustment+e.scrollLeft+t.containerWidth-t.contentWidth:r.left=e.scrollLeft,t.isScrollbarXUsingBottom?r.bottom=t.scrollbarXBottom-n:r.top=t.scrollbarXTop+n,te(t.scrollbarXRail,r);var s={top:n,height:t.railYHeight};t.isScrollbarYUsingRight?t.isRtl?s.right=t.contentWidth-(t.negativeScrollAdjustment+e.scrollLeft)-t.scrollbarYRight-t.scrollbarYOuterWidth-9:s.right=t.scrollbarYRight-e.scrollLeft:t.isRtl?s.left=t.negativeScrollAdjustment+e.scrollLeft+t.containerWidth*2-t.contentWidth-t.scrollbarYLeft-t.scrollbarYOuterWidth:s.left=t.scrollbarYLeft+e.scrollLeft,te(t.scrollbarYRail,s),te(t.scrollbarX,{left:t.scrollbarXLeft,width:t.scrollbarXWidth-t.railBorderXWidth}),te(t.scrollbarY,{top:t.scrollbarYTop,height:t.scrollbarYHeight-t.railBorderYWidth})}function Bu(e){e.event.bind(e.scrollbarY,"mousedown",function(t){return t.stopPropagation()}),e.event.bind(e.scrollbarYRail,"mousedown",function(t){var r=t.pageY-window.pageYOffset-e.scrollbarYRail.getBoundingClientRect().top,n=r>e.scrollbarYTop?1:-1;e.element.scrollTop+=n*e.containerHeight,Te(e),t.stopPropagation()}),e.event.bind(e.scrollbarX,"mousedown",function(t){return t.stopPropagation()}),e.event.bind(e.scrollbarXRail,"mousedown",function(t){var r=t.pageX-window.pageXOffset-e.scrollbarXRail.getBoundingClientRect().left,n=r>e.scrollbarXLeft?1:-1;e.element.scrollLeft+=n*e.containerWidth,Te(e),t.stopPropagation()})}var rr=null;function Wu(e){Bs(e,["containerHeight","contentHeight","pageY","railYHeight","scrollbarY","scrollbarYHeight","scrollTop","y","scrollbarYRail"]),Bs(e,["containerWidth","contentWidth","pageX","railXWidth","scrollbarX","scrollbarXWidth","scrollLeft","x","scrollbarXRail"])}function Bs(e,t){var r=t[0],n=t[1],s=t[2],i=t[3],o=t[4],a=t[5],l=t[6],c=t[7],u=t[8],d=e.element,f=null,m=null,h=null;function b(v){v.touches&&v.touches[0]&&(v[s]=v.touches[0]["page"+c.toUpperCase()]),rr===o&&(d[l]=f+h*(v[s]-m),$o(e,c),Te(e),v.stopPropagation(),v.preventDefault())}function g(){No(e,c),e[u].classList.remove(q.state.clicking),document.removeEventListener("mousemove",b),document.removeEventListener("mouseup",g),document.removeEventListener("touchmove",b),document.removeEventListener("touchend",g),rr=null}function w(v){rr===null&&(rr=o,f=d[l],v.touches&&(v[s]=v.touches[0]["page"+c.toUpperCase()]),m=v[s],h=(e[n]-e[r])/(e[i]-e[a]),v.touches?(document.addEventListener("touchmove",b,{passive:!1}),document.addEventListener("touchend",g)):(document.addEventListener("mousemove",b),document.addEventListener("mouseup",g)),e[u].classList.add(q.state.clicking)),v.stopPropagation(),v.cancelable&&v.preventDefault()}e[o].addEventListener("mousedown",w),e[o].addEventListener("touchstart",w)}function Xu(e){var t=e.element,r=function(){return Ie(t,":hover")},n=function(){return Ie(e.scrollbarX,":focus")||Ie(e.scrollbarY,":focus")};function s(i,o){var a=Math.floor(t.scrollTop);if(i===0){if(!e.scrollbarYActive)return!1;if(a===0&&o>0||a>=e.contentHeight-e.containerHeight&&o<0)return!e.settings.wheelPropagation}var l=t.scrollLeft;if(o===0){if(!e.scrollbarXActive)return!1;if(l===0&&i<0||l>=e.contentWidth-e.containerWidth&&i>0)return!e.settings.wheelPropagation}return!0}e.event.bind(e.ownerDocument,"keydown",function(i){if(!(i.isDefaultPrevented&&i.isDefaultPrevented()||i.defaultPrevented)&&!(!r()&&!n())){var o=document.activeElement?document.activeElement:e.ownerDocument.activeElement;if(o){if(o.tagName==="IFRAME")o=o.contentDocument.activeElement;else for(;o.shadowRoot;)o=o.shadowRoot.activeElement;if(Uu(o))return}var a=0,l=0;switch(i.which){case 37:i.metaKey?a=-e.contentWidth:i.altKey?a=-e.containerWidth:a=-30;break;case 38:i.metaKey?l=e.contentHeight:i.altKey?l=e.containerHeight:l=30;break;case 39:i.metaKey?a=e.contentWidth:i.altKey?a=e.containerWidth:a=30;break;case 40:i.metaKey?l=-e.contentHeight:i.altKey?l=-e.containerHeight:l=-30;break;case 32:i.shiftKey?l=e.containerHeight:l=-e.containerHeight;break;case 33:l=e.containerHeight;break;case 34:l=-e.containerHeight;break;case 36:l=e.contentHeight;break;case 35:l=-e.contentHeight;break;default:return}e.settings.suppressScrollX&&a!==0||e.settings.suppressScrollY&&l!==0||(t.scrollTop-=l,t.scrollLeft+=a,Te(e),s(a,l)&&i.preventDefault())}})}function zu(e){var t=e.element;function r(o,a){var l=Math.floor(t.scrollTop),c=t.scrollTop===0,u=l+t.offsetHeight===t.scrollHeight,d=t.scrollLeft===0,f=t.scrollLeft+t.offsetWidth===t.scrollWidth,m;return Math.abs(a)>Math.abs(o)?m=c||u:m=d||f,m?!e.settings.wheelPropagation:!0}function n(o){var a=o.deltaX,l=-1*o.deltaY;return(typeof a>"u"||typeof l>"u")&&(a=-1*o.wheelDeltaX/6,l=o.wheelDeltaY/6),o.deltaMode&&o.deltaMode===1&&(a*=10,l*=10),a!==a&&l!==l&&(a=0,l=o.wheelDelta),o.shiftKey?[-l,-a]:[a,l]}function s(o,a,l){if(!rt.isWebKit&&t.querySelector("select:focus"))return!0;if(!t.contains(o))return!1;for(var c=o;c&&c!==t;){if(c.classList.contains(q.element.consuming))return!0;var u=_e(c);if(l&&u.overflowY.match(/(scroll|auto)/)){var d=c.scrollHeight-c.clientHeight;if(d>0&&(c.scrollTop>0&&l<0||c.scrollTop<d&&l>0))return!0}if(a&&u.overflowX.match(/(scroll|auto)/)){var f=c.scrollWidth-c.clientWidth;if(f>0&&(c.scrollLeft>0&&a<0||c.scrollLeft<f&&a>0))return!0}c=c.parentNode}return!1}function i(o){var a=n(o),l=a[0],c=a[1];if(!s(o.target,l,c)){var u=!1;e.settings.useBothWheelAxes?e.scrollbarYActive&&!e.scrollbarXActive?(c?t.scrollTop-=c*e.settings.wheelSpeed:t.scrollTop+=l*e.settings.wheelSpeed,u=!0):e.scrollbarXActive&&!e.scrollbarYActive&&(l?t.scrollLeft+=l*e.settings.wheelSpeed:t.scrollLeft-=c*e.settings.wheelSpeed,u=!0):(t.scrollTop-=c*e.settings.wheelSpeed,t.scrollLeft+=l*e.settings.wheelSpeed),Te(e),u=u||r(l,c),u&&!o.ctrlKey&&(o.stopPropagation(),o.preventDefault())}}typeof window.onwheel<"u"?e.event.bind(t,"wheel",i):typeof window.onmousewheel<"u"&&e.event.bind(t,"mousewheel",i)}function Yu(e){if(!rt.supportsTouch&&!rt.supportsIePointer)return;var t=e.element,r={startOffset:{},startTime:0,speed:{},easingLoop:null};function n(d,f){var m=Math.floor(t.scrollTop),h=t.scrollLeft,b=Math.abs(d),g=Math.abs(f);if(g>b){if(f<0&&m===e.contentHeight-e.containerHeight||f>0&&m===0)return window.scrollY===0&&f>0&&rt.isChrome}else if(b>g&&(d<0&&h===e.contentWidth-e.containerWidth||d>0&&h===0))return!0;return!0}function s(d,f){t.scrollTop-=f,t.scrollLeft-=d,Te(e)}function i(d){return d.targetTouches?d.targetTouches[0]:d}function o(d){return d.target===e.scrollbarX||d.target===e.scrollbarY||d.pointerType&&d.pointerType==="pen"&&d.buttons===0?!1:!!(d.targetTouches&&d.targetTouches.length===1||d.pointerType&&d.pointerType!=="mouse"&&d.pointerType!==d.MSPOINTER_TYPE_MOUSE)}function a(d){if(o(d)){var f=i(d);r.startOffset.pageX=f.pageX,r.startOffset.pageY=f.pageY,r.startTime=new Date().getTime(),r.easingLoop!==null&&clearInterval(r.easingLoop)}}function l(d,f,m){if(!t.contains(d))return!1;for(var h=d;h&&h!==t;){if(h.classList.contains(q.element.consuming))return!0;var b=_e(h);if(m&&b.overflowY.match(/(scroll|auto)/)){var g=h.scrollHeight-h.clientHeight;if(g>0&&(h.scrollTop>0&&m<0||h.scrollTop<g&&m>0))return!0}if(f&&b.overflowX.match(/(scroll|auto)/)){var w=h.scrollWidth-h.clientWidth;if(w>0&&(h.scrollLeft>0&&f<0||h.scrollLeft<w&&f>0))return!0}h=h.parentNode}return!1}function c(d){if(o(d)){var f=i(d),m={pageX:f.pageX,pageY:f.pageY},h=m.pageX-r.startOffset.pageX,b=m.pageY-r.startOffset.pageY;if(l(d.target,h,b))return;s(h,b),r.startOffset=m;var g=new Date().getTime(),w=g-r.startTime;w>0&&(r.speed.x=h/w,r.speed.y=b/w,r.startTime=g),n(h,b)&&d.cancelable&&d.preventDefault()}}function u(){e.settings.swipeEasing&&(clearInterval(r.easingLoop),r.easingLoop=setInterval(function(){if(e.isInitialized){clearInterval(r.easingLoop);return}if(!r.speed.x&&!r.speed.y){clearInterval(r.easingLoop);return}if(Math.abs(r.speed.x)<.01&&Math.abs(r.speed.y)<.01){clearInterval(r.easingLoop);return}s(r.speed.x*30,r.speed.y*30),r.speed.x*=.8,r.speed.y*=.8},10))}rt.supportsTouch?(e.event.bind(t,"touchstart",a),e.event.bind(t,"touchmove",c),e.event.bind(t,"touchend",u)):rt.supportsIePointer&&(window.PointerEvent?(e.event.bind(t,"pointerdown",a),e.event.bind(t,"pointermove",c),e.event.bind(t,"pointerup",u)):window.MSPointerEvent&&(e.event.bind(t,"MSPointerDown",a),e.event.bind(t,"MSPointerMove",c),e.event.bind(t,"MSPointerUp",u)))}var Ku=function(){return{handlers:["click-rail","drag-thumb","keyboard","wheel","touch"],maxScrollbarLength:null,minScrollbarLength:null,scrollingThreshold:1e3,scrollXMarginOffset:0,scrollYMarginOffset:0,suppressScrollX:!1,suppressScrollY:!1,swipeEasing:!0,useBothWheelAxes:!1,wheelPropagation:!0,wheelSpeed:1}},Vu={"click-rail":Bu,"drag-thumb":Wu,keyboard:Xu,wheel:zu,touch:Yu},Bt=function(t,r){var n=this;if(r===void 0&&(r={}),typeof t=="string"&&(t=document.querySelector(t)),!t||!t.nodeName)throw new Error("no element is specified to initialize PerfectScrollbar");this.element=t,t.classList.add(q.main),this.settings=Ku();for(var s in r)this.settings[s]=r[s];this.containerWidth=null,this.containerHeight=null,this.contentWidth=null,this.contentHeight=null;var i=function(){return t.classList.add(q.state.focus)},o=function(){return t.classList.remove(q.state.focus)};this.isRtl=_e(t).direction==="rtl",this.isRtl===!0&&t.classList.add(q.rtl),this.isNegativeScroll=(function(){var c=t.scrollLeft,u=null;return t.scrollLeft=-1,u=t.scrollLeft<0,t.scrollLeft=c,u})(),this.negativeScrollAdjustment=this.isNegativeScroll?t.scrollWidth-t.clientWidth:0,this.event=new yt,this.ownerDocument=t.ownerDocument||document,this.scrollbarXRail=er(q.element.rail("x")),t.appendChild(this.scrollbarXRail),this.scrollbarX=er(q.element.thumb("x")),this.scrollbarXRail.appendChild(this.scrollbarX),this.scrollbarX.setAttribute("tabindex",0),this.event.bind(this.scrollbarX,"focus",i),this.event.bind(this.scrollbarX,"blur",o),this.scrollbarXActive=null,this.scrollbarXWidth=null,this.scrollbarXLeft=null;var a=_e(this.scrollbarXRail);this.scrollbarXBottom=parseInt(a.bottom,10),isNaN(this.scrollbarXBottom)?(this.isScrollbarXUsingBottom=!1,this.scrollbarXTop=N(a.top)):this.isScrollbarXUsingBottom=!0,this.railBorderXWidth=N(a.borderLeftWidth)+N(a.borderRightWidth),te(this.scrollbarXRail,{display:"block"}),this.railXMarginWidth=N(a.marginLeft)+N(a.marginRight),te(this.scrollbarXRail,{display:""}),this.railXWidth=null,this.railXRatio=null,this.scrollbarYRail=er(q.element.rail("y")),t.appendChild(this.scrollbarYRail),this.scrollbarY=er(q.element.thumb("y")),this.scrollbarYRail.appendChild(this.scrollbarY),this.scrollbarY.setAttribute("tabindex",0),this.event.bind(this.scrollbarY,"focus",i),this.event.bind(this.scrollbarY,"blur",o),this.scrollbarYActive=null,this.scrollbarYHeight=null,this.scrollbarYTop=null;var l=_e(this.scrollbarYRail);this.scrollbarYRight=parseInt(l.right,10),isNaN(this.scrollbarYRight)?(this.isScrollbarYUsingRight=!1,this.scrollbarYLeft=N(l.left)):this.isScrollbarYUsingRight=!0,this.scrollbarYOuterWidth=this.isRtl?Hu(this.scrollbarY):null,this.railBorderYWidth=N(l.borderTopWidth)+N(l.borderBottomWidth),te(this.scrollbarYRail,{display:"block"}),this.railYMarginHeight=N(l.marginTop)+N(l.marginBottom),te(this.scrollbarYRail,{display:""}),this.railYHeight=null,this.railYRatio=null,this.reach={x:t.scrollLeft<=0?"start":t.scrollLeft>=this.contentWidth-this.containerWidth?"end":null,y:t.scrollTop<=0?"start":t.scrollTop>=this.contentHeight-this.containerHeight?"end":null},this.isAlive=!0,this.settings.handlers.forEach(function(c){return Vu[c](n)}),this.lastScrollTop=Math.floor(t.scrollTop),this.lastScrollLeft=t.scrollLeft,this.event.bind(this.element,"scroll",function(c){return n.onScroll(c)}),Te(this)};Bt.prototype.update=function(){this.isAlive&&(this.negativeScrollAdjustment=this.isNegativeScroll?this.element.scrollWidth-this.element.clientWidth:0,te(this.scrollbarXRail,{display:"block"}),te(this.scrollbarYRail,{display:"block"}),this.railXMarginWidth=N(_e(this.scrollbarXRail).marginLeft)+N(_e(this.scrollbarXRail).marginRight),this.railYMarginHeight=N(_e(this.scrollbarYRail).marginTop)+N(_e(this.scrollbarYRail).marginBottom),te(this.scrollbarXRail,{display:"none"}),te(this.scrollbarYRail,{display:"none"}),Te(this),xr(this,"top",0,!1,!0),xr(this,"left",0,!1,!0),te(this.scrollbarXRail,{display:""}),te(this.scrollbarYRail,{display:""}))};Bt.prototype.onScroll=function(t){this.isAlive&&(Te(this),xr(this,"top",this.element.scrollTop-this.lastScrollTop),xr(this,"left",this.element.scrollLeft-this.lastScrollLeft),this.lastScrollTop=Math.floor(this.element.scrollTop),this.lastScrollLeft=this.element.scrollLeft)};Bt.prototype.destroy=function(){this.isAlive&&(this.event.unbindAll(),st(this.scrollbarX),st(this.scrollbarY),st(this.scrollbarXRail),st(this.scrollbarYRail),this.removePsClasses(),this.element=null,this.scrollbarX=null,this.scrollbarY=null,this.scrollbarXRail=null,this.scrollbarYRail=null,this.isAlive=!1)};Bt.prototype.removePsClasses=function(){this.element.className=this.element.className.split(" ").filter(function(t){return!t.match(/^ps([-_].+|)$/)}).join(" ")};/**!
 * Sortable 1.15.6
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function Ws(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function ke(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Ws(Object(r),!0).forEach(function(n){Ju(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ws(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function fr(e){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?fr=function(t){return typeof t}:fr=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},fr(e)}function Ju(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ae(){return Ae=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ae.apply(this,arguments)}function Gu(e,t){if(e==null)return{};var r={},n=Object.keys(e),s,i;for(i=0;i<n.length;i++)s=n[i],!(t.indexOf(s)>=0)&&(r[s]=e[s]);return r}function Qu(e,t){if(e==null)return{};var r=Gu(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var Zu="1.15.6";function Ee(e){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(e)}var Ce=Ee(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),Wt=Ee(/Edge/i),Xs=Ee(/firefox/i),Ot=Ee(/safari/i)&&!Ee(/chrome/i)&&!Ee(/android/i),rs=Ee(/iP(ad|od|hone)/i),jo=Ee(/chrome/i)&&Ee(/android/i),Uo={capture:!1,passive:!1};function C(e,t,r){e.addEventListener(t,r,!Ce&&Uo)}function A(e,t,r){e.removeEventListener(t,r,!Ce&&Uo)}function kr(e,t){if(t){if(t[0]===">"&&(t=t.substring(1)),e)try{if(e.matches)return e.matches(t);if(e.msMatchesSelector)return e.msMatchesSelector(t);if(e.webkitMatchesSelector)return e.webkitMatchesSelector(t)}catch{return!1}return!1}}function Ho(e){return e.host&&e!==document&&e.host.nodeType?e.host:e.parentNode}function he(e,t,r,n){if(e){r=r||document;do{if(t!=null&&(t[0]===">"?e.parentNode===r&&kr(e,t):kr(e,t))||n&&e===r)return e;if(e===r)break}while(e=Ho(e))}return null}var zs=/\s+/g;function ie(e,t,r){if(e&&t)if(e.classList)e.classList[r?"add":"remove"](t);else{var n=(" "+e.className+" ").replace(zs," ").replace(" "+t+" "," ");e.className=(n+(r?" "+t:"")).replace(zs," ")}}function _(e,t,r){var n=e&&e.style;if(n){if(r===void 0)return document.defaultView&&document.defaultView.getComputedStyle?r=document.defaultView.getComputedStyle(e,""):e.currentStyle&&(r=e.currentStyle),t===void 0?r:r[t];!(t in n)&&t.indexOf("webkit")===-1&&(t="-webkit-"+t),n[t]=r+(typeof r=="string"?"":"px")}}function ot(e,t){var r="";if(typeof e=="string")r=e;else do{var n=_(e,"transform");n&&n!=="none"&&(r=n+" "+r)}while(!t&&(e=e.parentNode));var s=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return s&&new s(r)}function qo(e,t,r){if(e){var n=e.getElementsByTagName(t),s=0,i=n.length;if(r)for(;s<i;s++)r(n[s],s);return n}return[]}function xe(){var e=document.scrollingElement;return e||document.documentElement}function B(e,t,r,n,s){if(!(!e.getBoundingClientRect&&e!==window)){var i,o,a,l,c,u,d;if(e!==window&&e.parentNode&&e!==xe()?(i=e.getBoundingClientRect(),o=i.top,a=i.left,l=i.bottom,c=i.right,u=i.height,d=i.width):(o=0,a=0,l=window.innerHeight,c=window.innerWidth,u=window.innerHeight,d=window.innerWidth),(t||r)&&e!==window&&(s=s||e.parentNode,!Ce))do if(s&&s.getBoundingClientRect&&(_(s,"transform")!=="none"||r&&_(s,"position")!=="static")){var f=s.getBoundingClientRect();o-=f.top+parseInt(_(s,"border-top-width")),a-=f.left+parseInt(_(s,"border-left-width")),l=o+i.height,c=a+i.width;break}while(s=s.parentNode);if(n&&e!==window){var m=ot(s||e),h=m&&m.a,b=m&&m.d;m&&(o/=b,a/=h,d/=h,u/=b,l=o+u,c=a+d)}return{top:o,left:a,bottom:l,right:c,width:d,height:u}}}function Ys(e,t,r){for(var n=Me(e,!0),s=B(e)[t];n;){var i=B(n)[r],o=void 0;if(o=s>=i,!o)return n;if(n===xe())break;n=Me(n,!1)}return!1}function ut(e,t,r,n){for(var s=0,i=0,o=e.children;i<o.length;){if(o[i].style.display!=="none"&&o[i]!==x.ghost&&(n||o[i]!==x.dragged)&&he(o[i],r.draggable,e,!1)){if(s===t)return o[i];s++}i++}return null}function ns(e,t){for(var r=e.lastElementChild;r&&(r===x.ghost||_(r,"display")==="none"||t&&!kr(r,t));)r=r.previousElementSibling;return r||null}function ae(e,t){var r=0;if(!e||!e.parentNode)return-1;for(;e=e.previousElementSibling;)e.nodeName.toUpperCase()!=="TEMPLATE"&&e!==x.clone&&(!t||kr(e,t))&&r++;return r}function Ks(e){var t=0,r=0,n=xe();if(e)do{var s=ot(e),i=s.a,o=s.d;t+=e.scrollLeft*i,r+=e.scrollTop*o}while(e!==n&&(e=e.parentNode));return[t,r]}function ed(e,t){for(var r in e)if(e.hasOwnProperty(r)){for(var n in t)if(t.hasOwnProperty(n)&&t[n]===e[r][n])return Number(r)}return-1}function Me(e,t){if(!e||!e.getBoundingClientRect)return xe();var r=e,n=!1;do if(r.clientWidth<r.scrollWidth||r.clientHeight<r.scrollHeight){var s=_(r);if(r.clientWidth<r.scrollWidth&&(s.overflowX=="auto"||s.overflowX=="scroll")||r.clientHeight<r.scrollHeight&&(s.overflowY=="auto"||s.overflowY=="scroll")){if(!r.getBoundingClientRect||r===document.body)return xe();if(n||t)return r;n=!0}}while(r=r.parentNode);return xe()}function td(e,t){if(e&&t)for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);return e}function Jr(e,t){return Math.round(e.top)===Math.round(t.top)&&Math.round(e.left)===Math.round(t.left)&&Math.round(e.height)===Math.round(t.height)&&Math.round(e.width)===Math.round(t.width)}var Rt;function Bo(e,t){return function(){if(!Rt){var r=arguments,n=this;r.length===1?e.call(n,r[0]):e.apply(n,r),Rt=setTimeout(function(){Rt=void 0},t)}}}function rd(){clearTimeout(Rt),Rt=void 0}function Wo(e,t,r){e.scrollLeft+=t,e.scrollTop+=r}function Xo(e){var t=window.Polymer,r=window.jQuery||window.Zepto;return t&&t.dom?t.dom(e).cloneNode(!0):r?r(e).clone(!0)[0]:e.cloneNode(!0)}function zo(e,t,r){var n={};return Array.from(e.children).forEach(function(s){var i,o,a,l;if(!(!he(s,t.draggable,e,!1)||s.animated||s===r)){var c=B(s);n.left=Math.min((i=n.left)!==null&&i!==void 0?i:1/0,c.left),n.top=Math.min((o=n.top)!==null&&o!==void 0?o:1/0,c.top),n.right=Math.max((a=n.right)!==null&&a!==void 0?a:-1/0,c.right),n.bottom=Math.max((l=n.bottom)!==null&&l!==void 0?l:-1/0,c.bottom)}}),n.width=n.right-n.left,n.height=n.bottom-n.top,n.x=n.left,n.y=n.top,n}var re="Sortable"+new Date().getTime();function nd(){var e=[],t;return{captureAnimationState:function(){if(e=[],!!this.options.animation){var n=[].slice.call(this.el.children);n.forEach(function(s){if(!(_(s,"display")==="none"||s===x.ghost)){e.push({target:s,rect:B(s)});var i=ke({},e[e.length-1].rect);if(s.thisAnimationDuration){var o=ot(s,!0);o&&(i.top-=o.f,i.left-=o.e)}s.fromRect=i}})}},addAnimationState:function(n){e.push(n)},removeAnimationState:function(n){e.splice(ed(e,{target:n}),1)},animateAll:function(n){var s=this;if(!this.options.animation){clearTimeout(t),typeof n=="function"&&n();return}var i=!1,o=0;e.forEach(function(a){var l=0,c=a.target,u=c.fromRect,d=B(c),f=c.prevFromRect,m=c.prevToRect,h=a.rect,b=ot(c,!0);b&&(d.top-=b.f,d.left-=b.e),c.toRect=d,c.thisAnimationDuration&&Jr(f,d)&&!Jr(u,d)&&(h.top-d.top)/(h.left-d.left)===(u.top-d.top)/(u.left-d.left)&&(l=id(h,f,m,s.options)),Jr(d,u)||(c.prevFromRect=u,c.prevToRect=d,l||(l=s.options.animation),s.animate(c,h,d,l)),l&&(i=!0,o=Math.max(o,l),clearTimeout(c.animationResetTimer),c.animationResetTimer=setTimeout(function(){c.animationTime=0,c.prevFromRect=null,c.fromRect=null,c.prevToRect=null,c.thisAnimationDuration=null},l),c.thisAnimationDuration=l)}),clearTimeout(t),i?t=setTimeout(function(){typeof n=="function"&&n()},o):typeof n=="function"&&n(),e=[]},animate:function(n,s,i,o){if(o){_(n,"transition",""),_(n,"transform","");var a=ot(this.el),l=a&&a.a,c=a&&a.d,u=(s.left-i.left)/(l||1),d=(s.top-i.top)/(c||1);n.animatingX=!!u,n.animatingY=!!d,_(n,"transform","translate3d("+u+"px,"+d+"px,0)"),this.forRepaintDummy=sd(n),_(n,"transition","transform "+o+"ms"+(this.options.easing?" "+this.options.easing:"")),_(n,"transform","translate3d(0,0,0)"),typeof n.animated=="number"&&clearTimeout(n.animated),n.animated=setTimeout(function(){_(n,"transition",""),_(n,"transform",""),n.animated=!1,n.animatingX=!1,n.animatingY=!1},o)}}}}function sd(e){return e.offsetWidth}function id(e,t,r,n){return Math.sqrt(Math.pow(t.top-e.top,2)+Math.pow(t.left-e.left,2))/Math.sqrt(Math.pow(t.top-r.top,2)+Math.pow(t.left-r.left,2))*n.animation}var et=[],Gr={initializeByDefault:!0},Xt={mount:function(t){for(var r in Gr)Gr.hasOwnProperty(r)&&!(r in t)&&(t[r]=Gr[r]);et.forEach(function(n){if(n.pluginName===t.pluginName)throw"Sortable: Cannot mount plugin ".concat(t.pluginName," more than once")}),et.push(t)},pluginEvent:function(t,r,n){var s=this;this.eventCanceled=!1,n.cancel=function(){s.eventCanceled=!0};var i=t+"Global";et.forEach(function(o){r[o.pluginName]&&(r[o.pluginName][i]&&r[o.pluginName][i](ke({sortable:r},n)),r.options[o.pluginName]&&r[o.pluginName][t]&&r[o.pluginName][t](ke({sortable:r},n)))})},initializePlugins:function(t,r,n,s){et.forEach(function(a){var l=a.pluginName;if(!(!t.options[l]&&!a.initializeByDefault)){var c=new a(t,r,t.options);c.sortable=t,c.options=t.options,t[l]=c,Ae(n,c.defaults)}});for(var i in t.options)if(t.options.hasOwnProperty(i)){var o=this.modifyOption(t,i,t.options[i]);typeof o<"u"&&(t.options[i]=o)}},getEventProperties:function(t,r){var n={};return et.forEach(function(s){typeof s.eventProperties=="function"&&Ae(n,s.eventProperties.call(r[s.pluginName],t))}),n},modifyOption:function(t,r,n){var s;return et.forEach(function(i){t[i.pluginName]&&i.optionListeners&&typeof i.optionListeners[r]=="function"&&(s=i.optionListeners[r].call(t[i.pluginName],n))}),s}};function od(e){var t=e.sortable,r=e.rootEl,n=e.name,s=e.targetEl,i=e.cloneEl,o=e.toEl,a=e.fromEl,l=e.oldIndex,c=e.newIndex,u=e.oldDraggableIndex,d=e.newDraggableIndex,f=e.originalEvent,m=e.putSortable,h=e.extraEventProperties;if(t=t||r&&r[re],!!t){var b,g=t.options,w="on"+n.charAt(0).toUpperCase()+n.substr(1);window.CustomEvent&&!Ce&&!Wt?b=new CustomEvent(n,{bubbles:!0,cancelable:!0}):(b=document.createEvent("Event"),b.initEvent(n,!0,!0)),b.to=o||r,b.from=a||r,b.item=s||r,b.clone=i,b.oldIndex=l,b.newIndex=c,b.oldDraggableIndex=u,b.newDraggableIndex=d,b.originalEvent=f,b.pullMode=m?m.lastPutMode:void 0;var v=ke(ke({},h),Xt.getEventProperties(n,t));for(var k in v)b[k]=v[k];r&&r.dispatchEvent(b),g[w]&&g[w].call(t,b)}}var ad=["evt"],ee=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s=n.evt,i=Qu(n,ad);Xt.pluginEvent.bind(x)(t,r,ke({dragEl:y,parentEl:j,ghostEl:E,rootEl:L,nextEl:Be,lastDownEl:hr,cloneEl:$,cloneHidden:Le,dragStarted:Et,putSortable:z,activeSortable:x.active,originalEvent:s,oldIndex:it,oldDraggableIndex:Dt,newIndex:oe,newDraggableIndex:Pe,hideGhostForTarget:Jo,unhideGhostForTarget:Go,cloneNowHidden:function(){Le=!0},cloneNowShown:function(){Le=!1},dispatchSortableEvent:function(a){G({sortable:r,name:a,originalEvent:s})}},i))};function G(e){od(ke({putSortable:z,cloneEl:$,targetEl:y,rootEl:L,oldIndex:it,oldDraggableIndex:Dt,newIndex:oe,newDraggableIndex:Pe},e))}var y,j,E,L,Be,hr,$,Le,it,oe,Dt,Pe,nr,z,nt=!1,Er=!1,Sr=[],Ue,fe,Qr,Zr,Vs,Js,Et,tt,Pt,Lt=!1,sr=!1,pr,Y,en=[],Cn=!1,Tr=[],Ur=typeof document<"u",ir=rs,Gs=Wt||Ce?"cssFloat":"float",ld=Ur&&!jo&&!rs&&"draggable"in document.createElement("div"),Yo=(function(){if(Ur){if(Ce)return!1;var e=document.createElement("x");return e.style.cssText="pointer-events:auto",e.style.pointerEvents==="auto"}})(),Ko=function(t,r){var n=_(t),s=parseInt(n.width)-parseInt(n.paddingLeft)-parseInt(n.paddingRight)-parseInt(n.borderLeftWidth)-parseInt(n.borderRightWidth),i=ut(t,0,r),o=ut(t,1,r),a=i&&_(i),l=o&&_(o),c=a&&parseInt(a.marginLeft)+parseInt(a.marginRight)+B(i).width,u=l&&parseInt(l.marginLeft)+parseInt(l.marginRight)+B(o).width;if(n.display==="flex")return n.flexDirection==="column"||n.flexDirection==="column-reverse"?"vertical":"horizontal";if(n.display==="grid")return n.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(i&&a.float&&a.float!=="none"){var d=a.float==="left"?"left":"right";return o&&(l.clear==="both"||l.clear===d)?"vertical":"horizontal"}return i&&(a.display==="block"||a.display==="flex"||a.display==="table"||a.display==="grid"||c>=s&&n[Gs]==="none"||o&&n[Gs]==="none"&&c+u>s)?"vertical":"horizontal"},cd=function(t,r,n){var s=n?t.left:t.top,i=n?t.right:t.bottom,o=n?t.width:t.height,a=n?r.left:r.top,l=n?r.right:r.bottom,c=n?r.width:r.height;return s===a||i===l||s+o/2===a+c/2},ud=function(t,r){var n;return Sr.some(function(s){var i=s[re].options.emptyInsertThreshold;if(!(!i||ns(s))){var o=B(s),a=t>=o.left-i&&t<=o.right+i,l=r>=o.top-i&&r<=o.bottom+i;if(a&&l)return n=s}}),n},Vo=function(t){function r(i,o){return function(a,l,c,u){var d=a.options.group.name&&l.options.group.name&&a.options.group.name===l.options.group.name;if(i==null&&(o||d))return!0;if(i==null||i===!1)return!1;if(o&&i==="clone")return i;if(typeof i=="function")return r(i(a,l,c,u),o)(a,l,c,u);var f=(o?a:l).options.group.name;return i===!0||typeof i=="string"&&i===f||i.join&&i.indexOf(f)>-1}}var n={},s=t.group;(!s||fr(s)!="object")&&(s={name:s}),n.name=s.name,n.checkPull=r(s.pull,!0),n.checkPut=r(s.put),n.revertClone=s.revertClone,t.group=n},Jo=function(){!Yo&&E&&_(E,"display","none")},Go=function(){!Yo&&E&&_(E,"display","")};Ur&&!jo&&document.addEventListener("click",function(e){if(Er)return e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.stopImmediatePropagation&&e.stopImmediatePropagation(),Er=!1,!1},!0);var He=function(t){if(y){t=t.touches?t.touches[0]:t;var r=ud(t.clientX,t.clientY);if(r){var n={};for(var s in t)t.hasOwnProperty(s)&&(n[s]=t[s]);n.target=n.rootEl=r,n.preventDefault=void 0,n.stopPropagation=void 0,r[re]._onDragOver(n)}}},dd=function(t){y&&y.parentNode[re]._isOutsideThisEl(t.target)};function x(e,t){if(!(e&&e.nodeType&&e.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(e));this.el=e,this.options=t=Ae({},t),e[re]=this;var r={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(e.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return Ko(e,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(o,a){o.setData("Text",a.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:x.supportPointer!==!1&&"PointerEvent"in window&&(!Ot||rs),emptyInsertThreshold:5};Xt.initializePlugins(this,e,r);for(var n in r)!(n in t)&&(t[n]=r[n]);Vo(t);for(var s in this)s.charAt(0)==="_"&&typeof this[s]=="function"&&(this[s]=this[s].bind(this));this.nativeDraggable=t.forceFallback?!1:ld,this.nativeDraggable&&(this.options.touchStartThreshold=1),t.supportPointer?C(e,"pointerdown",this._onTapStart):(C(e,"mousedown",this._onTapStart),C(e,"touchstart",this._onTapStart)),this.nativeDraggable&&(C(e,"dragover",this),C(e,"dragenter",this)),Sr.push(this.el),t.store&&t.store.get&&this.sort(t.store.get(this)||[]),Ae(this,nd())}x.prototype={constructor:x,_isOutsideThisEl:function(t){!this.el.contains(t)&&t!==this.el&&(tt=null)},_getDirection:function(t,r){return typeof this.options.direction=="function"?this.options.direction.call(this,t,r,y):this.options.direction},_onTapStart:function(t){if(t.cancelable){var r=this,n=this.el,s=this.options,i=s.preventOnFilter,o=t.type,a=t.touches&&t.touches[0]||t.pointerType&&t.pointerType==="touch"&&t,l=(a||t).target,c=t.target.shadowRoot&&(t.path&&t.path[0]||t.composedPath&&t.composedPath()[0])||l,u=s.filter;if(vd(n),!y&&!(/mousedown|pointerdown/.test(o)&&t.button!==0||s.disabled)&&!c.isContentEditable&&!(!this.nativeDraggable&&Ot&&l&&l.tagName.toUpperCase()==="SELECT")&&(l=he(l,s.draggable,n,!1),!(l&&l.animated)&&hr!==l)){if(it=ae(l),Dt=ae(l,s.draggable),typeof u=="function"){if(u.call(this,t,l,this)){G({sortable:r,rootEl:c,name:"filter",targetEl:l,toEl:n,fromEl:n}),ee("filter",r,{evt:t}),i&&t.preventDefault();return}}else if(u&&(u=u.split(",").some(function(d){if(d=he(c,d.trim(),n,!1),d)return G({sortable:r,rootEl:d,name:"filter",targetEl:l,fromEl:n,toEl:n}),ee("filter",r,{evt:t}),!0}),u)){i&&t.preventDefault();return}s.handle&&!he(c,s.handle,n,!1)||this._prepareDragStart(t,a,l)}}},_prepareDragStart:function(t,r,n){var s=this,i=s.el,o=s.options,a=i.ownerDocument,l;if(n&&!y&&n.parentNode===i){var c=B(n);if(L=i,y=n,j=y.parentNode,Be=y.nextSibling,hr=n,nr=o.group,x.dragged=y,Ue={target:y,clientX:(r||t).clientX,clientY:(r||t).clientY},Vs=Ue.clientX-c.left,Js=Ue.clientY-c.top,this._lastX=(r||t).clientX,this._lastY=(r||t).clientY,y.style["will-change"]="all",l=function(){if(ee("delayEnded",s,{evt:t}),x.eventCanceled){s._onDrop();return}s._disableDelayedDragEvents(),!Xs&&s.nativeDraggable&&(y.draggable=!0),s._triggerDragStart(t,r),G({sortable:s,name:"choose",originalEvent:t}),ie(y,o.chosenClass,!0)},o.ignore.split(",").forEach(function(u){qo(y,u.trim(),tn)}),C(a,"dragover",He),C(a,"mousemove",He),C(a,"touchmove",He),o.supportPointer?(C(a,"pointerup",s._onDrop),!this.nativeDraggable&&C(a,"pointercancel",s._onDrop)):(C(a,"mouseup",s._onDrop),C(a,"touchend",s._onDrop),C(a,"touchcancel",s._onDrop)),Xs&&this.nativeDraggable&&(this.options.touchStartThreshold=4,y.draggable=!0),ee("delayStart",this,{evt:t}),o.delay&&(!o.delayOnTouchOnly||r)&&(!this.nativeDraggable||!(Wt||Ce))){if(x.eventCanceled){this._onDrop();return}o.supportPointer?(C(a,"pointerup",s._disableDelayedDrag),C(a,"pointercancel",s._disableDelayedDrag)):(C(a,"mouseup",s._disableDelayedDrag),C(a,"touchend",s._disableDelayedDrag),C(a,"touchcancel",s._disableDelayedDrag)),C(a,"mousemove",s._delayedDragTouchMoveHandler),C(a,"touchmove",s._delayedDragTouchMoveHandler),o.supportPointer&&C(a,"pointermove",s._delayedDragTouchMoveHandler),s._dragStartTimer=setTimeout(l,o.delay)}else l()}},_delayedDragTouchMoveHandler:function(t){var r=t.touches?t.touches[0]:t;Math.max(Math.abs(r.clientX-this._lastX),Math.abs(r.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){y&&tn(y),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var t=this.el.ownerDocument;A(t,"mouseup",this._disableDelayedDrag),A(t,"touchend",this._disableDelayedDrag),A(t,"touchcancel",this._disableDelayedDrag),A(t,"pointerup",this._disableDelayedDrag),A(t,"pointercancel",this._disableDelayedDrag),A(t,"mousemove",this._delayedDragTouchMoveHandler),A(t,"touchmove",this._delayedDragTouchMoveHandler),A(t,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(t,r){r=r||t.pointerType=="touch"&&t,!this.nativeDraggable||r?this.options.supportPointer?C(document,"pointermove",this._onTouchMove):r?C(document,"touchmove",this._onTouchMove):C(document,"mousemove",this._onTouchMove):(C(y,"dragend",this),C(L,"dragstart",this._onDragStart));try{document.selection?gr(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(t,r){if(nt=!1,L&&y){ee("dragStarted",this,{evt:r}),this.nativeDraggable&&C(document,"dragover",dd);var n=this.options;!t&&ie(y,n.dragClass,!1),ie(y,n.ghostClass,!0),x.active=this,t&&this._appendGhost(),G({sortable:this,name:"start",originalEvent:r})}else this._nulling()},_emulateDragOver:function(){if(fe){this._lastX=fe.clientX,this._lastY=fe.clientY,Jo();for(var t=document.elementFromPoint(fe.clientX,fe.clientY),r=t;t&&t.shadowRoot&&(t=t.shadowRoot.elementFromPoint(fe.clientX,fe.clientY),t!==r);)r=t;if(y.parentNode[re]._isOutsideThisEl(t),r)do{if(r[re]){var n=void 0;if(n=r[re]._onDragOver({clientX:fe.clientX,clientY:fe.clientY,target:t,rootEl:r}),n&&!this.options.dragoverBubble)break}t=r}while(r=Ho(r));Go()}},_onTouchMove:function(t){if(Ue){var r=this.options,n=r.fallbackTolerance,s=r.fallbackOffset,i=t.touches?t.touches[0]:t,o=E&&ot(E,!0),a=E&&o&&o.a,l=E&&o&&o.d,c=ir&&Y&&Ks(Y),u=(i.clientX-Ue.clientX+s.x)/(a||1)+(c?c[0]-en[0]:0)/(a||1),d=(i.clientY-Ue.clientY+s.y)/(l||1)+(c?c[1]-en[1]:0)/(l||1);if(!x.active&&!nt){if(n&&Math.max(Math.abs(i.clientX-this._lastX),Math.abs(i.clientY-this._lastY))<n)return;this._onDragStart(t,!0)}if(E){o?(o.e+=u-(Qr||0),o.f+=d-(Zr||0)):o={a:1,b:0,c:0,d:1,e:u,f:d};var f="matrix(".concat(o.a,",").concat(o.b,",").concat(o.c,",").concat(o.d,",").concat(o.e,",").concat(o.f,")");_(E,"webkitTransform",f),_(E,"mozTransform",f),_(E,"msTransform",f),_(E,"transform",f),Qr=u,Zr=d,fe=i}t.cancelable&&t.preventDefault()}},_appendGhost:function(){if(!E){var t=this.options.fallbackOnBody?document.body:L,r=B(y,!0,ir,!0,t),n=this.options;if(ir){for(Y=t;_(Y,"position")==="static"&&_(Y,"transform")==="none"&&Y!==document;)Y=Y.parentNode;Y!==document.body&&Y!==document.documentElement?(Y===document&&(Y=xe()),r.top+=Y.scrollTop,r.left+=Y.scrollLeft):Y=xe(),en=Ks(Y)}E=y.cloneNode(!0),ie(E,n.ghostClass,!1),ie(E,n.fallbackClass,!0),ie(E,n.dragClass,!0),_(E,"transition",""),_(E,"transform",""),_(E,"box-sizing","border-box"),_(E,"margin",0),_(E,"top",r.top),_(E,"left",r.left),_(E,"width",r.width),_(E,"height",r.height),_(E,"opacity","0.8"),_(E,"position",ir?"absolute":"fixed"),_(E,"zIndex","100000"),_(E,"pointerEvents","none"),x.ghost=E,t.appendChild(E),_(E,"transform-origin",Vs/parseInt(E.style.width)*100+"% "+Js/parseInt(E.style.height)*100+"%")}},_onDragStart:function(t,r){var n=this,s=t.dataTransfer,i=n.options;if(ee("dragStart",this,{evt:t}),x.eventCanceled){this._onDrop();return}ee("setupClone",this),x.eventCanceled||($=Xo(y),$.removeAttribute("id"),$.draggable=!1,$.style["will-change"]="",this._hideClone(),ie($,this.options.chosenClass,!1),x.clone=$),n.cloneId=gr(function(){ee("clone",n),!x.eventCanceled&&(n.options.removeCloneOnHide||L.insertBefore($,y),n._hideClone(),G({sortable:n,name:"clone"}))}),!r&&ie(y,i.dragClass,!0),r?(Er=!0,n._loopId=setInterval(n._emulateDragOver,50)):(A(document,"mouseup",n._onDrop),A(document,"touchend",n._onDrop),A(document,"touchcancel",n._onDrop),s&&(s.effectAllowed="move",i.setData&&i.setData.call(n,s,y)),C(document,"drop",n),_(y,"transform","translateZ(0)")),nt=!0,n._dragStartId=gr(n._dragStarted.bind(n,r,t)),C(document,"selectstart",n),Et=!0,window.getSelection().removeAllRanges(),Ot&&_(document.body,"user-select","none")},_onDragOver:function(t){var r=this.el,n=t.target,s,i,o,a=this.options,l=a.group,c=x.active,u=nr===l,d=a.sort,f=z||c,m,h=this,b=!1;if(Cn)return;function g(Z,zt){ee(Z,h,ke({evt:t,isOwner:u,axis:m?"vertical":"horizontal",revert:o,dragRect:s,targetRect:i,canSort:d,fromSortable:f,target:n,completed:v,onMove:function(de,Re){return or(L,r,y,s,de,B(de),t,Re)},changed:k},zt))}function w(){g("dragOverAnimationCapture"),h.captureAnimationState(),h!==f&&f.captureAnimationState()}function v(Z){return g("dragOverCompleted",{insertion:Z}),Z&&(u?c._hideClone():c._showClone(h),h!==f&&(ie(y,z?z.options.ghostClass:c.options.ghostClass,!1),ie(y,a.ghostClass,!0)),z!==h&&h!==x.active?z=h:h===x.active&&z&&(z=null),f===h&&(h._ignoreWhileAnimating=n),h.animateAll(function(){g("dragOverAnimationComplete"),h._ignoreWhileAnimating=null}),h!==f&&(f.animateAll(),f._ignoreWhileAnimating=null)),(n===y&&!y.animated||n===r&&!n.animated)&&(tt=null),!a.dragoverBubble&&!t.rootEl&&n!==document&&(y.parentNode[re]._isOutsideThisEl(t.target),!Z&&He(t)),!a.dragoverBubble&&t.stopPropagation&&t.stopPropagation(),b=!0}function k(){oe=ae(y),Pe=ae(y,a.draggable),G({sortable:h,name:"change",toEl:r,newIndex:oe,newDraggableIndex:Pe,originalEvent:t})}if(t.preventDefault!==void 0&&t.cancelable&&t.preventDefault(),n=he(n,a.draggable,r,!0),g("dragOver"),x.eventCanceled)return b;if(y.contains(t.target)||n.animated&&n.animatingX&&n.animatingY||h._ignoreWhileAnimating===n)return v(!1);if(Er=!1,c&&!a.disabled&&(u?d||(o=j!==L):z===this||(this.lastPutMode=nr.checkPull(this,c,y,t))&&l.checkPut(this,c,y,t))){if(m=this._getDirection(t,n)==="vertical",s=B(y),g("dragOverValid"),x.eventCanceled)return b;if(o)return j=L,w(),this._hideClone(),g("revert"),x.eventCanceled||(Be?L.insertBefore(y,Be):L.appendChild(y)),v(!0);var T=ns(r,a.draggable);if(!T||gd(t,m,this)&&!T.animated){if(T===y)return v(!1);if(T&&r===t.target&&(n=T),n&&(i=B(n)),or(L,r,y,s,n,i,t,!!n)!==!1)return w(),T&&T.nextSibling?r.insertBefore(y,T.nextSibling):r.appendChild(y),j=r,k(),v(!0)}else if(T&&pd(t,m,this)){var O=ut(r,0,a,!0);if(O===y)return v(!1);if(n=O,i=B(n),or(L,r,y,s,n,i,t,!1)!==!1)return w(),r.insertBefore(y,O),j=r,k(),v(!0)}else if(n.parentNode===r){i=B(n);var P=0,M,ce=y.parentNode!==r,U=!cd(y.animated&&y.toRect||s,n.animated&&n.toRect||i,m),be=m?"top":"left",ue=Ys(n,"top","top")||Ys(y,"top","top"),ye=ue?ue.scrollTop:void 0;tt!==n&&(M=i[be],Lt=!1,sr=!U&&a.invertSwap||ce),P=md(t,n,i,m,U?1:a.swapThreshold,a.invertedSwapThreshold==null?a.swapThreshold:a.invertedSwapThreshold,sr,tt===n);var V;if(P!==0){var J=ae(y);do J-=P,V=j.children[J];while(V&&(_(V,"display")==="none"||V===E))}if(P===0||V===n)return v(!1);tt=n,Pt=P;var Oe=n.nextElementSibling,X=!1;X=P===1;var je=or(L,r,y,s,n,i,t,X);if(je!==!1)return(je===1||je===-1)&&(X=je===1),Cn=!0,setTimeout(hd,30),w(),X&&!Oe?r.appendChild(y):n.parentNode.insertBefore(y,X?Oe:n),ue&&Wo(ue,0,ye-ue.scrollTop),j=y.parentNode,M!==void 0&&!sr&&(pr=Math.abs(M-B(n)[be])),k(),v(!0)}if(r.contains(y))return v(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){A(document,"mousemove",this._onTouchMove),A(document,"touchmove",this._onTouchMove),A(document,"pointermove",this._onTouchMove),A(document,"dragover",He),A(document,"mousemove",He),A(document,"touchmove",He)},_offUpEvents:function(){var t=this.el.ownerDocument;A(t,"mouseup",this._onDrop),A(t,"touchend",this._onDrop),A(t,"pointerup",this._onDrop),A(t,"pointercancel",this._onDrop),A(t,"touchcancel",this._onDrop),A(document,"selectstart",this)},_onDrop:function(t){var r=this.el,n=this.options;if(oe=ae(y),Pe=ae(y,n.draggable),ee("drop",this,{evt:t}),j=y&&y.parentNode,oe=ae(y),Pe=ae(y,n.draggable),x.eventCanceled){this._nulling();return}nt=!1,sr=!1,Lt=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),On(this.cloneId),On(this._dragStartId),this.nativeDraggable&&(A(document,"drop",this),A(r,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),Ot&&_(document.body,"user-select",""),_(y,"transform",""),t&&(Et&&(t.cancelable&&t.preventDefault(),!n.dropBubble&&t.stopPropagation()),E&&E.parentNode&&E.parentNode.removeChild(E),(L===j||z&&z.lastPutMode!=="clone")&&$&&$.parentNode&&$.parentNode.removeChild($),y&&(this.nativeDraggable&&A(y,"dragend",this),tn(y),y.style["will-change"]="",Et&&!nt&&ie(y,z?z.options.ghostClass:this.options.ghostClass,!1),ie(y,this.options.chosenClass,!1),G({sortable:this,name:"unchoose",toEl:j,newIndex:null,newDraggableIndex:null,originalEvent:t}),L!==j?(oe>=0&&(G({rootEl:j,name:"add",toEl:j,fromEl:L,originalEvent:t}),G({sortable:this,name:"remove",toEl:j,originalEvent:t}),G({rootEl:j,name:"sort",toEl:j,fromEl:L,originalEvent:t}),G({sortable:this,name:"sort",toEl:j,originalEvent:t})),z&&z.save()):oe!==it&&oe>=0&&(G({sortable:this,name:"update",toEl:j,originalEvent:t}),G({sortable:this,name:"sort",toEl:j,originalEvent:t})),x.active&&((oe==null||oe===-1)&&(oe=it,Pe=Dt),G({sortable:this,name:"end",toEl:j,originalEvent:t}),this.save()))),this._nulling()},_nulling:function(){ee("nulling",this),L=y=j=E=Be=$=hr=Le=Ue=fe=Et=oe=Pe=it=Dt=tt=Pt=z=nr=x.dragged=x.ghost=x.clone=x.active=null,Tr.forEach(function(t){t.checked=!0}),Tr.length=Qr=Zr=0},handleEvent:function(t){switch(t.type){case"drop":case"dragend":this._onDrop(t);break;case"dragenter":case"dragover":y&&(this._onDragOver(t),fd(t));break;case"selectstart":t.preventDefault();break}},toArray:function(){for(var t=[],r,n=this.el.children,s=0,i=n.length,o=this.options;s<i;s++)r=n[s],he(r,o.draggable,this.el,!1)&&t.push(r.getAttribute(o.dataIdAttr)||yd(r));return t},sort:function(t,r){var n={},s=this.el;this.toArray().forEach(function(i,o){var a=s.children[o];he(a,this.options.draggable,s,!1)&&(n[i]=a)},this),r&&this.captureAnimationState(),t.forEach(function(i){n[i]&&(s.removeChild(n[i]),s.appendChild(n[i]))}),r&&this.animateAll()},save:function(){var t=this.options.store;t&&t.set&&t.set(this)},closest:function(t,r){return he(t,r||this.options.draggable,this.el,!1)},option:function(t,r){var n=this.options;if(r===void 0)return n[t];var s=Xt.modifyOption(this,t,r);typeof s<"u"?n[t]=s:n[t]=r,t==="group"&&Vo(n)},destroy:function(){ee("destroy",this);var t=this.el;t[re]=null,A(t,"mousedown",this._onTapStart),A(t,"touchstart",this._onTapStart),A(t,"pointerdown",this._onTapStart),this.nativeDraggable&&(A(t,"dragover",this),A(t,"dragenter",this)),Array.prototype.forEach.call(t.querySelectorAll("[draggable]"),function(r){r.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),Sr.splice(Sr.indexOf(this.el),1),this.el=t=null},_hideClone:function(){if(!Le){if(ee("hideClone",this),x.eventCanceled)return;_($,"display","none"),this.options.removeCloneOnHide&&$.parentNode&&$.parentNode.removeChild($),Le=!0}},_showClone:function(t){if(t.lastPutMode!=="clone"){this._hideClone();return}if(Le){if(ee("showClone",this),x.eventCanceled)return;y.parentNode==L&&!this.options.group.revertClone?L.insertBefore($,y):Be?L.insertBefore($,Be):L.appendChild($),this.options.group.revertClone&&this.animate(y,$),_($,"display",""),Le=!1}}};function fd(e){e.dataTransfer&&(e.dataTransfer.dropEffect="move"),e.cancelable&&e.preventDefault()}function or(e,t,r,n,s,i,o,a){var l,c=e[re],u=c.options.onMove,d;return window.CustomEvent&&!Ce&&!Wt?l=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(l=document.createEvent("Event"),l.initEvent("move",!0,!0)),l.to=t,l.from=e,l.dragged=r,l.draggedRect=n,l.related=s||t,l.relatedRect=i||B(t),l.willInsertAfter=a,l.originalEvent=o,e.dispatchEvent(l),u&&(d=u.call(c,l,o)),d}function tn(e){e.draggable=!1}function hd(){Cn=!1}function pd(e,t,r){var n=B(ut(r.el,0,r.options,!0)),s=zo(r.el,r.options,E),i=10;return t?e.clientX<s.left-i||e.clientY<n.top&&e.clientX<n.right:e.clientY<s.top-i||e.clientY<n.bottom&&e.clientX<n.left}function gd(e,t,r){var n=B(ns(r.el,r.options.draggable)),s=zo(r.el,r.options,E),i=10;return t?e.clientX>s.right+i||e.clientY>n.bottom&&e.clientX>n.left:e.clientY>s.bottom+i||e.clientX>n.right&&e.clientY>n.top}function md(e,t,r,n,s,i,o,a){var l=n?e.clientY:e.clientX,c=n?r.height:r.width,u=n?r.top:r.left,d=n?r.bottom:r.right,f=!1;if(!o){if(a&&pr<c*s){if(!Lt&&(Pt===1?l>u+c*i/2:l<d-c*i/2)&&(Lt=!0),Lt)f=!0;else if(Pt===1?l<u+pr:l>d-pr)return-Pt}else if(l>u+c*(1-s)/2&&l<d-c*(1-s)/2)return bd(t)}return f=f||o,f&&(l<u+c*i/2||l>d-c*i/2)?l>u+c/2?1:-1:0}function bd(e){return ae(y)<ae(e)?1:-1}function yd(e){for(var t=e.tagName+e.className+e.src+e.href+e.textContent,r=t.length,n=0;r--;)n+=t.charCodeAt(r);return n.toString(36)}function vd(e){Tr.length=0;for(var t=e.getElementsByTagName("input"),r=t.length;r--;){var n=t[r];n.checked&&Tr.push(n)}}function gr(e){return setTimeout(e,0)}function On(e){return clearTimeout(e)}Ur&&C(document,"touchmove",function(e){(x.active||nt)&&e.cancelable&&e.preventDefault()});x.utils={on:C,off:A,css:_,find:qo,is:function(t,r){return!!he(t,r,t,!1)},extend:td,throttle:Bo,closest:he,toggleClass:ie,clone:Xo,index:ae,nextTick:gr,cancelNextTick:On,detectDirection:Ko,getChild:ut,expando:re};x.get=function(e){return e[re]};x.mount=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];t[0].constructor===Array&&(t=t[0]),t.forEach(function(n){if(!n.prototype||!n.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(n));n.utils&&(x.utils=ke(ke({},x.utils),n.utils)),Xt.mount(n)})};x.create=function(e,t){return new x(e,t)};x.version=Zu;var H=[],St,Rn,Dn=!1,rn,nn,Ar,Tt;function wd(){function e(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var t in this)t.charAt(0)==="_"&&typeof this[t]=="function"&&(this[t]=this[t].bind(this))}return e.prototype={dragStarted:function(r){var n=r.originalEvent;this.sortable.nativeDraggable?C(document,"dragover",this._handleAutoScroll):this.options.supportPointer?C(document,"pointermove",this._handleFallbackAutoScroll):n.touches?C(document,"touchmove",this._handleFallbackAutoScroll):C(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(r){var n=r.originalEvent;!this.options.dragOverBubble&&!n.rootEl&&this._handleAutoScroll(n)},drop:function(){this.sortable.nativeDraggable?A(document,"dragover",this._handleAutoScroll):(A(document,"pointermove",this._handleFallbackAutoScroll),A(document,"touchmove",this._handleFallbackAutoScroll),A(document,"mousemove",this._handleFallbackAutoScroll)),Qs(),mr(),rd()},nulling:function(){Ar=Rn=St=Dn=Tt=rn=nn=null,H.length=0},_handleFallbackAutoScroll:function(r){this._handleAutoScroll(r,!0)},_handleAutoScroll:function(r,n){var s=this,i=(r.touches?r.touches[0]:r).clientX,o=(r.touches?r.touches[0]:r).clientY,a=document.elementFromPoint(i,o);if(Ar=r,n||this.options.forceAutoScrollFallback||Wt||Ce||Ot){sn(r,this.options,a,n);var l=Me(a,!0);Dn&&(!Tt||i!==rn||o!==nn)&&(Tt&&Qs(),Tt=setInterval(function(){var c=Me(document.elementFromPoint(i,o),!0);c!==l&&(l=c,mr()),sn(r,s.options,c,n)},10),rn=i,nn=o)}else{if(!this.options.bubbleScroll||Me(a,!0)===xe()){mr();return}sn(r,this.options,Me(a,!1),!1)}}},Ae(e,{pluginName:"scroll",initializeByDefault:!0})}function mr(){H.forEach(function(e){clearInterval(e.pid)}),H=[]}function Qs(){clearInterval(Tt)}var sn=Bo(function(e,t,r,n){if(t.scroll){var s=(e.touches?e.touches[0]:e).clientX,i=(e.touches?e.touches[0]:e).clientY,o=t.scrollSensitivity,a=t.scrollSpeed,l=xe(),c=!1,u;Rn!==r&&(Rn=r,mr(),St=t.scroll,u=t.scrollFn,St===!0&&(St=Me(r,!0)));var d=0,f=St;do{var m=f,h=B(m),b=h.top,g=h.bottom,w=h.left,v=h.right,k=h.width,T=h.height,O=void 0,P=void 0,M=m.scrollWidth,ce=m.scrollHeight,U=_(m),be=m.scrollLeft,ue=m.scrollTop;m===l?(O=k<M&&(U.overflowX==="auto"||U.overflowX==="scroll"||U.overflowX==="visible"),P=T<ce&&(U.overflowY==="auto"||U.overflowY==="scroll"||U.overflowY==="visible")):(O=k<M&&(U.overflowX==="auto"||U.overflowX==="scroll"),P=T<ce&&(U.overflowY==="auto"||U.overflowY==="scroll"));var ye=O&&(Math.abs(v-s)<=o&&be+k<M)-(Math.abs(w-s)<=o&&!!be),V=P&&(Math.abs(g-i)<=o&&ue+T<ce)-(Math.abs(b-i)<=o&&!!ue);if(!H[d])for(var J=0;J<=d;J++)H[J]||(H[J]={});(H[d].vx!=ye||H[d].vy!=V||H[d].el!==m)&&(H[d].el=m,H[d].vx=ye,H[d].vy=V,clearInterval(H[d].pid),(ye!=0||V!=0)&&(c=!0,H[d].pid=setInterval((function(){n&&this.layer===0&&x.active._onTouchMove(Ar);var Oe=H[this.layer].vy?H[this.layer].vy*a:0,X=H[this.layer].vx?H[this.layer].vx*a:0;typeof u=="function"&&u.call(x.dragged.parentNode[re],X,Oe,e,Ar,H[this.layer].el)!=="continue"||Wo(H[this.layer].el,X,Oe)}).bind({layer:d}),24))),d++}while(t.bubbleScroll&&f!==l&&(f=Me(f,!1)));Dn=c}},30),Qo=function(t){var r=t.originalEvent,n=t.putSortable,s=t.dragEl,i=t.activeSortable,o=t.dispatchSortableEvent,a=t.hideGhostForTarget,l=t.unhideGhostForTarget;if(r){var c=n||i;a();var u=r.changedTouches&&r.changedTouches.length?r.changedTouches[0]:r,d=document.elementFromPoint(u.clientX,u.clientY);l(),c&&!c.el.contains(d)&&(o("spill"),this.onSpill({dragEl:s,putSortable:n}))}};function ss(){}ss.prototype={startIndex:null,dragStart:function(t){var r=t.oldDraggableIndex;this.startIndex=r},onSpill:function(t){var r=t.dragEl,n=t.putSortable;this.sortable.captureAnimationState(),n&&n.captureAnimationState();var s=ut(this.sortable.el,this.startIndex,this.options);s?this.sortable.el.insertBefore(r,s):this.sortable.el.appendChild(r),this.sortable.animateAll(),n&&n.animateAll()},drop:Qo};Ae(ss,{pluginName:"revertOnSpill"});function is(){}is.prototype={onSpill:function(t){var r=t.dragEl,n=t.putSortable,s=n||this.sortable;s.captureAnimationState(),r.parentNode&&r.parentNode.removeChild(r),s.animateAll()},drop:Qo};Ae(is,{pluginName:"removeOnSpill"});x.mount(new wd);x.mount(is,ss);function _d({orderUrl:e,csrf:t}){return{orderUrl:e,csrf:t,saving:!1,savedAt:null,status:"idle",errorMsg:null,_saveTimer:null,_hideTimer:null,_pending:!1,init(){this.$refs?.tbody&&new window.Sortable(this.$refs.tbody,{animation:160,handle:".drag-handle",draggable:"tr[data-room-id]",onStart:()=>this.$refs.tbody.classList.add("dragging"),onEnd:()=>{this.$refs.tbody.classList.remove("dragging"),this.queueSave()}})},get orderIds(){return Array.from(this.$refs.tbody.querySelectorAll("tr[data-room-id]")).map(r=>r.dataset.roomId)},queueSave(){clearTimeout(this._saveTimer),this._saveTimer=setTimeout(()=>this.saveOrder(),150)},async saveOrder(){if(this.saving){this._pending=!0;return}this.saving=!0,this.status="saving",this.errorMsg=null,clearTimeout(this._hideTimer);try{const r=await fetch(this.orderUrl,{method:"PATCH",headers:{"X-CSRF-TOKEN":this.csrf,Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({order:this.orderIds})});if(!r.ok){const n=await r.text().catch(()=>null);throw new Error(n||"Failed to save order")}this.savedAt=new Date().toLocaleTimeString(),this.status="saved",this._hideTimer=setTimeout(()=>{this.status==="saved"&&(this.status="idle")},2500)}catch(r){this.status="error",this.errorMsg=r?.message??"Failed to save"}finally{this.saving=!1,this._pending&&(this._pending=!1,this.queueSave())}}}}function xd({suggestUrl:e,csrf:t}){return{suggestUrl:e,csrf:t,q:"",open:!1,loading:!1,focusedIndex:-1,items:[],get hasResults(){return this.items.length>0},get highlighted(){return this.items[this.focusedIndex]||null},init(){document.addEventListener("click",r=>{this.$root.contains(r.target)||(this.open=!1)})},onInput(){this.open=!0,this.debouncedFetch()},onFocus(){this.q.trim()!==""&&(this.open=!0,this.debouncedFetch())},choose(r){this.q=r.name,this.open=!1,this.focusedIndex=-1},createLabel(){return`Create "${this.q}"`},keyDown(r){this.open&&(r.key==="ArrowDown"?(r.preventDefault(),this.focusedIndex=(this.focusedIndex+1)%Math.max(this.items.length+1,1)):r.key==="ArrowUp"?(r.preventDefault(),this.focusedIndex=(this.focusedIndex-1+(this.items.length+1))%(this.items.length+1)):r.key==="Enter"?(r.preventDefault(),this.focusedIndex===this.items.length||this.items.length===0?this.open=!1:this.items[this.focusedIndex]&&this.choose(this.items[this.focusedIndex])):r.key==="Escape"&&(this.open=!1))},async fetchSuggestions(){const r=this.q.trim();if(!r){this.items=[];return}this.loading=!0;try{const n=new URL(this.suggestUrl,window.location.origin);n.searchParams.set("q",r);const s=await fetch(n,{headers:{Accept:"application/json"}});this.items=s.ok?await s.json():[]}catch{this.items=[]}finally{this.loading=!1}},_timer:null,debouncedFetch(){clearTimeout(this._timer),this._timer=setTimeout(()=>this.fetchSuggestions(),160)}}}function kd({orderUrl:e,csrf:t}){return{orderUrl:e,csrf:t,status:"idle",savedAt:null,saving:!1,_pending:!1,_t:null,_hide:null,init(){this.$refs?.tbody&&new window.Sortable(this.$refs.tbody,{animation:160,handle:".drag-handle",draggable:"tr[data-task-id]",onEnd:()=>this.queueSave()})},get ids(){return Array.from(this.$refs.tbody.querySelectorAll("tr[data-task-id]")).map(r=>r.dataset.taskId)},queueSave(){clearTimeout(this._t),this._t=setTimeout(()=>this.save(),150)},async save(){if(this.saving){this._pending=!0;return}this.saving=!0,this.status="saving",clearTimeout(this._hide);try{const r=await fetch(this.orderUrl,{method:"PATCH",headers:{"X-CSRF-TOKEN":this.csrf,Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({order:this.ids})});if(!r.ok)throw new Error(await r.text()||"Failed");this.status="saved",this.savedAt=new Date().toLocaleTimeString(),this._hide=setTimeout(()=>{this.status==="saved"&&(this.status="idle")},2500)}catch(r){this.status="error",console.error(r)}finally{this.saving=!1,this._pending&&(this._pending=!1,this.queueSave())}}}}function Ed({suggestUrl:e}){return{suggestUrl:e,q:"",open:!1,loading:!1,focusedIndex:-1,items:[],get hasResults(){return this.items.length>0},get highlighted(){return this.items[this.focusedIndex]||null},init(){document.addEventListener("click",t=>{this.$root.contains(t.target)||(this.open=!1)})},capitalizeText(t){return t?t.toLowerCase().split(" ").map(r=>r.charAt(0).toUpperCase()+r.slice(1)).join(" "):""},onInput(){this.open=!0,this.debounce(),this.debounceCapitalize()},onFocus(){this.q.trim()&&(this.open=!0,this.debounce())},choose(t){this.q=t.name,this.open=!1,this.focusedIndex=-1},createLabel(){return`Create "${this.q}"`},keyDown(t){if(!this.open)return;const r=this.items.length;t.key==="ArrowDown"?(t.preventDefault(),this.focusedIndex=(this.focusedIndex+1)%(r+1)):t.key==="ArrowUp"?(t.preventDefault(),this.focusedIndex=(this.focusedIndex-1+(r+1))%(r+1)):t.key==="Enter"?(t.preventDefault(),this.focusedIndex<r&&this.items[this.focusedIndex]?this.choose(this.items[this.focusedIndex]):this.open=!1):t.key==="Escape"&&(this.open=!1)},async fetch(){const t=this.q.trim();if(!t){this.items=[];return}this.loading=!0;try{const r=new URL(this.suggestUrl,window.location.origin);r.searchParams.set("q",t);const n=await fetch(r,{headers:{Accept:"application/json"}});this.items=n.ok?await n.json():[]}catch{this.items=[]}finally{this.loading=!1}},_timer:null,debounce(){clearTimeout(this._timer),this._timer=setTimeout(()=>this.fetch(),160)},_capitalizeTimer:null,debounceCapitalize(){clearTimeout(this._capitalizeTimer),this._capitalizeTimer=setTimeout(()=>{if(this.q&&this.q.trim()){const t=this.capitalizeText(this.q);t!==this.q&&(this.q=t)}},500)}}}function Sd({formId:e,accept:t="image/*,video/*",multiple:r=!0}){return{formId:e,accept:t,multiple:r,hover:!1,previews:[],pick(){this.$refs.input.click()},handleChoose(n){this.addFiles(n.target.files)},handleDrop(n){this.hover=!1;const s=n.dataTransfer?.files;s?.length&&this.addFiles(s)},addFiles(n){const s=(this.accept||"").split(",").map(o=>o.trim()),i=new DataTransfer;for(const o of this.$refs.input.files)i.items.add(o);for(const o of n)this.isAllowed(o,s)&&(i.items.add(o),this.previews.push({file:o,url:URL.createObjectURL(o),kind:o.type.startsWith("video")?"video":"image",caption:""}));this.$refs.input.files=i.files},replace(n,s){if(!s)return;const i=(this.accept||"").split(",").map(l=>l.trim());if(!this.isAllowed(s,i))return;const o=new DataTransfer;this.previews.forEach((l,c)=>o.items.add(c===n?s:l.file)),this.$refs.input.files=o.files;try{URL.revokeObjectURL(this.previews[n]?.url)}catch{}const a=this.previews[n]?.caption||"";this.previews[n]={file:s,url:URL.createObjectURL(s),kind:s.type.startsWith("video")?"video":"image",caption:a}},remove(n){const s=new DataTransfer;this.previews.forEach((i,o)=>{o!==n&&s.items.add(i.file)}),this.$refs.input.files=s.files,URL.revokeObjectURL(this.previews[n]?.url),this.previews.splice(n,1)},isAllowed(n,s){return s.length?s.some(i=>i.endsWith("/*")?n.type.startsWith(i.slice(0,-1)):n.type===i):!0}}}function Td({fetchUrl:e,postUrl:t,csrf:r}){return{fetchUrl:e,postUrl:t,csrf:r,query:"",open:!1,suggestions:[],selected:[],async search(){const n=this.query.trim();if(!n){this.suggestions=[],this.open=!1;return}try{const s=new URL(this.fetchUrl,window.location.origin);s.searchParams.set("q",n);const o=await(await fetch(s,{headers:{"X-Requested-With":"XMLHttpRequest"}})).json();this.suggestions=o||[],this.open=this.suggestions.length>0}catch(s){console.error(s)}},addItem(n){this.selected.some(i=>n.id&&i.id===n.id||i.name.toLowerCase()===n.name.toLowerCase())||this.selected.push({key:randomUID(),id:n.id,name:n.name}),this.query="",this.suggestions=[],this.open=!1},enterQuery(){const n=this.query.trim();if(!n)return;const s=this.suggestions.find(i=>i.name.toLowerCase()===n.toLowerCase());s?this.addItem(s):this.selected.some(o=>o.name.toLowerCase()===n.toLowerCase())||this.selected.push({key:randomUUID(),name:n}),this.query="",this.suggestions=[],this.open=!1},remove(n){this.selected.splice(n,1)}}}function Ad({fetchUrl:e,postUrl:t,csrf:r}){return{fetchUrl:e,postUrl:t,csrf:r,query:"",open:!1,suggestions:[],selected:[],highlighted:-1,async search(){const n=this.query.trim();if(!n){this.suggestions=[],this.open=!1,this.highlighted=-1;return}try{const s=new URL(this.fetchUrl,window.location.origin);s.searchParams.set("q",n);const o=await(await fetch(s,{headers:{"X-Requested-With":"XMLHttpRequest"}})).json(),a=Array.isArray(o)||Array.isArray(o)?o:[];this.suggestions=a,this.open=this.suggestions.length>0,this.highlighted=this.open?0:-1}catch(s){console.error(s)}},addItem(n){this.selected.some(i=>n.id&&i.id===n.id||i.name.toLowerCase()===n.name.toLowerCase())||this.selected.push({key:randomUID(),id:n.id,name:n.name}),this.resetList(),this.query=""},enterQuery(){const n=this.query.trim();if(!n)return;const s=this.suggestions.find(i=>i.name.toLowerCase()===n.toLowerCase());s?this.addItem(s):(this.selected.some(o=>o.name.toLowerCase()===n.toLowerCase())||this.selected.push({key:randomUID(),name:n}),this.resetList(),this.query="")},confirm(){this.open&&this.highlighted>=0&&this.highlighted<this.suggestions.length?this.addItem(this.suggestions[this.highlighted]):this.enterQuery()},move(n){if(!this.open||this.suggestions.length===0)return;const s=this.suggestions.length;let i=this.highlighted+n;i<0&&(i=s-1),i>=s&&(i=0),this.highlighted=i,this.$nextTick(()=>{const o=this.$refs.list;if(!o)return;o.querySelector(`[data-idx="${this.highlighted}"]`)?.scrollIntoView?.({block:"nearest"})})},hoverIndex(n){this.highlighted=n},remove(n){this.selected.splice(n,1)},resetList(){this.suggestions=[],this.open=!1,this.highlighted=-1}}}function Cd({align:e="right",offset:t=8}={}){return{id:null,open:!1,align:e,offset:t,panelStyle:"",justOpened:!1,_bound:null,_onOtherOpen:null,init(){const r=typeof globalThis<"u"&&globalThis.crypto?globalThis.crypto:typeof window<"u"&&window.crypto?window.crypto:null;this.id=r&&typeof r.randomUUID=="function"?r.randomUUID():"dd-"+Math.random().toString(36).slice(2),this._onOtherOpen=n=>{n.detail&&n.detail!==this.id&&this.close()},window.addEventListener("dropdown:open",this._onOtherOpen)},toggle(){this.open?this.close():this.openAndPlace()},openAndPlace(){window.dispatchEvent(new CustomEvent("dropdown:open",{detail:this.id})),this.open=!0,this.justOpened=!0,queueMicrotask(()=>{this.justOpened=!1}),this.$nextTick(()=>{requestAnimationFrame(()=>{requestAnimationFrame(()=>{this.placePanel();const r=()=>this.placePanel();window.addEventListener("scroll",r,!0),window.addEventListener("resize",r,{passive:!0}),this._bound=r})})})},close(){this.open&&(this.open=!1,this._bound&&(window.removeEventListener("scroll",this._bound,!0),window.removeEventListener("resize",this._bound),this._bound=null))},placePanel(){const r=this.$refs.button,n=this.$refs.panel;if(!r||!n)return;const s=r.getBoundingClientRect(),i=n.style.visibility,o=n.style.display,a=n.style.maxWidth;n.style.visibility="hidden",n.style.display="block",n.style.maxWidth="100vw";const l=n.offsetHeight,c=n.offsetWidth;let f=window.innerHeight-s.bottom<l+this.offset?s.top-l-this.offset:s.bottom+this.offset,m;this.align==="left"?(m=s.left,m+c>window.innerWidth-8&&(m=Math.max(8,window.innerWidth-c-8))):(m=s.right-c,m<8&&(m=8)),f=Math.max(8,Math.min(f,window.innerHeight-l-8)),this.panelStyle=`top:${Math.round(f)}px; left:${Math.round(m)}px;`,n.style.visibility=i,n.style.display=o,n.style.maxWidth=a},focusNext(r){const n=Array.from(this.$refs.panel?.querySelectorAll("[data-menu-item]")??[]);if(!n.length)return;let s=n.indexOf(document.activeElement);s=(s+1)%n.length,n[s].focus(),r.preventDefault()},focusPrev(r){const n=Array.from(this.$refs.panel?.querySelectorAll("[data-menu-item]")??[]);if(!n.length)return;let s=n.indexOf(document.activeElement);s=(s-1+n.length)%n.length,n[s].focus(),r.preventDefault()}}}const Od=()=>({allRoomIds:[],selectedRoomIds:[],selectAll:!1,tasks:[],taskSearch:"",taskTypeFilter:"",selectedTaskIds:[],isSubmittingBulk:!1,bulkUrl:"",csrfToken:"",init(){this.allRoomIds=JSON.parse(this.$el.dataset.rooms||"[]"),this.tasks=JSON.parse(this.$el.dataset.tasks||"[]"),this.bulkUrl=this.$el.dataset.bulkUrl||"",this.csrfToken=this.$el.dataset.csrf||""},toggleSelectAll(){this.selectAll?this.selectedRoomIds=[...this.allRoomIds]:this.selectedRoomIds=[]},filteredTasks(){const e=this.taskSearch.toLowerCase().trim(),t=this.taskTypeFilter;return this.tasks.filter(r=>{const n=!e||r.name.toLowerCase().includes(e),s=!t||r.type===t;return n&&s})},async submitBulkAssign(){if(!(!this.selectedRoomIds.length||!this.selectedTaskIds.length)){this.isSubmittingBulk=!0;try{if(!(await fetch(this.bulkUrl,{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":this.csrfToken,Accept:"application/json"},body:JSON.stringify({room_ids:this.selectedRoomIds,task_ids:this.selectedTaskIds})})).ok)throw new Error("Request failed");window.location.reload()}catch(e){console.error("Bulk assign failed",e),alert("Something went wrong while assigning tasks. Please try again.")}finally{this.isSubmittingBulk=!1}}}});function Rd({orderUrl:e,attachUrl:t,suggestUrl:r,detachBaseUrl:n,csrf:s,roomTasks:i=[],availableTasks:o=[]}){return{orderUrl:e,attachUrl:t,suggestUrl:r,detachBaseUrl:n,csrf:s,roomTasks:i.map(a=>({...a,key:`task-${a.id}`})),availableTasks:o,searchQuery:"",openSuggestions:!1,suggestions:[],loading:!1,highlighted:-1,saving:!1,savedAt:null,status:"idle",_saveTimer:null,_hideTimer:null,_pending:!1,_searchTimer:null,_capitalizeTimer:null,init(){this.$nextTick(()=>{this.$refs?.taskList&&new window.Sortable(this.$refs.taskList,{animation:160,handle:".drag-handle",draggable:"[data-task-id]",onStart:()=>{this.$refs.taskList&&this.$refs.taskList.classList.add("dragging")},onEnd:()=>{this.$refs.taskList&&this.$refs.taskList.classList.remove("dragging"),this.updateOrderFromDOM(),this.queueSave()}})})},updateOrderFromDOM(){if(!this.$refs?.taskList)return;const l=Array.from(this.$refs.taskList.querySelectorAll("[data-task-id]")).map(u=>parseInt(u.dataset.taskId)),c=new Map(this.roomTasks.map(u=>[u.id,u]));this.roomTasks=l.map(u=>c.get(u)).filter(Boolean)},get taskIds(){return this.roomTasks.map(a=>a.id)},queueSave(){clearTimeout(this._saveTimer),this._saveTimer=setTimeout(()=>this.saveOrder(),150)},async saveOrder(){if(this.saving){this._pending=!0;return}this.saving=!0,this.status="saving",clearTimeout(this._hideTimer);try{if(!(await fetch(this.orderUrl,{method:"PATCH",headers:{"X-CSRF-TOKEN":this.csrf,Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({order:this.taskIds})})).ok)throw new Error("Failed to save order");this.savedAt=new Date().toLocaleTimeString(),this.status="saved",this._hideTimer=setTimeout(()=>{this.status==="saved"&&(this.status="idle")},2500)}catch(a){this.status="error",console.error(a)}finally{this.saving=!1,this._pending&&(this._pending=!1,this.queueSave())}},capitalizeText(a){return a?a.toLowerCase().split(" ").map(l=>l.charAt(0).toUpperCase()+l.slice(1)).join(" "):""},debounceCapitalize(){clearTimeout(this._capitalizeTimer),this._capitalizeTimer=setTimeout(()=>{if(this.searchQuery&&this.searchQuery.trim()){const a=this.capitalizeText(this.searchQuery);a!==this.searchQuery&&(this.searchQuery=a)}},500)},debounceSearch(){clearTimeout(this._searchTimer),this._searchTimer=setTimeout(()=>{this.searchTasks()},300)},async searchTasks(){const a=this.searchQuery.trim();if(!a){this.suggestions=[],this.openSuggestions=!1;return}this.loading=!0;try{const l=new URL(this.suggestUrl,window.location.origin);l.searchParams.set("q",a);const u=await(await fetch(l,{headers:{Accept:"application/json"}})).json(),d=Array.isArray(u)?u:[],f=new Set(this.roomTasks.map(m=>m.id));this.suggestions=d.filter(m=>!f.has(m.id)),this.openSuggestions=this.suggestions.length>0,this.highlighted=this.openSuggestions?0:-1}catch(l){console.error(l),this.suggestions=[]}finally{this.loading=!1}},addTask(a){if(this.roomTasks.some(c=>c.id===a.id))return;const l={...a,key:`task-${a.id}`};this.roomTasks.push(l),this.availableTasks=this.availableTasks.filter(c=>c.id!==a.id),this.searchQuery="",this.suggestions=[],this.openSuggestions=!1,this.attachTask(a.id)},async attachTask(a){try{if(!(await fetch(this.attachUrl,{method:"POST",headers:{"X-CSRF-TOKEN":this.csrf,Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({task_ids:[a]})})).ok)throw new Error("Failed to attach task");this.queueSave()}catch(l){console.error("Failed to attach task:",l)}},async removeTask(a){const l=this.roomTasks.find(c=>c.id===a);if(l){this.roomTasks=this.roomTasks.filter(c=>c.id!==a);try{const c=`${this.detachBaseUrl}/${a}`;if(!(await fetch(c,{method:"DELETE",headers:{"X-CSRF-TOKEN":this.csrf,Accept:"application/json","Content-Type":"application/json"}})).ok)throw new Error("Failed to detach task");this.queueSave()}catch(c){console.error("Failed to detach task:",c),this.roomTasks.push(l),this.roomTasks.sort((u,d)=>(u.sort_order||0)-(d.sort_order||0))}}},async createAndAttachTask(a){const l=this.capitalizeText(a.trim());if(!l)return;if(this.roomTasks.some(u=>u.name.toLowerCase()===l.toLowerCase())){this.searchQuery="",this.openSuggestions=!1;return}this.loading=!0;try{const u=await fetch(this.attachUrl,{method:"POST",headers:{"X-CSRF-TOKEN":this.csrf,Accept:"application/json","Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"},body:JSON.stringify({task_names:[l]})});if(!u.ok){const f=await u.json().catch(()=>({message:"Failed to create task"}));throw new Error(f.message||"Failed to create task")}const d=await u.json();d.tasks&&d.tasks.length>0?d.tasks.forEach(f=>{const m={id:f.id,name:f.name,type:f.type||"room",is_default:f.is_default||!1,key:`task-${f.id}`,sort_order:this.roomTasks.length+1};this.roomTasks.push(m)}):(await this.searchTasks(),this.suggestions.length>0&&this.addTask(this.suggestions[0])),this.searchQuery="",this.suggestions=[],this.openSuggestions=!1,this.queueSave()}catch(u){console.error("Failed to create task:",u),alert(u.message||"Failed to create task. Please try again.")}finally{this.loading=!1}},handleKeyDown(a){if(a.key==="Enter"){a.preventDefault();const c=this.searchQuery.trim();if(this.openSuggestions&&this.suggestions.length>0){const u=this.suggestions.length;this.highlighted>=0&&this.highlighted<u&&this.addTask(this.suggestions[this.highlighted])}else c&&this.createAndAttachTask(c);return}if(!this.openSuggestions)return;const l=this.suggestions.length;a.key==="ArrowDown"?(a.preventDefault(),this.highlighted=(this.highlighted+1)%l):a.key==="ArrowUp"?(a.preventDefault(),this.highlighted=(this.highlighted-1+l)%l):a.key==="Escape"&&(this.openSuggestions=!1)},hoverIndex(a){this.highlighted=a}}}function Dd({suggestUrl:e,storeUrl:t,csrf:r,roomId:n,panelName:s,initialData:i}){const o={name:"",type:"room",instructions:"",visible_to_owner:!0,visible_to_housekeeper:!0};return{suggestUrl:e,storeUrl:t,csrf:r,roomId:n,panelName:s||null,initialData:i||o,submitting:!1,error:null,success:null,formData:i?{...i}:{...o},capitalizeText(a){return a?a.toLowerCase().split(" ").map(l=>l.charAt(0).toUpperCase()+l.slice(1)).join(" "):""},async submitForm(a){this.error=null,this.success=null,this.submitting=!0;try{const l=new FormData(a.target),c=a.target.querySelector("#task-name");if(c&&c.value){const f=this.capitalizeText(c.value.trim());l.set("name",f)}l.append("_token",this.csrf);const u=await fetch(this.storeUrl,{method:"POST",body:l,headers:{"X-Requested-With":"XMLHttpRequest",Accept:"application/json"}});let d;try{d=await u.json()}catch{const m=await u.text();throw new Error(m||"Failed to create task")}if(!u.ok){if(d.errors){const f=Object.values(d.errors)[0][0]||"Validation failed";throw new Error(f)}throw new Error(d.message||"Failed to create task")}this.success=d.message||"Task added successfully!",a.target.reset(),this.formData={...this.initialData},setTimeout(()=>{const f=this.panelName||`add-task-${this.roomId}`;this.$dispatch("close-preview-panel",f),window.location.reload()},1e3)}catch(l){this.error=l.message||"An error occurred while creating the task",console.error("Task creation error:",l)}finally{this.submitting=!1}}}}function Pd({storeUrl:e,csrf:t}){return{storeUrl:e,csrf:t,submitting:!1,error:null,success:null,formData:{name:"",is_default:!1},async submitForm(r){this.error=null,this.success=null,this.submitting=!0;try{const n=new FormData;n.append("name",this.formData.name),n.append("is_default",this.formData.is_default?"1":"0"),n.append("_token",this.csrf);const s=await fetch(this.storeUrl,{method:"POST",body:n,headers:{"X-Requested-With":"XMLHttpRequest",Accept:"application/json"}});let i;try{i=await s.json()}catch{const a=await s.text();throw new Error(a||"Failed to create room")}if(!s.ok){if(i.errors){const o=Object.values(i.errors)[0][0]||"Validation failed";throw new Error(o)}throw new Error(i.message||"Failed to create room")}this.success=i.message||"Room created successfully!",this.formData={name:"",is_default:!1},setTimeout(()=>{this.$dispatch("close-preview-panel","add-room"),window.location.reload()},1e3)}catch(n){this.error=n.message||"An error occurred while creating the room",console.error("Room creation error:",n)}finally{this.submitting=!1}}}}function Ld({suggestUrl:e,storeUrl:t,csrf:r,propertyId:n,roomId:s,taskId:i,mode:o,panelName:a,initialData:l}){return{suggestUrl:e,storeUrl:t,csrf:r,propertyId:n,roomId:s,taskId:i,mode:o,panelName:a,submitting:!1,error:null,success:null,formData:{name:l.name||"",type:l.type||"room",instructions:l.instructions||"",visible_to_owner:l.visible_to_owner!==void 0?l.visible_to_owner:!0,visible_to_housekeeper:l.visible_to_housekeeper!==void 0?l.visible_to_housekeeper:!0},init(){this.formData={name:l.name||"",type:l.type||"room",instructions:l.instructions||"",visible_to_owner:l.visible_to_owner!==void 0?l.visible_to_owner:!0,visible_to_housekeeper:l.visible_to_housekeeper!==void 0?l.visible_to_housekeeper:!0}},capitalizeText(c){return c?c.toLowerCase().split(" ").map(u=>u.charAt(0).toUpperCase()+u.slice(1)).join(" "):""},async submitForm(c){this.error=null,this.success=null,this.submitting=!0;try{const u=new FormData(c.target),d=c.target.querySelector("#task-name");if(d&&d.value){const h=this.capitalizeText(d.value.trim());u.set("name",h)}u.append("_token",this.csrf),this.mode==="edit"&&u.append("_method","PUT");const f=await fetch(this.storeUrl,{method:"POST",body:u,headers:{"X-Requested-With":"XMLHttpRequest",Accept:"application/json"}});let m;try{m=await f.json()}catch{const b=await f.text();throw new Error(b||`Failed to ${this.mode==="edit"?"update":"create"} task`)}if(!f.ok){if(m.errors){const h=Object.values(m.errors)[0][0]||"Validation failed";throw new Error(h)}throw new Error(m.message||`Failed to ${this.mode==="edit"?"update":"create"} task`)}this.success=m.message||(this.mode==="edit"?"Task updated successfully!":"Task added successfully!"),this.mode==="create"&&(c.target.reset(),this.formData={name:"",type:"room",instructions:"",visible_to_owner:!0,visible_to_housekeeper:!0}),setTimeout(()=>{this.$dispatch("close-preview-panel",this.panelName),window.location.reload()},1e3)}catch(u){this.error=u.message||`An error occurred while ${this.mode==="edit"?"updating":"creating"} the task`,console.error("Task form error:",u)}finally{this.submitting=!1}}}}function Id({suggestUrl:e,storeUrl:t,csrf:r,propertyId:n,roomId:s,mode:i,panelName:o,initialData:a}){return{suggestUrl:e,storeUrl:t,csrf:r,propertyId:n,roomId:s,mode:i,panelName:o,submitting:!1,error:null,success:null,showDetachModal:!1,formData:{name:a.name||"",is_default:a.is_default!==void 0?a.is_default:!1},init(){this.formData={name:a.name||"",is_default:a.is_default!==void 0?a.is_default:!1}},async submitForm(l){this.error=null,this.success=null,this.submitting=!0;try{const c=new FormData,u=l.target.querySelector("#room-name");if(u&&u.value)c.append("name",u.value.trim());else throw new Error("Room name is required");c.append("is_default",this.formData.is_default?"1":"0"),c.append("_token",this.csrf),this.mode==="edit"&&c.append("_method","PUT");const d=await fetch(this.storeUrl,{method:"POST",body:c,headers:{"X-Requested-With":"XMLHttpRequest",Accept:"application/json"}});let f;try{f=await d.json()}catch{const h=await d.text();throw new Error(h||`Failed to ${this.mode==="edit"?"update":"create"} room`)}if(!d.ok){if(f.errors){const m=Object.values(f.errors)[0][0]||"Validation failed";throw new Error(m)}throw new Error(f.message||`Failed to ${this.mode==="edit"?"update":"create"} room`)}this.success=f.message||(this.mode==="edit"?"Room updated successfully!":"Room created successfully!"),this.mode==="create"&&(l.target.reset(),this.formData={name:"",is_default:!1}),setTimeout(()=>{this.$dispatch("close-preview-panel",this.panelName),window.location.reload()},1e3)}catch(c){this.error=c.message||`An error occurred while ${this.mode==="edit"?"updating":"creating"} the room`,console.error("Room form error:",c)}finally{this.submitting=!1}}}}function Md({suggestUrl:e,storeUrl:t,csrf:r,propertyId:n,taskId:s,mode:i,panelName:o,initialData:a}){return{suggestUrl:e,storeUrl:t,csrf:r,propertyId:n,taskId:s,mode:i,panelName:o,submitting:!1,error:null,success:null,formData:{name:a.name||"",phase:a.phase||"pre_cleaning",instructions:a.instructions||"",visible_to_owner:a.visible_to_owner!==void 0?a.visible_to_owner:!0,visible_to_housekeeper:a.visible_to_housekeeper!==void 0?a.visible_to_housekeeper:!0},init(){this.formData={name:a.name||"",phase:a.phase||"pre_cleaning",instructions:a.instructions||"",visible_to_owner:a.visible_to_owner!==void 0?a.visible_to_owner:!0,visible_to_housekeeper:a.visible_to_housekeeper!==void 0?a.visible_to_housekeeper:!0}},capitalizeText(l){return l?l.toLowerCase().split(" ").map(c=>c.charAt(0).toUpperCase()+c.slice(1)).join(" "):""},async submitForm(l){this.error=null,this.success=null,this.submitting=!0;try{const c=new FormData,u=l.target.querySelector("#property-task-name");if(u&&u.value){const m=this.capitalizeText(u.value.trim());c.append("name",m)}else throw new Error("Task name is required");c.append("phase",this.formData.phase),c.append("instructions",this.formData.instructions||""),c.append("visible_to_owner",this.formData.visible_to_owner?"1":"0"),c.append("visible_to_housekeeper",this.formData.visible_to_housekeeper?"1":"0"),c.append("_token",this.csrf),this.mode==="edit"&&c.append("_method","PUT");const d=await fetch(this.storeUrl,{method:"POST",body:c,headers:{"X-Requested-With":"XMLHttpRequest",Accept:"application/json"}});let f;try{f=await d.json()}catch{const h=await d.text();throw new Error(h||`Failed to ${this.mode==="edit"?"update":"create"} property task`)}if(!d.ok){if(f.errors){const m=Object.values(f.errors)[0][0]||"Validation failed";throw new Error(m)}throw new Error(f.message||`Failed to ${this.mode==="edit"?"update":"create"} property task`)}this.success=f.message||(this.mode==="edit"?"Property task updated successfully!":"Property task added successfully!"),this.mode==="create"&&(l.target.reset(),this.formData={name:"",phase:"pre_cleaning",instructions:"",visible_to_owner:!0,visible_to_housekeeper:!0}),setTimeout(()=>{this.$dispatch("close-preview-panel",this.panelName),window.location.reload()},1e3)}catch(c){this.error=c.message||`An error occurred while ${this.mode==="edit"?"updating":"creating"} the property task`,console.error("Property task form error:",c)}finally{this.submitting=!1}}}}function $d(e={}){return{loading:!1,error:null,success:null,renderer:null,dataUrl:e.dataUrl||null,init(){window.checklistHandler=this,this.setupFormHandlers()},setupFormHandlers(){document.addEventListener("click",t=>{const r=t.target.closest("[data-checklist-toggle]");r&&!r.disabled&&(t.preventDefault(),this.handleToggle(t,r))}),document.removeEventListener("click",this.handleNoteSaveDelegate),this.handleNoteSaveDelegate=t=>{const r=t.target.closest("[data-checklist-note-save]");r&&(t.preventDefault(),t.stopPropagation(),this.handleNoteSave(t,r))},document.addEventListener("click",this.handleNoteSaveDelegate),document.removeEventListener("submit",this.handlePhotoUploadDelegate),this.handlePhotoUploadDelegate=t=>{const r=t.target;r&&r.hasAttribute("x-data")&&r.getAttribute("x-data").includes("photoUploader")||(r.matches("[data-checklist-photo-form]")&&this.handlePhotoUpload(t),r.matches("[data-task-photo-form]")&&this.handleTaskPhotoUpload(t,r))},document.addEventListener("submit",this.handlePhotoUploadDelegate)},async handleTaskPhotoUpload(t,r){t.preventDefault(),t.stopPropagation();const n=r.getAttribute("action");if(!n){console.error("Photo upload URL not found");return}const s=new FormData(r),i=r.querySelector('button[type="submit"]'),o=i?.textContent;i&&(i.disabled=!0,i.textContent="Uploading...");try{const l=await(await fetch(n,{method:"POST",body:s,headers:{"X-Requested-With":"XMLHttpRequest","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.content||""}})).json();if(l.success)this.showSuccess("Photo uploaded successfully"),r.closest("[x-data]")?.dispatchEvent(new CustomEvent("close-modal")),r.reset();else throw new Error(l.message||"Failed to upload photo")}catch(a){console.error("Task photo upload error:",a),this.showError(a.message||"Failed to upload photo")}finally{i&&(i.disabled=!1,i.textContent=o)}},async handleToggle(t,r){t.preventDefault(),t.stopPropagation(),r||(r=t.currentTarget);const n=r.dataset.toggleUrl;if(!n){console.error("Toggle URL not found");return}const s=r.dataset.checked==="true",i=!s;r.dataset.checked=i?"true":"false",this.updateToggleUI(r,i),r.disabled=!0;try{const o=await window.api.post(n,{});if(o.success){r.dataset.checked=o.checked?"true":"false",this.updateToggleUI(r,o.checked),this.updateProgress();const l=document.querySelector("[data-session-id]")?.dataset.sessionId||window.location.pathname.match(/\/sessions\/(\d+)/)?.[1];l&&this.refreshAndRerender(l),this.showSuccess("Task updated")}else throw new Error(o.message||"Failed to update task")}catch(o){console.error("Toggle error:",o);const a=o.response?.data?.message||o.message||"An error occurred";this.showError(a),r.dataset.checked=s?"true":"false",this.updateToggleUI(r,s)}finally{r.disabled=!1}},async handleNoteSave(t,r=null){if(t.preventDefault(),t.stopPropagation(),r=r||t.currentTarget||t.target.closest("[data-checklist-note-save]"),!r){console.error("Save button not found");return}const n=r.getAttribute("data-note-url")||r.dataset&&r.dataset.noteUrl,s=r.closest("[data-note-container]")?.querySelector("[data-note-input]");if(!n){console.error("Note save URL not found on button. Button:",r,"Attributes:",r.attributes);return}if(!s){console.error("Note input not found");return}const i=s.value||"",o=r.textContent;if(r.dataset.noteSaving!=="true"){r.dataset.noteSaving="true",r.disabled=!0,r.textContent="Saving...";try{const l=await window.api.post(n,{note:i});if(l.success)this.showSuccess("Note saved"),r.textContent="Saved!",setTimeout(()=>{r.textContent=o},2e3);else throw new Error(l.message||"Failed to save note")}catch(l){console.error("Note save error:",l);const c=l.response?.data?.message||l.message||"Failed to save note";this.showError(c),r.textContent=o}finally{r.dataset.noteSaving="false",r.disabled=!1}}},async handlePhotoUpload(t){t.preventDefault(),t.stopPropagation();const r=t.currentTarget;if(r&&r.dataset&&r.dataset.uploading==="true")return;r&&r.dataset&&(r.dataset.uploading="true");const n=r.action,s=new FormData(r),i=r.querySelector('input[type="file"]'),o=r.querySelector('button[type="submit"]'),a=r.querySelector("[data-upload-progress]");if(!i||!i.files.length){r&&r.dataset&&(r.dataset.uploading="false"),this.showError("Please select photos to upload");return}a&&(a.classList.remove("hidden"),a.innerHTML='<div class="text-sm text-gray-600">Uploading...</div>'),o&&(o.disabled=!0,o.textContent="Uploading...");try{const l=await window.api.post(n,s,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:f=>{if(a&&f.total){const m=Math.round(f.loaded*100/f.total);a.innerHTML=`<div class="text-sm text-gray-600">Uploading... ${m}%</div>`}}});l.photos&&Array.isArray(l.photos)&&this.addPhotosToGallery(l.photos,r),i.value="";const c=r.querySelector("[data-photo-preview]");c&&(c.innerHTML="",c.classList.add("hidden")),this.updatePhotoCount(r);const d=document.querySelector("[data-session-id]")?.dataset.sessionId||window.location.pathname.match(/\/sessions\/(\d+)/)?.[1];d&&this.refreshAndRerender(d),this.showSuccess(l.message||"Photos uploaded successfully")}catch(l){console.error("Photo upload error:",l);const c=l.response?.data?.message||l.message||"Failed to upload photos";this.showError(c)}finally{r&&r.dataset&&(r.dataset.uploading="false"),o&&(o.disabled=!1,o.textContent="Upload Photos"),a&&a.classList.add("hidden")}},updateToggleUI(t,r){r?(t.classList.remove("bg-white","dark:bg-gray-700","border-gray-300","dark:border-gray-600"),t.classList.add("bg-green-600","border-green-600","text-white"),t.innerHTML='<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M5 13l4 4L19 7"></path></svg>',t.setAttribute("aria-label","Mark as incomplete")):(t.classList.remove("bg-green-600","border-green-600","text-white"),t.classList.add("bg-white","dark:bg-gray-700","border-gray-300","dark:border-gray-600"),t.innerHTML="",t.setAttribute("aria-label","Mark as complete"));const n=t.closest("[data-task-item]");if(n){const s=n.querySelector("[data-task-name]");s&&(r?(s.classList.add("line-through","text-gray-500","dark:text-gray-400"),s.classList.remove("text-gray-800","dark:text-gray-200")):(s.classList.remove("line-through","text-gray-500","dark:text-gray-400"),s.classList.add("text-gray-800","dark:text-gray-200")))}},updateProgress(){document.querySelectorAll("[data-progress-update]").forEach(r=>{r.dispatchEvent(new CustomEvent("progress-update"))})},addPhotosToGallery(t,r){const n=r.closest("[data-room-photos]")?.querySelector("[data-photo-gallery]");n&&t.forEach(s=>{const i=document.createElement("div");i.className="relative group",i.innerHTML=`
                    <button type="button" class="w-full" data-photo-view="${s.id}">
                        <img src="${s.url}" alt="Photo"
                             class="aspect-square w-full object-cover rounded-xl border transition hover:opacity-90" />
                        <span class="absolute bottom-1 right-1 text-[10px] px-1.5 py-0.5 rounded bg-black/60 text-white">
                            ${s.captured_at}
                        </span>
                    </button>
                `,n.appendChild(i)})},updatePhotoCount(t){const r=t.closest("[data-room-photos]")?.querySelector("[data-photo-count]");if(!r)return;const s=t.closest("[data-room-photos]")?.querySelector("[data-photo-gallery]")?.children.length||0;t.dataset.roomId,r.textContent=`${s}/8 photos`;const i=t.closest("[data-room-photos]")?.querySelector("[data-photo-progress]");if(i){const o=Math.min(s/8*100,100);i.style.width=`${o}%`}},showSuccess(t){this.success=t,this.error=null,setTimeout(()=>{this.success=null},3e3)},showError(t){this.error=t,this.success=null,setTimeout(()=>{this.error=null},5e3)},async refreshSessionData(t){try{const r=await window.api.get(`/api/sessions/${t}/data`);if(r.success&&r.data)return this.updateProgressFromData(r.data),document.dispatchEvent(new CustomEvent("session-data-updated",{detail:r.data})),r.data}catch(r){console.error("Failed to refresh session data:",r),this.showError("Failed to refresh session data")}},async refreshAndRerender(t){try{const r=this.dataUrl?this.dataUrl.replace("{session}",t):`/api/sessions/${t}/data`,n=await window.api.get(r);if(n.success&&n.data){const s=document.querySelector('[x-data*="checklistRenderer"]');if(s&&s._x_dataStack){const i=s._x_dataStack[0];i&&typeof i.refresh=="function"&&(i.sessionData=n.data,i.renderChecklist())}document.dispatchEvent(new CustomEvent("session-data-updated",{detail:n.data}))}}catch(r){console.error("Failed to refresh and re-render:",r)}},updateProgressFromData(t){const r=document.querySelector("[data-current-stage]");r&&(r.textContent=t.stage.replace("_"," ").toUpperCase()),document.querySelectorAll("[data-progress-update]").forEach(s=>{const i=s.dataset.roomId;if(i&&t.photo_counts[i]!==void 0){const o=t.photo_counts[i],a=Math.min(o/8*100,100);s.style.width=`${a}%`;const l=s.closest("[data-room-photos]")?.querySelector("[data-photo-count]");l&&(l.textContent=`${o}/8 photos`)}}),t.counts&&["pre_cleaning","during_cleaning","post_cleaning"].forEach(s=>{const i=document.querySelector(`[data-${s}-count]`);i&&t.counts[s]&&(i.textContent=`${t.counts[s].checked}/${t.counts[s].total}`)})}}}function Nd(e={}){return{sessionId:null,sessionData:null,loading:!1,error:null,renderedContent:"",dataUrl:e.dataUrl||null,photoDeleteUrl:e.photoDeleteUrl||null,init(){const t=document.querySelector("[data-session-id]");if(this.sessionId=t?.dataset.sessionId||window.location.pathname.match(/\/sessions\/(\d+)/)?.[1],!this.sessionId){console.error("Session ID not found");return}this.csrfToken=document.querySelector('meta[name="csrf-token"]')?.content||"",this.dataUrl||(this.dataUrl=`/api/sessions/${this.sessionId}/data`),this.loadSessionData()},async loadSessionData(){this.loading=!0,this.error=null;try{const t=await window.api.get(this.dataUrl);if(t.success&&t.data)this.sessionData=t.data,this.renderChecklist();else throw new Error("Failed to load session data")}catch(t){console.error("Error loading session data:",t);const r=t.response?.status;let n="Failed to load checklist. Please try again.";r===401||r===403?n="You do not have permission to access this checklist. Please ensure you are logged in with the correct account.":r===404?n="This session could not be found. It may have been deleted or you may not have access.":r===500?n="A server error occurred. Please try again or contact support if the problem persists.":navigator.onLine?t.response?.data?.message?n=t.response.data.message:t.message&&(n=t.message):n="You appear to be offline. Please check your internet connection and try again.",this.error=n}finally{this.loading=!1}},renderChecklist(){if(!this.sessionData)return;const t=this.sessionData.stage,r=document.querySelector("[data-current-stage]");r&&(r.textContent=t.replace(/_/g," ").split(" ").map(s=>s.charAt(0).toUpperCase()+s.slice(1)).join(" "));let n="";switch(t){case"pre_cleaning":n=this.renderPropertyTasks("pre_cleaning","Pre-Cleaning Tasks");break;case"rooms":n=this.renderRooms();break;case"during_cleaning":n=this.renderPropertyTasks("during_cleaning","During-Cleaning Tasks");break;case"post_cleaning":n=this.renderPropertyTasks("post_cleaning","Post-Cleaning Tasks");break;case"inventory":n=this.renderInventory();break;case"photos":n=this.renderPhotos();break;case"summary":n=this.renderSummary();break;default:n='<p class="text-gray-500">Unknown stage</p>'}this.renderedContent=n,setTimeout(()=>{this.setupEventHandlers()},100)},renderPropertyTasks(t,r){let n=this.sessionData.property_tasks[t]||[];Array.isArray(n)||(n=Object.values(n));const s=this.sessionData.counts[t]||{total:0,checked:0};return n.length===0?`
                    <div class="bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-6">
                        <p class="text-center text-gray-500 dark:text-gray-400 py-8">No ${r.toLowerCase()} defined.</p>
                    </div>
                `:`
                <div class="bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-6">
                    <div class="mb-6">
                        <div class="flex items-center justify-between mb-3">
                            <h2 class="text-2xl font-bold text-gray-900 dark:text-gray-100">${r}</h2>
                            <div class="text-right">
                                <div class="text-2xl font-bold text-gray-900 dark:text-gray-100">${s.checked}/${s.total}</div>
                                <div class="text-xs text-gray-500 dark:text-gray-400">completed</div>
                            </div>
                        </div>
                        <div class="w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2">
                            <div class="h-full rounded-full bg-blue-600 transition-all duration-500"
                                 style="width: ${s.total>0?s.checked/s.total*100:0}%"></div>
                        </div>
                    </div>
                    <div class="space-y-3">
                        ${n.map(i=>this.renderTaskItem(i,null)).join("")}
                    </div>
                </div>
            `},renderRooms(){let t=this.sessionData.rooms||[];return Array.isArray(t)||(t=Object.values(t)),`
                <div class="space-y-6">
                    ${t.map((r,n)=>{const i=(Array.isArray(r.tasks)?r.tasks:Object.values(r.tasks||{})).filter(c=>r.room_tasks.includes(c.id)),o=i.filter(c=>c.checklist_item?.checked).length,a=i.length,l=o===a&&a>0;return`
                            <div class="bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-6"
                                 data-room-id="${r.id}" data-room-index="${n}">
                                <div class="mb-6">
                                    <div class="flex items-center justify-between mb-3">
                                        <h3 class="text-xl font-bold text-gray-900 dark:text-gray-100">${r.name}</h3>
                                        ${l?`
                                            <span class="text-xs px-2 py-1 rounded bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-200">
                                                 Complete
                                            </span>
                                        `:""}
                                    </div>
                                    <div class="w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2">
                                        <div class="h-full rounded-full bg-blue-600 transition-all duration-500"
                                             style="width: ${a>0?o/a*100:0}%"></div>
                                    </div>
                                    <div class="flex items-center justify-between mt-2">
                                        <span class="text-sm font-medium text-gray-700 dark:text-gray-300">Room Tasks Progress</span>
                                        <span class="text-sm text-gray-500 dark:text-gray-400">${o}/${a}</span>
                                    </div>
                                </div>
                                <div class="space-y-3">
                                    ${i.map(c=>this.renderTaskItem(c,r,!1)).join("")}
                                </div>
                            </div>
                        `}).join("")}
                </div>
            `},renderInventory(){let t=this.sessionData.rooms||[];return Array.isArray(t)||(t=Object.values(t)),`
                <div class="space-y-6">
                    ${t.map((r,n)=>{const i=(Array.isArray(r.tasks)?r.tasks:Object.values(r.tasks||{})).filter(c=>r.inventory_tasks.includes(c.id));if(i.length===0)return"";const o=i.filter(c=>c.checklist_item?.checked).length,a=i.length,l=o===a&&a>0;return`
                            <div class="bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-6"
                                 data-room-id="${r.id}">
                                <div class="mb-6">
                                    <div class="flex items-center justify-between mb-3">
                                        <h3 class="text-xl font-bold text-gray-900 dark:text-gray-100">${r.name}  Inventory</h3>
                                        ${l?`
                                            <span class="text-xs px-2 py-1 rounded bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-200">
                                                 Complete
                                            </span>
                                        `:""}
                                    </div>
                                    <div class="w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2">
                                        <div class="h-full rounded-full bg-purple-600 transition-all duration-500"
                                             style="width: ${a>0?o/a*100:0}%"></div>
                                    </div>
                                    <div class="flex items-center justify-between mt-2">
                                        <span class="text-sm font-medium text-gray-700 dark:text-gray-300">Inventory Progress</span>
                                        <span class="text-sm text-gray-500 dark:text-gray-400">${o}/${a}</span>
                                    </div>
                                </div>
                                <div class="space-y-3">
                                    ${i.map(c=>this.renderTaskItem(c,r,!1)).join("")}
                                </div>
                            </div>
                        `}).join("")}
                </div>
            `},renderPhotos(){let t=this.sessionData.rooms||[];Array.isArray(t)||(t=Object.values(t));const r=this.sessionData.photo_counts||{},n=this.sessionData.photos_by_room||{};return`
                <div class="space-y-6">
                    ${t.map(s=>{const i=r[s.id]||0,o=n[s.id]||[];return`
                            <div class="bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-6" data-room-photos data-room-id="${s.id}">
                                <div class="mb-6">
                                    <div class="flex items-center justify-between mb-3">
                                        <h3 class="text-xl font-bold text-gray-900 dark:text-gray-100">${s.name}  Photos</h3>
                                        <span class="text-sm font-medium text-gray-600 dark:text-gray-400" data-photo-count>${i}/8 photos</span>
                                    </div>
                                    <div class="w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2">
                                        <div class="h-full rounded-full bg-green-600 transition-all duration-500"
                                             style="width: ${Math.min(i/8*100,100)}%"></div>
                                    </div>
                                </div>

                                <div x-data="photoUploader(${s.id})" class="mb-6">
                                    <form method="post" enctype="multipart/form-data"
                                          action="/sessions/${this.sessionId}/rooms/${s.id}/photos"
                                          data-checklist-photo-form
                                          data-room-id="${s.id}"
                                          @submit.prevent.stop="handleSubmit($event)">

                                        <div class="relative flex flex-col items-center justify-center rounded-xl border-2 border-dashed p-4 sm:p-6 mb-4
                                                   border-gray-300 dark:border-gray-600 bg-gray-50 dark:bg-gray-800/50
                                                   hover:border-blue-400 hover:bg-blue-50/50 dark:hover:bg-blue-900/10 transition-colors cursor-pointer"
                                             @dragover.prevent="hover = true"
                                             @dragleave.prevent="hover = false"
                                             @drop.prevent="handleDrop($event)"
                                             @click="$refs.fileInput.click()"
                                             :class="hover ? 'border-blue-400 bg-blue-50/50 dark:bg-blue-900/10' : ''">
                                            <svg class="h-8 w-8 sm:h-10 sm:w-10 text-gray-400 dark:text-gray-500 mb-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z" />
                                            </svg>
                                            <p class="text-xs sm:text-sm text-gray-600 dark:text-gray-400 text-center px-2">
                                                <span class="text-blue-600 dark:text-blue-400 font-medium">Click to upload</span> or drag and drop
                                            </p>
                                            <p class="text-[10px] sm:text-xs text-gray-500 dark:text-gray-500 mt-1">PNG, JPG, JPEG up to 5MB</p>

                                            <input x-ref="fileInput"
                                                   type="file"
                                                   name="photos[]"
                                                   multiple
                                                   accept="image/*"
                                                   class="hidden"
                                                   @change="handleFiles($event)" />
                                        </div>

                                        <div x-show="previews.length > 0" x-cloak class="mb-4">
                                            <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-2 sm:gap-3">
                                                <template x-for="(preview, index) in previews" :key="index">
                                                    <div class="relative group rounded-lg overflow-hidden border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800"
                                                         x-data="{ fullscreen: false }">
                                                        <button type="button" @click="fullscreen = true" class="w-full">
                                                            <img :src="preview.url"
                                                                 class="w-full aspect-square object-cover"
                                                                 :alt="'Preview ' + (index + 1)"
                                                                 :width="preview.width || 200"
                                                                 :height="preview.height || 200"
                                                                 loading="lazy" />
                                                        </button>
                                                        <div x-show="fullscreen"
                                                             x-cloak
                                                             @click.self="fullscreen = false"
                                                             @keydown.escape.window="fullscreen = false"
                                                             class="fixed inset-0 z-50 bg-black/95 flex items-center justify-center p-2 sm:p-4">
                                                            <img :src="preview.url"
                                                                 class="max-h-full max-w-full object-contain rounded-lg"
                                                                 :alt="'Preview ' + (index + 1)"
                                                                 :width="preview.width || 1920"
                                                                 :height="preview.height || 1080" />
                                                            <button type="button"
                                                                    @click="fullscreen = false"
                                                                    class="absolute top-2 right-2 sm:top-4 sm:right-4 text-white text-2xl sm:text-3xl hover:text-gray-300 transition-colors bg-black/50 rounded-full w-8 h-8 sm:w-10 sm:h-10 flex items-center justify-center">
                                                                
                                                            </button>
                                                        </div>
                                                        <div class="absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center">
                                                            <button type="button"
                                                                    @click.stop="removePreview(index)"
                                                                    class="px-2 sm:px-3 py-1 sm:py-1.5 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors text-xs sm:text-sm font-medium">
                                                                Remove
                                                            </button>
                                                        </div>
                                                        <div class="absolute top-1 right-1 sm:top-2 sm:right-2">
                                                            <span class="text-[10px] sm:text-xs px-1.5 sm:px-2 py-0.5 sm:py-1 rounded bg-black/60 text-white" x-text="formatFileSize(preview.size)"></span>
                                                        </div>
                                                    </div>
                                                </template>
                                            </div>
                                        </div>

                                        <div class="flex flex-col sm:flex-row items-stretch sm:items-center gap-2 sm:gap-3">
                                            <button type="submit"
                                                    :disabled="previews.length === 0 || uploading"
                                                    class="w-full sm:flex-1 px-4 py-2.5 sm:py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed font-medium text-sm sm:text-base">
                                                <span x-show="!uploading">Upload <span x-text="previews.length"></span> Photo<span x-show="previews.length !== 1">s</span></span>
                                                <span x-show="uploading" class="flex items-center gap-2">
                                                    <svg class="animate-spin h-4 w-4" fill="none" viewBox="0 0 24 24">
                                                        <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                                                        <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                                                    </svg>
                                                    Uploading...
                                                </span>
                                            </button>
                                        </div>

                                        <div x-show="uploading && uploadProgress > 0" x-cloak class="mt-3">
                                            <div class="w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2">
                                                <div class="bg-blue-600 h-2 rounded-full transition-all duration-300"
                                                     :style="'width: ' + uploadProgress + '%'"></div>
                                            </div>
                                            <p class="text-xs text-gray-600 dark:text-gray-400 mt-1 text-center" x-text="uploadProgress + '%'"></p>
                                        </div>
                                    </form>
                                </div>

                                ${o.length>0?`
                                    <div data-photo-gallery class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-2 sm:gap-3">
                                        ${o.map(a=>{const l=a.url||"",c=a.captured_at?new Date(a.captured_at).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"}):"",u=this.photoDeleteUrl?`, { deleteUrl: '${this.photoDeleteUrl}' }`:"";return`
                                                <div class="relative group"
                                                     x-data="photoDeleteHandler(${a.id}, '${this.sessionId}'${u})"
                                                     data-photo-id="${a.id}">
                                                    <button type="button" @click="fullscreen = true" class="w-full">
                                                        <img src="${l}"
                                                             alt="Photo"
                                                             width="300"
                                                             height="300"
                                                             class="aspect-square w-full object-cover rounded-xl border transition hover:opacity-90"
                                                             loading="lazy" />
                                                        ${c?`
                                                            <span class="absolute bottom-1 right-1 text-[10px] sm:text-xs px-1.5 sm:px-2 py-0.5 sm:py-1 rounded bg-black/60 text-white">
                                                                ${c}
                                                            </span>
                                                        `:""}
                                                    </button>
                                                    <button type="button"
                                                            @click.stop="handleDeletePhoto()"
                                                            :disabled="deleting"
                                                            class="absolute top-1 right-1 sm:top-2 sm:right-2 p-1 sm:p-1.5 bg-red-600 text-white rounded-full opacity-0 group-hover:opacity-100 transition-opacity hover:bg-red-700 disabled:opacity-50"
                                                            title="Delete photo">
                                                        <svg class="w-3 h-3 sm:w-4 sm:h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path>
                                                        </svg>
                                                    </button>
                                                    <div x-show="fullscreen"
                                                         x-cloak
                                                         @click.self="fullscreen = false"
                                                         @keydown.escape.window="fullscreen = false"
                                                         class="fixed inset-0 z-50 bg-black/95 flex items-center justify-center p-2 sm:p-4">
                                                        <img src="${l}"
                                                             class="max-h-full max-w-full object-contain rounded-lg"
                                                             alt="Fullscreen photo"
                                                             width="1920"
                                                             height="1080" />
                                                        <button type="button"
                                                                @click="fullscreen = false"
                                                                class="absolute top-2 right-2 sm:top-4 sm:right-4 text-white text-2xl sm:text-3xl hover:text-gray-300 transition-colors bg-black/50 rounded-full w-8 h-8 sm:w-10 sm:h-10 flex items-center justify-center">
                                                            
                                                        </button>
                                                    </div>
                                                </div>
                                            `}).join("")}
                                    </div>
                                `:`
                                    <p class="text-center text-gray-500 dark:text-gray-400 py-8">No photos uploaded yet.</p>
                                `}
                            </div>
                        `}).join("")}

                    <div class="bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-6">
                        <form method="post" action="/sessions/${this.sessionId}/complete" class="text-center">
                            <input type="hidden" name="_token" value="${this.csrfToken}" />
                            <button type="submit" class="px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors font-medium">
                                Submit Checklist
                            </button>
                            <p class="mt-3 text-sm text-gray-500 dark:text-gray-400">
                                Requires 8 photos per room. Timestamp overlay is automatic on upload.
                            </p>
                        </form>
                    </div>
                </div>
            `},renderSummary(){return'<p class="text-gray-500">Summary view - to be implemented</p>'},renderTaskItem(t,r,n=!1){const s=r===null,i=s?`/sessions/${this.sessionId}/property-tasks/${t.id}/toggle`:`/sessions/${this.sessionId}/rooms/${r.id}/tasks/${t.id}/toggle`,o=s?`/sessions/${this.sessionId}/property-tasks/${t.id}/note`:`/sessions/${this.sessionId}/rooms/${r.id}/tasks/${t.id}/note`,a=s?`/sessions/${this.sessionId}/property-tasks/${t.id}/photo`:`/sessions/${this.sessionId}/rooms/${r.id}/tasks/${t.id}/photo`,l=t.checklist_item?.checked||!1,c=t.checklist_item?.note||"",u=t.instructions&&t.instructions.trim().length>0,d=t.media&&t.media.length>0,f=u||d,m=this.sessionData.is_view_only||!1,h=n||m;return`
                <div data-task-item data-task-id="${t.id}"
                     class="bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600 transition-all duration-200 ${l?"opacity-90":""}"
                     x-data="{
                         detailsOpen: ${!l&&f?"true":"false"},
                         galleryOpen: false,
                         gallerySrc: null,
                         noteValue: '${(t.checklist_item?.note||"").replace(/'/g,"\\'")}',
                         noteSaving: false
                     }">
                    <div class="p-4">
                        <div class="flex items-start gap-4">
                            <div class="flex-shrink-0 pt-0.5">
                                <button type="button"
                                        data-checklist-toggle
                                        data-toggle-url="${i}"
                                        data-checked="${l}"
                                        ${h?"disabled":""}
                                        class="relative w-6 h-6 rounded-md border-2 flex items-center justify-center transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 ${h?"opacity-50 cursor-not-allowed":"cursor-pointer hover:scale-110"} ${l?"bg-green-600 border-green-600 text-white":"bg-white dark:bg-gray-700 border-gray-300 dark:border-gray-600"}"
                                        aria-label="${l?"Mark as incomplete":"Mark as complete"}">
                                    ${l?`
                                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M5 13l4 4L19 7"></path>
                                        </svg>
                                    `:""}
                                </button>
                            </div>

                            <div class="flex-1 min-w-0">
                                <div class="flex flex-col gap-3">
                                    <div class="flex-1 min-w-0">
                                        <h3 data-task-name class="text-base font-semibold text-gray-900 dark:text-gray-100 mb-1 transition-all ${l?"line-through text-gray-500 dark:text-gray-400":""}">
                                            ${t.name}
                                        </h3>

                                        ${f?`
                                            <div class="flex items-center gap-2 mt-1">
                                                <button type="button" @click="detailsOpen = !detailsOpen"
                                                        class="inline-flex items-center gap-1.5 text-sm text-amber-600 dark:text-amber-400 hover:text-amber-700 dark:hover:text-amber-300 transition-colors font-bold uppercase">
                                                    <svg class="w-4 h-4 transition-transform" :class="{ 'rotate-180': detailsOpen }" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                                                    </svg>
                                                    <span x-text="detailsOpen ? 'HIDE NOTES' : 'READ IMPORTANT NOTES'"></span>
                                                </button>
                                                ${d?`
                                                    <span class="text-xs text-gray-500 dark:text-gray-400">
                                                         ${t.media.length} ${t.media.length===1,"media"}
                                                    </span>
                                                `:""}
                                            </div>
                                        `:""}

                                        ${u&&!l?`
                                            <p class="text-sm text-gray-600 dark:text-gray-400 mt-2 line-clamp-2">
                                                ${this.escapeHtml(t.instructions).substring(0,120)}${t.instructions.length>120?"...":""}
                                            </p>
                                        `:""}
                                    </div>

                                    <!-- Action Icons: Notes and Photo -->
                                    <div class="flex items-center gap-2 ml-auto">
                                        <!-- Notes Icon & Popup -->
                                        <div x-data="{ noteModalOpen: false }" class="relative">
                                            <button type="button"
                                                    @click="noteModalOpen = true"
                                                    ${h?"disabled":""}
                                                    class="p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors ${h?"opacity-50 cursor-not-allowed":""} ${c?"text-blue-600 dark:text-blue-400":"text-gray-500 dark:text-gray-400"}"
                                                    title="${c?"View/Edit Note":"Add Note"}">
                                                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path>
                                                </svg>
                                            </button>
                                            
                                            <!-- Note Modal -->
                                            <div x-show="noteModalOpen" x-cloak
                                                 @click.self="noteModalOpen = false"
                                                 @keydown.escape.window="noteModalOpen = false"
                                                 class="fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4">
                                                <div @click.stop class="bg-white dark:bg-gray-800 rounded-xl shadow-xl w-full max-w-md p-6">
                                                    <div class="flex items-center justify-between mb-4">
                                                        <h3 class="text-lg font-semibold text-gray-900 dark:text-gray-100">Task Note</h3>
                                                        <button type="button" @click="noteModalOpen = false" class="text-gray-400 hover:text-gray-600 dark:hover:text-gray-300">
                                                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                                                            </svg>
                                                        </button>
                                                    </div>
                                                    <div data-note-container>
                                                        <textarea data-note-input
                                                                  x-model="noteValue"
                                                                  placeholder="Enter your note here..."
                                                                  rows="4"
                                                                  class="w-full px-3 py-2 text-sm rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none"></textarea>
                                                        <div class="flex justify-end gap-2 mt-4">
                                                            <button type="button" @click="noteModalOpen = false"
                                                                    class="px-4 py-2 text-sm font-medium rounded-lg bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors">
                                                                Cancel
                                                            </button>
                                                            <button type="button"
                                                                    data-checklist-note-save="true"
                                                                    data-note-url="${o||""}"
                                                                    data-note-saving="false"
                                                                    @click="noteModalOpen = false"
                                                                    class="px-4 py-2 text-sm font-medium rounded-lg bg-blue-600 text-white hover:bg-blue-700 transition-colors">
                                                                Save Note
                                                            </button>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <!-- Photo Upload Icon -->
                                        <div x-data="{ photoModalOpen: false, photoNote: '', uploading: false, photoPreview: null }" class="relative">
                                            <button type="button"
                                                    @click="photoModalOpen = true"
                                                    ${h?"disabled":""}
                                                    class="p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors ${h?"opacity-50 cursor-not-allowed":""} text-gray-500 dark:text-gray-400"
                                                    title="Upload Photo">
                                                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"></path>
                                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 13a3 3 0 11-6 0 3 3 0 016 0z"></path>
                                                </svg>
                                            </button>
                                            
                                            <!-- Photo Upload Modal -->
                                            <div x-show="photoModalOpen" x-cloak
                                                 @click.self="photoModalOpen = false"
                                                 @keydown.escape.window="photoModalOpen = false"
                                                 class="fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4">
                                                <div @click.stop class="bg-white dark:bg-gray-800 rounded-xl shadow-xl w-full max-w-md p-6">
                                                    <div class="flex items-center justify-between mb-4">
                                                        <h3 class="text-lg font-semibold text-gray-900 dark:text-gray-100">Upload Photo</h3>
                                                        <button type="button" @click="photoModalOpen = false; photoPreview = null; photoNote = ''" class="text-gray-400 hover:text-gray-600 dark:hover:text-gray-300">
                                                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                                                            </svg>
                                                        </button>
                                                    </div>
                                                    
                                                    <form data-task-photo-form action="${a||""}" method="POST" enctype="multipart/form-data">
                                                        <!-- Photo Preview -->
                                                        <div x-show="photoPreview" class="mb-4">
                                                            <img :src="photoPreview" class="w-full h-48 object-cover rounded-lg" alt="Preview" />
                                                        </div>
                                                        
                                                        <!-- Camera Input (only allows camera capture) -->
                                                        <div x-show="!photoPreview" class="mb-4">
                                                            <label class="flex flex-col items-center justify-center w-full h-32 border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-700/50">
                                                                <svg class="w-8 h-8 text-gray-400 mb-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"></path>
                                                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 13a3 3 0 11-6 0 3 3 0 016 0z"></path>
                                                                </svg>
                                                                <span class="text-sm text-gray-500 dark:text-gray-400">Take a photo</span>
                                                                <input type="file" name="photo" accept="image/*" capture="environment" class="hidden"
                                                                       @change="if ($event.target.files[0]) { photoPreview = URL.createObjectURL($event.target.files[0]); }" />
                                                            </label>
                                                        </div>
                                                        
                                                        <!-- Note (required when uploading photo) -->
                                                        <div class="mb-4">
                                                            <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Note (required)</label>
                                                            <textarea name="note" x-model="photoNote" placeholder="Describe what's in this photo..." rows="3" required
                                                                      class="w-full px-3 py-2 text-sm rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none"></textarea>
                                                        </div>
                                                        
                                                        <div class="flex justify-end gap-2">
                                                            <button type="button" @click="photoModalOpen = false; photoPreview = null; photoNote = ''"
                                                                    class="px-4 py-2 text-sm font-medium rounded-lg bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors">
                                                                Cancel
                                                            </button>
                                                            <button type="submit" :disabled="!photoPreview || !photoNote.trim() || uploading"
                                                                    class="px-4 py-2 text-sm font-medium rounded-lg bg-blue-600 text-white hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed">
                                                                <span x-show="!uploading">Upload Photo</span>
                                                                <span x-show="uploading">Uploading...</span>
                                                            </button>
                                                        </div>
                                                    </form>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                ${f?`
                                    <div x-show="detailsOpen" x-collapse x-cloak class="mt-4 pt-4 border-t border-gray-200 dark:border-gray-700">
                                        ${u?`
                                            <div class="mb-4">
                                                <h4 class="text-sm font-semibold text-gray-900 dark:text-gray-100 mb-2">Instructions:</h4>
                                                <div class="prose dark:prose-invert prose-sm max-w-none bg-gray-50 dark:bg-gray-900/40 rounded-lg p-4">
                                                    ${this.formatInstructions(t.instructions)}
                                                </div>
                                            </div>
                                        `:""}

                                        ${d?`
                                            <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-3">
                                                ${t.media.map(b=>`
                                                    <div class="relative rounded-lg overflow-hidden border border-gray-200 dark:border-gray-700 group">
                                                        ${b.type==="image"?`
                                                            <button type="button" @click="galleryOpen = true; gallerySrc = '${b.url}'" class="block w-full">
                                                                <img src="${b.thumbnail||b.url}" alt="${b.caption||"Task media"}"
                                                                     class="w-full h-32 object-cover transition-transform group-hover:scale-105" loading="lazy" />
                                                            </button>
                                                        `:`
                                                            <video src="${b.url}" class="w-full h-32 object-cover" controls muted></video>
                                                        `}
                                                        ${b.caption?`
                                                            <span class="absolute bottom-1 left-1 text-xs px-2 py-1 rounded bg-black/60 text-white">
                                                                ${this.escapeHtml(b.caption.substring(0,20))}
                                                            </span>
                                                        `:""}
                                                    </div>
                                                `).join("")}
                                            </div>
                                        `:""}
                                    </div>
                                `:""}
                            </div>
                        </div>
                    </div>

                    <div x-show="galleryOpen" x-cloak @click.self="galleryOpen = false" @keydown.escape.window="galleryOpen = false"
                         class="fixed inset-0 z-50 bg-black/90 flex items-center justify-center p-4">
                        <img :src="gallerySrc" class="max-h-[90vh] max-w-[90vw] rounded-lg shadow-2xl" alt="Gallery view" />
                        <button type="button" @click="galleryOpen = false" class="absolute top-4 right-4 text-white text-3xl hover:text-gray-300 transition-colors"></button>
                    </div>
                </div>
            `},formatInstructions(t){return t?this.escapeHtml(t).replace(/\n/g,"<br>"):""},escapeHtml(t){const r=document.createElement("div");return r.textContent=t,r.innerHTML},setupEventHandlers(){window.checklistHandler&&window.checklistHandler.setupFormHandlers()},async refresh(){await this.loadSessionData()},checkRoomCompletion(){if(!this.sessionData)return;let t=this.sessionData.rooms||[];Array.isArray(t)||(t=Object.values(t)),t.forEach((r,n)=>{const i=(Array.isArray(r.tasks)?r.tasks:Object.values(r.tasks||{})).filter(c=>r.room_tasks.includes(c.id)),o=i.filter(c=>c.checklist_item?.checked).length,a=i.length;o===a&&a>0&&setTimeout(()=>{this.refresh()},500)})}}}function Fd(e){return{roomId:e,previews:[],hover:!1,uploading:!1,uploadProgress:0,init(){},handleDrop(t){t.preventDefault(),this.hover=!1;const r=Array.from(t.dataTransfer.files);this.addFiles(r)},handleFiles(t){const r=Array.from(t.target.files||[]);this.addFiles(r)},addFiles(t){t.forEach(r=>{if(!r.type.startsWith("image/"))return;if(r.size>5*1024*1024){alert(`File ${r.name} is too large. Maximum size is 5MB.`);return}const n=new FileReader;n.onload=s=>{const i=new Image;i.onload=()=>{this.previews.push({file:r,url:s.target.result,size:r.size,name:r.name,width:i.width,height:i.height})},i.src=s.target.result},n.readAsDataURL(r)})},removePreview(t){this.previews[t].url.startsWith("blob:")&&URL.revokeObjectURL(this.previews[t].url),this.previews.splice(t,1)},formatFileSize(t){if(t===0)return"0 Bytes";const r=1024,n=["Bytes","KB","MB"],s=Math.floor(Math.log(t)/Math.log(r));return Math.round(t/Math.pow(r,s)*100)/100+" "+n[s]},async handleSubmit(t){if(t.preventDefault(),t.stopPropagation(),this.previews.length===0||this.uploading)return;const r=t.currentTarget,n=new FormData;this.previews.forEach(s=>{n.append("photos[]",s.file)}),this.uploading=!0,this.uploadProgress=0;try{const s=await window.api.post(r.action,n,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:i=>{i.total&&(this.uploadProgress=Math.round(i.loaded*100/i.total))}});if(s.success||s.photos){this.previews.forEach(a=>{a.url.startsWith("blob:")&&URL.revokeObjectURL(a.url)}),this.previews=[],this.$refs.fileInput.value="";const i=document.querySelector('[x-data*="checklistRenderer"]')?._x_dataStack?.[0];i&&await i.refresh();const o=window.checklistHandler;o&&o.showSuccess(s.message||"Photos uploaded successfully")}else throw new Error(s.message||"Upload failed")}catch(s){console.error("Upload error:",s);const i=s.response?.data?.message||s.message||"Failed to upload photos",o=window.checklistHandler;o?o.showError(i):alert(i)}finally{this.uploading=!1,this.uploadProgress=0}}}}function jd(e,t,r={}){return{fullscreen:!1,deleting:!1,photoId:e,sessionId:t,deleteUrl:r.deleteUrl||null,handleDeletePhoto(){if(confirm("Are you sure you want to delete this photo?")){this.deleting=!0;const n=this.deleteUrl?this.deleteUrl.replace("{session}",this.sessionId).replace("{photo}",this.photoId):`/api/sessions/${this.sessionId}/photos/${this.photoId}`;window.api.delete(n).then(s=>{if(s.success){const i=document.querySelector(`[data-photo-id="${this.photoId}"]`);i&&i.remove();const o=document.querySelector('[x-data*="checklistRenderer"]')?._x_dataStack?.[0];o&&o.refresh()}else alert("Failed to delete photo"),this.deleting=!1}).catch(()=>{alert("Failed to delete photo"),this.deleting=!1})}}}}function Ud(e){return e?e.replace(/_/g," ").replace(/\b\w/g,t=>t.toUpperCase()):""}function Hd({roomsUrl:e,tasksUrl:t,manageRoomsUrl:r,manageTasksUrl:n}){return{roomsUrl:e,tasksUrl:t,manageRoomsUrl:r,manageTasksUrl:n,rooms:[],tasks:[],loadingRooms:!1,loadingTasks:!1,roomsError:"",tasksError:"",phaseLabel:Ud,init(){this.refreshAll()},async refreshAll(){await Promise.all([this.fetchRooms(),this.fetchTasks()])},async fetchRooms(){this.loadingRooms=!0,this.roomsError="";try{const s=await fetch(this.roomsUrl,{headers:{Accept:"application/json","X-Requested-With":"XMLHttpRequest"}}),i=await s.json();if(!s.ok)throw new Error(i?.message||"Failed to load rooms");this.rooms=Array.isArray(i.rooms)?i.rooms:[]}catch(s){console.error(s),this.roomsError=s?.message||"Unable to load assigned rooms right now.",this.rooms=[]}finally{this.loadingRooms=!1}},async fetchTasks(){this.loadingTasks=!0,this.tasksError="";try{const s=await fetch(this.tasksUrl,{headers:{Accept:"application/json","X-Requested-With":"XMLHttpRequest"}}),i=await s.json();if(!s.ok)throw new Error(i?.message||"Failed to load tasks");this.tasks=Array.isArray(i.tasks)?i.tasks:[]}catch(s){console.error(s),this.tasksError=s?.message||"Unable to load assigned property tasks right now.",this.tasks=[]}finally{this.loadingTasks=!1}}}}window.Sortable=x;window.PerfectScrollbar=Bt;window.randomUID=function(t="id"){const r=Math.random().toString(36).substring(2,10),n=Date.now().toString(36);return`${t}-${n}-${r}`};document.addEventListener("alpine:init",()=>{I.data("mainState",()=>{let e=0;const t=function(){window.addEventListener("scroll",()=>{let s=window.pageYOffset||document.documentElement.scrollTop;s>e?(this.scrollingDown=!0,this.scrollingUp=!1):(this.scrollingDown=!1,this.scrollingUp=!0,s==0&&(this.scrollingDown=!1,this.scrollingUp=!1)),e=s<=0?0:s})},r=()=>window.localStorage.getItem("dark")?JSON.parse(window.localStorage.getItem("dark")):!!window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches,n=s=>{window.localStorage.setItem("dark",s)};return{init:t,isDarkMode:r(),toggleTheme(){this.isDarkMode=!this.isDarkMode,n(this.isDarkMode)},isSidebarOpen:window.innerWidth>1024,isSidebarHovered:!1,handleSidebarHover(s){window.innerWidth<1024||(this.isSidebarHovered=s)},handleWindowResize(){window.innerWidth<=1024?this.isSidebarOpen=!1:this.isSidebarOpen=!0},scrollingDown:!1,scrollingUp:!1}})});document.addEventListener("alpine:init",()=>{I.data("mediaDropzone",Sd),I.data("taskList",kd),I.data("taskAutocomplete",Ed),I.data("roomsList",_d),I.data("roomAutocomplete",xd),I.data("roomPicker",Td),I.data("taskPicker",Ad),I.data("dropdown",Cd),I.data("roomsIndex",Od),I.data("roomTasksEditor",Rd),I.data("taskCreateForm",Dd),I.data("roomCreateForm",Pd),I.data("propertyTaskForm",Ld),I.data("propertyRoomForm",Id),I.data("propertyPropertyTaskForm",Md),I.data("checklist",$d),I.data("checklistRenderer",Nd),I.data("photoUploader",Fd),I.data("photoDeleteHandler",jd),I.data("propertyAssignmentsPanel",Hd),I.data("bulkTaskForm",function(e){return{tasks:[],defaultType:"room",status:null,message:"",taskInput:null,init(){this.$refs.taskInput?.focus()},capitalizeText(t){return t?t.toLowerCase().split(" ").map(r=>r.charAt(0).toUpperCase()+r.slice(1)).join(" "):""},addTaskFromInput(){const t=this.$refs.taskInput;if(!t)return;const r=t.value.trim();if(!r)return;const n=this.capitalizeText(r);if(this.tasks.some(i=>i.name.toLowerCase()===n.toLowerCase())){this.showMessage("error",`"${n}" is already in the list`);return}this.tasks.push({name:n}),t.value="",this.status=null},addSuggestedTask(t){if(!t||!t.trim())return;const r=t.trim(),n=this.capitalizeText(r);if(this.tasks.some(i=>i.name.toLowerCase()===n.toLowerCase())){this.showMessage("error",`"${n}" is already in the list`);return}this.tasks.push({name:n}),this.status=null},handlePaste(t){t.preventDefault();const n=(t.clipboardData||window.clipboardData).getData("text").split(`
`).map(s=>s.trim()).filter(s=>s.length>0);n.length>0&&(n.forEach(s=>{const i=this.capitalizeText(s);this.tasks.some(a=>a.name.toLowerCase()===i.toLowerCase())||this.tasks.push({name:i})}),this.$refs.taskInput.value="")},removeTask(t){this.tasks.splice(t,1)},clearAll(){confirm(`Remove all ${this.tasks.length} tasks from the list?`)&&(this.tasks=[],this.status=null)},showMessage(t,r){this.status=t,this.message=r,t==="saved"&&setTimeout(()=>{this.status=null},3e3)},async saveAll(){if(this.tasks.length===0)return;this.status="saving",this.message=`Creating ${this.tasks.length} task(s)...`;const t=new FormData;t.append("_token",e.csrf),t.append("tasks",JSON.stringify(this.tasks.map(r=>r.name))),t.append("default_type",this.defaultType);try{const r=await fetch(e.storeUrl,{method:"POST",body:t,headers:{"X-Requested-With":"XMLHttpRequest"}}),n=await r.json();r.ok?(this.showMessage("saved",`Successfully created ${n.created||this.tasks.length} task(s)!`),this.tasks=[],setTimeout(()=>{window.location.reload()},1500)):this.showMessage("error",n.message||"Failed to create tasks. Please try again.")}catch(r){console.error("Error saving bulk tasks:",r),this.showMessage("error","An error occurred while saving tasks. Please try again.")}}}})});I.plugin(Nu);I.start();
